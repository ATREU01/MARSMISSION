(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const nl={path:"/api/v1/analytics_events",method:"POST"},rl={path:"/api/v1/apps/:app_id",method:"GET"},sl={path:"/api/v1/funding/coinbase_on_ramp/init",method:"POST"},il={path:"/api/v1/funding/coinbase_on_ramp/status",method:"GET"},ol={path:"/api/v1/apps/:app_id/cross-app/connections",method:"GET"},al={path:"/api/v1/custom_jwt_account/authenticate",method:"POST"},cl={path:"/api/v1/farcaster/init",method:"POST"},ul={path:"/api/v1/farcaster/authenticate",method:"POST"},ll={path:"/api/v1/farcaster/link",method:"POST"},dl={path:"/api/v1/farcaster/unlink",method:"POST"},fl={path:"/api/v1/farcaster/status",method:"GET"},hl={path:"/api/v2/farcaster/init",method:"POST"},pl={path:"/api/v2/farcaster/authenticate",method:"POST"},yl={path:"/api/v1/guest/authenticate",method:"POST"},ml={path:"/api/v1/mfa/passkeys/init",method:"POST"},bl={path:"/api/v1/mfa/passwordless_sms/init",method:"POST"},gl={path:"/api/v1/oauth/authenticate",method:"POST"},wl={path:"/api/v1/oauth/init",method:"POST"},vl={path:"/api/v1/oauth/link",method:"POST"},_l={path:"/api/v1/oauth/unlink",method:"POST"},xl={path:"/api/v1/passkeys/link",method:"POST"},Il={path:"/api/v1/passkeys/authenticate",method:"POST"},El={path:"/api/v1/passkeys/register",method:"POST"},Al={path:"/api/v1/passkeys/authenticate/init",method:"POST"},Pl={path:"/api/v1/passkeys/register/init",method:"POST"},kl={path:"/api/v1/passkeys/link/init",method:"POST"},$l={path:"/api/v1/passwordless/authenticate",method:"POST"},Tl={path:"/api/v1/passwordless/init",method:"POST"},Sl={path:"/api/v1/passwordless/link",method:"POST"},Ol={path:"/api/v1/passwordless/unlink",method:"POST"},Bl={path:"/api/v1/passwordless/update",method:"POST"},Cl={path:"/api/v1/passwordless_sms/authenticate",method:"POST"},Rl={path:"/api/v1/passwordless_sms/init",method:"POST"},Nl={path:"/api/v1/passwordless_sms/link",method:"POST"},Ml={path:"/api/v1/passwordless_sms/unlink",method:"POST"},Ul={path:"/api/v1/passwordless_sms/update",method:"POST"},Fl={path:"/api/v1/embedded_wallets/:address/recovery/key_material",method:"POST"},Ll={path:"/api/v1/recovery/oauth/init",method:"POST"},zl={path:"/api/v1/recovery/oauth/authenticate",method:"POST"},Dl={path:"/api/v1/recovery/oauth/init_icloud",method:"POST"},jl={path:"/api/v1/recovery/configuration_icloud",method:"POST"},Gl=(t,e)=>e?Object.entries(e).reduce((n,[r,s])=>n.replace(`:${r}`,`${s}`),t):t,Xi={path:"/api/v1/sessions",method:"POST"},ql={path:"/api/v1/sessions/logout",method:"POST"},Vl={path:"/api/v1/apps/:app_id/smart_wallets",method:"GET"},ya={path:"/api/v1/siwe/init",method:"POST"},Hl={path:"/api/v1/siwe/authenticate",method:"POST"},Wl={path:"/api/v1/siwe/link",method:"POST"},Kl={path:"/api/v1/siwe/link_smart_wallet",method:"POST"},Zl={path:"/api/v1/siwe/unlink",method:"POST"},Yl={path:"/api/v1/siws/init",method:"POST"},Jl={path:"/api/v1/siws/authenticate",method:"POST"},Xl={path:"/api/v1/siws/link",method:"POST"},Ql={path:"/api/v1/siws/unlink",method:"POST"},ed={path:"/api/v1/users/me/accept_terms",method:"POST"},td={path:"/api/v1/plugins/moonpay_on_ramp/sign",method:"POST"},nd={path:"/api/v1/wallets",method:"POST"},Lr={path:"/api/v1/wallets/:wallet_id/rpc",method:"POST"},rd={path:"/api/v1/wallets/revoke",method:"POST"};let sd=class{getConfig(){return this._privyInternal.config}async getSmartWalletConfig(){return this._smartWalletConfig||(this._smartWalletConfig=await this._privyInternal.fetch(Vl,{params:{app_id:this.appId}})),this._smartWalletConfig}get appId(){return this._privyInternal.appId}constructor(e){this._privyInternal=e}};const id=new TextEncoder,ma=new TextDecoder,od=t=>{let e=t;typeof e=="string"&&(e=id.encode(e));const n=32768,r=[];for(let s=0;s<e.length;s+=n)r.push(String.fromCharCode.apply(null,e.subarray(s,s+n)));return btoa(r.join(""))},ad=t=>od(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),cd=t=>{const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},ud=t=>{let e=t;e instanceof Uint8Array&&(e=ma.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return cd(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class ld extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){var n;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(n=Error.captureStackTrace)===null||n===void 0||n.call(Error,this,this.constructor)}}class ot extends ld{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}function dd(t){return typeof t=="object"&&t!==null}function fd(t){if(!dd(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}const ni=ad,hd=ud;function pd(t){if(typeof t!="string")throw new ot("JWTs must use Compact JWS serialization, JWT must be a string");const{1:e,length:n}=t.split(".");if(n===5)throw new ot("Only JWTs using Compact JWS serialization can be decoded");if(n!==3)throw new ot("Invalid JWT");if(!e)throw new ot("JWTs must contain a payload");let r;try{r=hd(e)}catch{throw new ot("Failed to base64url decode the payload")}let s;try{s=JSON.parse(ma.decode(r))}catch{throw new ot("Failed to parse the decoded payload as JSON")}if(!fd(s))throw new ot("Invalid JWT Claims Set");return s}let St=class ba{static parse(e){try{return new ba(e)}catch{return null}}get subject(){return this._decoded.sub}get expiration(){return this._decoded.exp}get issuer(){return this._decoded.iss}get audience(){return this._decoded.aud}isExpired(e=0){return Date.now()>=1e3*(this.expiration-e)}constructor(e){this.value=e,this._decoded=pd(e)}},ga=class gs{async updateOnCrossAppAuthentication(e,n){let r=n.access_token,s=gs.providerAccessTokenStorageKey(e);await this._storage.put(s,r)}async getProviderAccessToken(e){let n=gs.providerAccessTokenStorageKey(e),r=await this._storage.get(n);if(typeof r!="string")return null;try{if(new St(r).isExpired())throw Error("JWT is expired");return r}catch{return await this._storage.del(n),null}}async getCrossAppConnections(){return await this._privyInternal.fetch(ol,{params:{app_id:this._privyInternal.appId}})}constructor(e,n){this._privyInternal=e,this._storage=n}};ga.providerAccessTokenStorageKey=t=>`privy:cross-app:${t}`;let yd=class{async revoke(){await this._privyInternal.fetch(rd,{})}constructor(e){this._privyInternal=e}};function md(t,e){return{...t,rpcUrls:{...t.rpcUrls,privy:{http:[e]}}}}const ri={id:42161,name:"Arbitrum One",network:"arbitrum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://arbitrum-mainnet.rpc.privy.systems"]},alchemy:{http:["https://arb-mainnet.g.alchemy.com/v2"],webSocket:["wss://arb-mainnet.g.alchemy.com/v2"]},infura:{http:["https://arbitrum-mainnet.infura.io/v3"],webSocket:["wss://arbitrum-mainnet.infura.io/ws/v3"]},default:{http:["https://arb1.arbitrum.io/rpc"]},public:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{etherscan:{name:"Arbiscan",url:"https://arbiscan.io"},default:{name:"Arbiscan",url:"https://arbiscan.io"}}},bd={id:421614,name:"Arbitrum Sepolia",network:"arbitrum-sepolia",nativeCurrency:{name:"Arbitrum Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://arbitrum-sepolia.rpc.privy.systems"]},default:{http:["https://sepolia-rollup.arbitrum.io/rpc"]},public:{http:["https://sepolia-rollup.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Blockscout",url:"https://sepolia-explorer.arbitrum.io"}},testnet:!0},si={id:43114,name:"Avalanche",network:"avalanche",nativeCurrency:{decimals:18,name:"Avalanche",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax.network/ext/bc/C/rpc"]},public:{http:["https://api.avax.network/ext/bc/C/rpc"]}},blockExplorers:{etherscan:{name:"SnowTrace",url:"https://snowtrace.io"},default:{name:"SnowTrace",url:"https://snowtrace.io"}}},gd={id:43113,name:"Avalanche Fuji",network:"avalanche-fuji",nativeCurrency:{decimals:18,name:"Avalanche Fuji",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax-test.network/ext/bc/C/rpc"]},public:{http:["https://api.avax-test.network/ext/bc/C/rpc"]}},blockExplorers:{etherscan:{name:"SnowTrace",url:"https://testnet.snowtrace.io"},default:{name:"SnowTrace",url:"https://testnet.snowtrace.io"}},testnet:!0},ii={id:8453,network:"base",name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://base-mainnet.rpc.privy.systems"]},default:{http:["https://mainnet.base.org"]},public:{http:["https://mainnet.base.org"]}},blockExplorers:{etherscan:{name:"Basescan",url:"https://basescan.org"},default:{name:"Basescan",url:"https://basescan.org"}}},wd={id:84532,network:"base-sepolia",name:"Base Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://base-sepolia.rpc.privy.systems"]},default:{http:["https://sepolia.base.org"]},public:{http:["https://sepolia.base.org"]}},blockExplorers:{default:{name:"Blockscout",url:"https://base-sepolia.blockscout.com"}},testnet:!0},vd={id:80085,network:"berachain-artio",name:"Berachain Artio",nativeCurrency:{name:"BERA",symbol:"BERA",decimals:18},rpcUrls:{default:{http:["https://berachain-artio.rpc.privy.systems"]},public:{http:["https://berachain-artio.rpc.privy.systems"]}},blockExplorers:{default:{name:"Beratrail",url:"https://artio.beratrail.io"}},testnet:!0},_d={id:56,network:"bsc",name:"Binance Smart Chain",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrls:{privy:{http:["https://bsc-mainnet.rpc.privy.systems"]},default:{http:["https://56.rpc.thirdweb.com"]},public:{http:["https://56.rpc.thirdweb.com"]}},blockExplorers:{etherscan:{name:"BscScan",url:"https://bscscan.com"},default:{name:"BscScan",url:"https://bscscan.com"}}},wa={id:42220,name:"Celo Mainnet",network:"celo",nativeCurrency:{decimals:18,name:"CELO",symbol:"CELO"},rpcUrls:{default:{http:["https://forno.celo.org"]},infura:{http:["https://celo-mainnet.infura.io/v3"]},public:{http:["https://forno.celo.org"]}},blockExplorers:{default:{name:"Celo Explorer",url:"https://explorer.celo.org/mainnet"},etherscan:{name:"CeloScan",url:"https://celoscan.io"}},testnet:!1},xd={id:44787,name:"Celo Alfajores Testnet",network:"celo-alfajores",nativeCurrency:{decimals:18,name:"CELO",symbol:"CELO"},rpcUrls:{default:{http:["https://alfajores-forno.celo-testnet.org"]},infura:{http:["https://celo-alfajores.infura.io/v3"]},public:{http:["https://alfajores-forno.celo-testnet.org"]}},blockExplorers:{default:{name:"Celo Explorer",url:"https://explorer.celo.org/alfajores"},etherscan:{name:"CeloScan",url:"https://alfajores.celoscan.io/"}},testnet:!0},Id={id:314,name:"Filecoin - Mainnet",network:"filecoin-mainnet",nativeCurrency:{decimals:18,name:"filecoin",symbol:"FIL"},rpcUrls:{default:{http:["https://api.node.glif.io/rpc/v1"]},public:{http:["https://api.node.glif.io/rpc/v1"]}},blockExplorers:{default:{name:"Filfox",url:"https://filfox.info/en"},filscan:{name:"Filscan",url:"https://filscan.io"},filscout:{name:"Filscout",url:"https://filscout.io/en"},glif:{name:"Glif",url:"https://explorer.glif.io"}}},Ed={id:314159,name:"Filecoin - Calibration testnet",network:"filecoin-calibration",nativeCurrency:{decimals:18,name:"testnet filecoin",symbol:"tFIL"},rpcUrls:{default:{http:["https://api.calibration.node.glif.io/rpc/v1"]},public:{http:["https://api.calibration.node.glif.io/rpc/v1"]}},blockExplorers:{default:{name:"Filscan",url:"https://calibration.filscan.io"}}},Ad={id:17069,name:"Garnet Holesky",network:"garnet-holesky",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://rpc.garnetchain.com"]},public:{http:["https://rpc.garnetchain.com"]}},blockExplorers:{default:{name:"Blockscout",url:"https://explorer.garnetchain.com"}}},Pd={id:17e3,name:"Holesky",network:"holesky",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://ethereum-holesky.publicnode.com"]},public:{http:["https://ethereum-holesky.publicnode.com"]}},blockExplorers:{etherscan:{name:"EtherScan",url:"https://holesky.etherscan.io"},default:{name:"EtherScan",url:"https://holesky.etherscan.io"}}},kd={id:59144,network:"linea-mainnet",name:"Linea Mainnet",nativeCurrency:{name:"Linea Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://rpc.linea.build"],webSocket:["wss://rpc.linea.build"]},public:{http:["https://rpc.linea.build"],webSocket:["wss://rpc.linea.build"]}},blockExplorers:{default:{name:"Etherscan",url:"https://lineascan.build"},etherscan:{name:"Etherscan",url:"https://lineascan.build"}},testnet:!1},$d={id:59140,network:"linea-testnet",name:"Linea Goerli Testnet",nativeCurrency:{name:"Linea Ether",symbol:"ETH",decimals:18},rpcUrls:{infura:{http:["https://linea-goerli.infura.io/v3"],webSocket:["wss://linea-goerli.infura.io/ws/v3"]},default:{http:["https://rpc.goerli.linea.build"],webSocket:["wss://rpc.goerli.linea.build"]},public:{http:["https://rpc.goerli.linea.build"],webSocket:["wss://rpc.goerli.linea.build"]}},blockExplorers:{default:{name:"Etherscan",url:"https://goerli.lineascan.build"},etherscan:{name:"Etherscan",url:"https://goerli.lineascan.build"}},testnet:!0},Td={id:42,network:"lukso",name:"LUKSO",nativeCurrency:{name:"LUKSO",symbol:"LYX",decimals:18},rpcUrls:{default:{http:["https://rpc.mainnet.lukso.network"],webSocket:["wss://ws-rpc.mainnet.lukso.network"]}},blockExplorers:{default:{name:"LUKSO Mainnet Explorer",url:"https://explorer.execution.mainnet.lukso.network"}}},oi={id:1,network:"homestead",name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://mainnet.rpc.privy.systems"]},alchemy:{http:["https://eth-mainnet.g.alchemy.com/v2"],webSocket:["wss://eth-mainnet.g.alchemy.com/v2"]},infura:{http:["https://mainnet.infura.io/v3"],webSocket:["wss://mainnet.infura.io/ws/v3"]},default:{http:["https://cloudflare-eth.com"]},public:{http:["https://cloudflare-eth.com"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://etherscan.io"},default:{name:"Etherscan",url:"https://etherscan.io"}}},va={id:10,name:"OP Mainnet",network:"optimism",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://optimism-mainnet.rpc.privy.systems"]},alchemy:{http:["https://opt-mainnet.g.alchemy.com/v2"],webSocket:["wss://opt-mainnet.g.alchemy.com/v2"]},infura:{http:["https://optimism-mainnet.infura.io/v3"],webSocket:["wss://optimism-mainnet.infura.io/ws/v3"]},default:{http:["https://mainnet.optimism.io"]},public:{http:["https://mainnet.optimism.io"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://optimistic.etherscan.io"},default:{name:"Optimism Explorer",url:"https://explorer.optimism.io"}}},Sd={id:11155420,name:"Optimism Sepolia",network:"optimism-sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://optimism-sepolia.rpc.privy.systems"]},default:{http:["https://sepolia.optimism.io"]},public:{http:["https://sepolia.optimism.io"]},infura:{http:["https://optimism-sepolia.infura.io/v3"]}},blockExplorers:{default:{name:"Blockscout",url:"https://optimism-sepolia.blockscout.com"}},testnet:!0},ai={id:137,name:"Polygon Mainnet",network:"polygon",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{privy:{http:["https://polygon-mainnet.rpc.privy.systems"]},alchemy:{http:["https://polygon-mainnet.g.alchemy.com/v2"],webSocket:["wss://polygon-mainnet.g.alchemy.com/v2"]},infura:{http:["https://polygon-mainnet.infura.io/v3"],webSocket:["wss://polygon-mainnet.infura.io/ws/v3"]},default:{http:["https://polygon-rpc.com"]},public:{http:["https://polygon-rpc.com"]}},blockExplorers:{etherscan:{name:"PolygonScan",url:"https://polygonscan.com"},default:{name:"PolygonScan",url:"https://polygonscan.com"}}},Od={id:80002,name:"Polygon Amoy",network:"polygon-amoy",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{privy:{http:["https://polygon-amoy.rpc.privy.systems"]},infura:{http:["https://polygon-amoy.infura.io/v3"],webSocket:["wss://polygon-amoy.infura.io/ws/v3"]},default:{http:["https://rpc-amoy.polygon.technology"]}},blockExplorers:{default:{name:"OK LINK",url:"https://www.oklink.com/amoy"}},testnet:!0},Bd={id:690,name:"Redstone",network:"redstone",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://rpc.redstonechain.com"]},public:{http:["https://rpc.redstonechain.com"]}},blockExplorers:{default:{name:"Blockscout",url:"https://explorer.redstone.xyz/"}}},Cd={id:11155111,network:"sepolia",name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"SEP",decimals:18},rpcUrls:{privy:{http:["https://sepolia.rpc.privy.systems"]},alchemy:{http:["https://eth-sepolia.g.alchemy.com/v2"],webSocket:["wss://eth-sepolia.g.alchemy.com/v2"]},infura:{http:["https://sepolia.infura.io/v3"],webSocket:["wss://sepolia.infura.io/ws/v3"]},default:{http:["https://rpc.sepolia.org"]},public:{http:["https://rpc.sepolia.org"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://sepolia.etherscan.io"},default:{name:"Etherscan",url:"https://sepolia.etherscan.io"}},testnet:!0},Rd={id:7777777,name:"Zora",network:"zora",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://rpc.zora.energy"],webSocket:["wss://rpc.zora.energy"]},public:{http:["https://rpc.zora.energy"],webSocket:["wss://rpc.zora.energy"]}},blockExplorers:{default:{name:"Explorer",url:"https://explorer.zora.energy"}}},Nd={id:999999999,name:"Zora Sepolia",network:"zora-sepolia",nativeCurrency:{decimals:18,name:"Zora Sepolia",symbol:"ETH"},rpcUrls:{default:{http:["https://sepolia.rpc.zora.energy"],webSocket:["wss://sepolia.rpc.zora.energy"]},public:{http:["https://sepolia.rpc.zora.energy"],webSocket:["wss://sepolia.rpc.zora.energy"]}},blockExplorers:{default:{name:"Zora Sepolia Explorer",url:"https://sepolia.explorer.zora.energy/"}},testnet:!0},Md={id:999,name:"Zora Goerli Testnet",network:"zora-testnet",nativeCurrency:{decimals:18,name:"Zora Goerli",symbol:"ETH"},rpcUrls:{default:{http:["https://testnet.rpc.zora.energy"],webSocket:["wss://testnet.rpc.zora.energy"]},public:{http:["https://testnet.rpc.zora.energy"],webSocket:["wss://testnet.rpc.zora.energy"]}},blockExplorers:{default:{name:"Explorer",url:"https://testnet.explorer.zora.energy"}},testnet:!0},ci=[oi,Cd,Pd,ri,bd,va,Sd,ai,Od,wa,xd,Id,Ed,ii,wd,vd,_d,Td,kd,$d,si,gd,Rd,Md,Nd,Bd,Ad];new Set(ci.map(t=>t.id));const Ud=t=>t.map(e=>{var s;if(e.rpcUrls.privyWalletOverride)return e;let n=ci.find(i=>i.id===e.id),r=(s=n==null?void 0:n.rpcUrls.privy)==null?void 0:s.http[0];return r?md(e,r):e});let zr=class extends Error{constructor({error:e,code:n}){super(e),this.error=e,this.code=n}},G=class extends Error{constructor({error:e,code:n}){super(e),this.code=n,this.error=e}},Fd=class extends Error{constructor({error:e,code:n,response:r}){super(e),this.code=n,this.error=e,this.response=r}};const Je=t=>!!t.id&&t.recovery_method==="privy-v2";let Ld=class{async sign({message:e}){return await this.request({method:"sign",params:{message:new TextDecoder("utf8").decode(e)}})}async signTransaction({psbt:e}){return await this.request({method:"signTransaction",params:{psbt:e}})}async request(e){if(Je(this._account))throw new G({code:"unsupported_wallet_type",error:"Bitcoin wallet providers are only supported for on-device execution and this app uses TEE execution. Use the useSignRawHash hook from @privy-io/expo/extended-chains to sign over a hash with this wallet. Learn more at https://docs.privy.io/recipes/tee-wallet-migration-guide"});if(!await this._privyInternal.getAccessTokenInternal())throw new G({error:"Missing access token",code:"attempted_rpc_call_before_logged_in"});return this.handleIFrameRpc(e)}async handleIFrameRpc(e){try{let n=await this._privyInternal.getAccessTokenInternal();if(!n)throw Error("Missing access token. User must be authenticated.");return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),(await this._proxy.rpcWallet({accessToken:n,request:e,entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,hdWalletIndex:this._account.wallet_index,chainType:this._account.chain_type})).response.data}catch(n){console.error(n);let r=n instanceof Error?n.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:r}),new G({code:"embedded_wallet_request_error",error:r})}}toJSON(){return`PrivyEmbeddedBitcoinProvider { address: '${this._account.address}', request: [Function] }`}constructor({proxy:e,privyInternal:n,account:r,entropyId:s,entropyIdVerifier:i}){this._proxy=e,this._privyInternal=n,this._account=r,this._entropyId=s,this._entropyIdVerifier=i}};const zd=["error","invalid_request_arguments","wallet_not_on_device","invalid_recovery_pin","insufficient_funds","mfa_timeout","missing_or_invalid_mfa","mfa_verification_max_attempts_reached"];var re;(re={}).MISSING_OR_INVALID_PRIVY_APP_ID="missing_or_invalid_privy_app_id",re.MISSING_OR_INVALID_PRIVY_ACCOUNT_ID="missing_or_invalid_privy_account_id",re.INVALID_DATA="invalid_data",re.LINKED_TO_ANOTHER_USER="linked_to_another_user",re.ALLOWLIST_REJECTED="allowlist_rejected",re.OAUTH_USER_DENIED="oauth_user_denied",re.UNKNOWN_AUTH_ERROR="unknown_auth_error",re.USER_EXITED_AUTH_FLOW="exited_auth_flow",re.MUST_BE_AUTHENTICATED="must_be_authenticated",re.UNKNOWN_CONNECT_WALLET_ERROR="unknown_connect_wallet_error",re.GENERIC_CONNECT_WALLET_ERROR="generic_connect_wallet_error",re.CLIENT_REQUEST_TIMEOUT="client_request_timeout",re.INVALID_CREDENTIALS="invalid_credentials";let Dd=class extends Error{toString(){return`${this.type}${this.privyErrorCode?`-${this.privyErrorCode}`:""}: ${this.message}${this.cause?` [cause: ${this.cause}]`:""}`}constructor(e,n,r){super(e),n instanceof Error&&(this.cause=n),this.privyErrorCode=r}},nr=class extends Error{constructor(e,n){super(n),this.type=e}},_a=class extends Dd{constructor(e,n,r){super(e,n,r),this.type="connector_error"}},Qi=class extends Error{constructor(e,n,r){super(e),this.code=n,this.data=r}};function jd(t){let e=t.type;return typeof e=="string"&&zd.includes(e)}function ui(t){return jd(t)&&t.type==="wallet_not_on_device"}async function Gd(t,{request:e}){return await t.fetchPrivyRoute(nd,{body:e})}async function Dr({context:t,chainType:e}){return{wallet:await Gd(t,{request:{chain_type:e,owner_id:void 0}})}}const qd="1.2.3";let ae=class ws extends Error{constructor(e,n={}){var o;const r=n.cause instanceof ws?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof ws&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${qd}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function qe(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const xa=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Ia=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Ea=/^\(.+?\).*?$/,eo=/^tuple(?<array>(\[(\d*)\])*)$/;function vs(t){let e=t.type;if(eo.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=vs(i),s<n-1&&(e+=", ")}const r=qe(eo,t.type);return e+=`)${(r==null?void 0:r.array)||""}`,vs({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Ot(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=vs(s),r!==n-1&&(e+=", ")}return e}function sr(t){var e;return t.type==="function"?`function ${t.name}(${Ot(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Ot(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Ot(t.inputs)})`:t.type==="error"?`error ${t.name}(${Ot(t.inputs)})`:t.type==="constructor"?`constructor(${Ot(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const Aa=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Vd(t){return Aa.test(t)}function Hd(t){return qe(Aa,t)}const Pa=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Wd(t){return Pa.test(t)}function Kd(t){return qe(Pa,t)}const ka=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Zd(t){return ka.test(t)}function Yd(t){return qe(ka,t)}const $a=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function mr(t){return $a.test(t)}function Jd(t){return qe($a,t)}const Ta=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Xd(t){return Ta.test(t)}function Qd(t){return qe(Ta,t)}const Sa=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function ef(t){return Sa.test(t)}function tf(t){return qe(Sa,t)}const nf=/^receive\(\) external payable$/;function rf(t){return nf.test(t)}const to=new Set(["memory","indexed","storage","calldata"]),sf=new Set(["indexed"]),_s=new Set(["calldata","memory","storage"]);class of extends ae{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class af extends ae{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class cf extends ae{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class uf extends ae{constructor({params:e}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class lf extends ae{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class df extends ae{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class ff extends ae{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class hf extends ae{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class pf extends ae{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Ht extends ae{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class yf extends ae{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class mf extends ae{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class bf extends ae{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class gf extends ae{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function wf(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:`${t}${r}`}const jr=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function xs(t,e={}){if(Zd(t))return vf(t,e);if(Wd(t))return _f(t,e);if(Vd(t))return xf(t,e);if(Xd(t))return If(t,e);if(ef(t))return Ef(t);if(rf(t))return{type:"receive",stateMutability:"payable"};throw new yf({signature:t})}function vf(t,e={}){const n=Yd(t);if(!n)throw new Ht({signature:t,type:"function"});const r=le(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(De(r[a],{modifiers:_s,structs:e,type:"function"}));const o=[];if(n.returns){const a=le(n.returns),c=a.length;for(let u=0;u<c;u++)o.push(De(a[u],{modifiers:_s,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function _f(t,e={}){const n=Kd(t);if(!n)throw new Ht({signature:t,type:"event"});const r=le(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(De(r[o],{modifiers:sf,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function xf(t,e={}){const n=Hd(t);if(!n)throw new Ht({signature:t,type:"error"});const r=le(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(De(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function If(t,e={}){const n=Qd(t);if(!n)throw new Ht({signature:t,type:"constructor"});const r=le(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(De(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function Ef(t){const e=tf(t);if(!e)throw new Ht({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const Af=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Pf=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,kf=/^u?int$/;function De(t,e){var d,f;const n=wf(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(jr.has(n))return jr.get(n);const r=Ea.test(t),s=qe(r?Pf:Af,t);if(!s)throw new lf({param:t});if(s.name&&Tf(s.name))throw new df({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,u={};if(r){c="tuple";const h=le(s.type),p=[],y=h.length;for(let b=0;b<y;b++)p.push(De(h[b],{structs:a}));u={components:p}}else if(s.type in a)c="tuple",u={components:a[s.type]};else if(kf.test(s.type))c=`${s.type}256`;else if(s.type==="address payable")c="address";else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!Oa(c))throw new cf({type:c});if(s.modifier){if(!((f=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&f.call(d,s.modifier)))throw new ff({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(_s.has(s.modifier)&&!Sf(c,!!s.array))throw new hf({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const l={type:`${c}${s.array??""}`,...i,...o,...u};return jr.set(n,l),l}function le(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?le(a,[...e,n.trim()]):le(a,e,`${n}${o}`,r);case"(":return le(a,e,`${n}${o}`,r+1);case")":return le(a,e,`${n}${o}`,r-1);default:return le(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new gf({current:n,depth:r});return e.push(n.trim()),e}function Oa(t){return t==="address"||t==="bool"||t==="function"||t==="string"||xa.test(t)||Ia.test(t)}const $f=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function Tf(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||xa.test(t)||Ia.test(t)||$f.test(t)}function Sf(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function li(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!mr(a))continue;const c=Jd(a);if(!c)throw new Ht({signature:a,type:"struct"});const u=c.properties.split(";"),l=[],d=u.length;for(let f=0;f<d;f++){const p=u[f].trim();if(!p)continue;const y=De(p,{type:"struct"});l.push(y)}if(!l.length)throw new mf({signature:a});e[c.name]=l}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=Ba(c,e)}return r}const Of=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function Ba(t=[],e={},n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(Ea.test(o.type))r.push(o);else{const c=qe(Of,o.type);if(!(c!=null&&c.type))throw new pf({abiParameter:o});const{array:u,type:l}=c;if(l in e){if(n.has(l))throw new bf({type:l});r.push({...o,type:`tuple${u??""}`,components:Ba(e[l],e,new Set([...n,l]))})}else if(Oa(l))r.push(o);else throw new af({type:l})}}return r}function Ca(t){const e=li(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];mr(i)||n.push(xs(i,e))}return n}function no(t){let e;if(typeof t=="string")e=xs(t);else{const n=li(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!mr(i)){e=xs(i,n);break}}}if(!e)throw new of({signature:t});return e}function ro(t){const e=[];if(typeof t=="string"){const n=le(t),r=n.length;for(let s=0;s<r;s++)e.push(De(n[s],{modifiers:to}))}else{const n=li(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(mr(i))continue;const o=le(i),a=o.length;for(let c=0;c<a;c++)e.push(De(o[c],{modifiers:to,structs:n}))}}if(e.length===0)throw new uf({params:t});return e}function F(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}function ge(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new Vf(t.type);return`${t.name}(${br(t.inputs,{includeName:e})})`}function br(t,{includeName:e=!1}={}){return t?t.map(n=>Bf(n,{includeName:e})).join(e?", ":","):""}function Bf(t,{includeName:e}){return t.type.startsWith("tuple")?`(${br(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function we(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function V(t){return we(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const Ra="2.43.3";let tn={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${Ra}`},A=class Is extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Is?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Is&&n.cause.docsPath||n.docsPath,i=(a=tn.getDocsUrl)==null?void 0:a.call(tn,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...tn.version?[`Version: ${tn.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=Ra}walk(e){return Na(this,e)}};function Na(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?Na(t.cause,e):e?null:t}class Cf extends A{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class so extends A{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class Ma extends A{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${br(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class Cn extends A{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class Rf extends A{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class Nf extends A{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${V(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class Mf extends A{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Uf extends A{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class io extends A{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class Ua extends A{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class Ff extends A{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class Lf extends A{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class oo extends A{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class zt extends A{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class Fa extends A{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class zf extends A{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class Df extends A{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${ge(e.abiItem)}\`, and`,`\`${n.type}\` in \`${ge(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let jf=class extends A{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class ir extends A{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${br(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class di extends A{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${ge(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class Gf extends A{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class qf extends A{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let La=class extends A{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class Vf extends A{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class Hf extends A{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}let za=class extends A{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},Da=class extends A{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class ao extends A{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Wt(t,{dir:e,size:n=32}={}){return typeof t=="string"?et(t,{dir:e,size:n}):Wf(t,{dir:e,size:n})}function et(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new Da({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Wf(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new Da({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let ja=class extends A{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}},Kf=class extends A{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}};class Zf extends A{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let Yf=class extends A{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function dt(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function Ee(t,{size:e}){if(V(t)>e)throw new Yf({givenSize:V(t),maxSize:e})}function Te(t,e={}){const{signed:n}=e;e.size&&Ee(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Jf(t,e={}){let n=t;if(e.size&&(Ee(n,{size:e.size}),n=dt(n)),dt(n)==="0x00")return!1;if(dt(n)==="0x01")return!0;throw new Zf(n)}function je(t,e={}){return Number(Te(t,e))}const Xf=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Se(t,e={}){return typeof t=="number"||typeof t=="bigint"?L(t,e):typeof t=="string"?on(t,e):typeof t=="boolean"?Ga(t,e):W(t,e)}function Ga(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Ee(n,{size:e.size}),Wt(n,{size:e.size})):n}function W(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Xf[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Ee(r,{size:e.size}),Wt(r,{dir:"right",size:e.size})):r}function L(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new ja({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Wt(a,{size:r}):a}const Qf=new TextEncoder;function on(t,e={}){const n=Qf.encode(t);return W(n,e)}const e0=new TextEncoder;function Kt(t,e={}){return typeof t=="number"||typeof t=="bigint"?n0(t,e):typeof t=="boolean"?t0(t,e):we(t)?Oe(t,e):ft(t,e)}function t0(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Ee(n,{size:e.size}),Wt(n,{size:e.size})):n}const Ce={zero:48,nine:57,A:65,F:70,a:97,f:102};function co(t){if(t>=Ce.zero&&t<=Ce.nine)return t-Ce.zero;if(t>=Ce.A&&t<=Ce.F)return t-(Ce.A-10);if(t>=Ce.a&&t<=Ce.f)return t-(Ce.a-10)}function Oe(t,e={}){let n=t;e.size&&(Ee(n,{size:e.size}),n=Wt(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=co(r.charCodeAt(a++)),u=co(r.charCodeAt(a++));if(c===void 0||u===void 0)throw new A(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+u}return i}function n0(t,e){const n=L(t,e);return Oe(n)}function ft(t,e={}){const n=e0.encode(t);return typeof e.size=="number"?(Ee(n,{size:e.size}),Wt(n,{dir:"right",size:e.size})):n}const Vn=BigInt(2**32-1),uo=BigInt(32);function r0(t,e=!1){return e?{h:Number(t&Vn),l:Number(t>>uo&Vn)}:{h:Number(t>>uo&Vn)|0,l:Number(t&Vn)|0}}function s0(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=r0(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const i0=(t,e,n)=>t<<n|e>>>32-n,o0=(t,e,n)=>e<<n|t>>>32-n,a0=(t,e,n)=>e<<n-32|t>>>64-n,c0=(t,e,n)=>t<<n-32|e>>>64-n,Et=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function u0(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function an(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function pt(t,...e){if(!u0(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function l0(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");an(t.outputLen),an(t.blockLen)}function Dt(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function qa(t,e){pt(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function d0(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function jt(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Gr(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Pe(t,e){return t<<32-e|t>>>e}const f0=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function h0(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function p0(t){for(let e=0;e<t.length;e++)t[e]=h0(t[e]);return t}const lo=f0?t=>t:p0;function y0(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function gr(t){return typeof t=="string"&&(t=y0(t)),pt(t),t}function m0(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];pt(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class fi{}function Va(t){const e=r=>t().update(gr(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function b0(t=32){if(Et&&typeof Et.getRandomValues=="function")return Et.getRandomValues(new Uint8Array(t));if(Et&&typeof Et.randomBytes=="function")return Uint8Array.from(Et.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const g0=BigInt(0),nn=BigInt(1),w0=BigInt(2),v0=BigInt(7),_0=BigInt(256),x0=BigInt(113),Ha=[],Wa=[],Ka=[];for(let t=0,e=nn,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Ha.push(2*(5*r+n)),Wa.push((t+1)*(t+2)/2%64);let s=g0;for(let i=0;i<7;i++)e=(e<<nn^(e>>v0)*x0)%_0,e&w0&&(s^=nn<<(nn<<BigInt(i))-nn);Ka.push(s)}const Za=s0(Ka,!0),I0=Za[0],E0=Za[1],fo=(t,e,n)=>n>32?a0(t,e,n):i0(t,e,n),ho=(t,e,n)=>n>32?c0(t,e,n):o0(t,e,n);function A0(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],l=n[c+1],d=fo(u,l,1)^n[a],f=ho(u,l,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Wa[o],c=fo(s,i,a),u=ho(s,i,a),l=Ha[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=I0[r],t[1]^=E0[r]}jt(n)}class hi extends fi{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,an(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=d0(this.state)}clone(){return this._cloneInto()}keccak(){lo(this.state32),A0(this.state32,this.rounds),lo(this.state32),this.posOut=0,this.pos=0}update(e){Dt(this),e=gr(e),pt(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Dt(this,!1),pt(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return an(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(qa(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,jt(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new hi(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const P0=(t,e,n)=>Va(()=>new hi(e,t,n)),Ya=P0(1,136,256/8);function Y(t,e){const n=e||"hex",r=Ya(we(t,{strict:!1})?Kt(t):t);return n==="bytes"?r:Se(r)}const k0=t=>Y(Kt(t));function $0(t){return k0(t)}function T0(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new A("Unable to normalize signature.");return s}const S0=t=>{const e=typeof t=="string"?t:sr(t);return T0(e)};function Ja(t){return $0(S0(t))}const wr=Ja;let tt=class extends A{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},vr=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const qr=new vr(8192);function _r(t,e){if(qr.has(`${t}.${e}`))return qr.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=Y(ft(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return qr.set(`${t}.${e}`,i),i}function Xa(t,e){if(!me(t,{strict:!1}))throw new tt({address:t});return _r(t,e)}const O0=/^0x[a-fA-F0-9]{40}$/,Vr=new vr(8192);function me(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(Vr.has(r))return Vr.get(r);const s=O0.test(t)?t.toLowerCase()===t?!0:n?_r(t)===t:!0:!1;return Vr.set(r,s),s}function Be(t){return typeof t[0]=="string"?Zt(t):B0(t)}function B0(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Zt(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function Gt(t,e,n,{strict:r}={}){return we(t,{strict:!1})?C0(t,e,n,{strict:r}):tc(t,e,n,{strict:r})}function Qa(t,e){if(typeof e=="number"&&e>0&&e>V(t)-1)throw new za({offset:e,position:"start",size:V(t)})}function ec(t,e,n){if(typeof e=="number"&&typeof n=="number"&&V(t)!==n-e)throw new za({offset:n,position:"end",size:V(t)})}function tc(t,e,n,{strict:r}={}){Qa(t,e);const s=t.slice(e,n);return r&&ec(s,e,n),s}function C0(t,e,n,{strict:r}={}){Qa(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&ec(s,e,n),s}const R0=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,nc=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function wt(t,e){if(t.length!==e.length)throw new Mf({expectedLength:t.length,givenLength:e.length});const n=N0({params:t,values:e}),r=yi(n);return r.length===0?"0x":r}function N0({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(pi({param:t[r],value:e[r]}));return n}function pi({param:t,value:e}){const n=mi(t.type);if(n){const[r,s]=n;return U0(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return j0(e,{param:t});if(t.type==="address")return M0(e);if(t.type==="bool")return L0(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=nc.exec(t.type)??[];return z0(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return F0(e,{param:t});if(t.type==="string")return D0(e);throw new Gf(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function yi(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=V(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(L(e+s,{size:32})),r.push(a),s+=V(a)):n.push(a)}return Be([...n,...r])}function M0(t){if(!me(t))throw new tt({address:t});return{dynamic:!1,encoded:et(t.toLowerCase())}}function U0(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new La(t);if(!r&&t.length!==e)throw new Rf({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=pi({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=yi(i);if(r){const a=L(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Be([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Be(i.map(({encoded:o})=>o))}}function F0(t,{param:e}){const[,n]=e.type.split("bytes"),r=V(t);if(!n){let s=t;return r%32!==0&&(s=et(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Be([et(L(r,{size:32})),s])}}if(r!==Number.parseInt(n,10))throw new Nf({expectedSize:Number.parseInt(n,10),value:t});return{dynamic:!1,encoded:et(t,{dir:"right"})}}function L0(t){if(typeof t!="boolean")throw new A(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:et(Ga(t))}}function z0(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new ja({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:L(t,{size:32,signed:e})}}function D0(t){const e=on(t),n=Math.ceil(V(e)/32),r=[];for(let s=0;s<n;s++)r.push(et(Gt(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Be([et(L(V(e),{size:32})),...r])}}function j0(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=pi({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?yi(r):Be(r.map(({encoded:s})=>s))}}function mi(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const Rn=t=>Gt(Ja(t),0,4);function vt(t){const{abi:e,args:n=[],name:r}=t,s=we(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?Rn(a)===r:a.type==="event"?wr(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((u,l)=>{const d="inputs"in a&&a.inputs[l];return d?Es(u,d):!1})){if(o&&"inputs"in o&&o.inputs){const u=rc(a.inputs,o.inputs,n);if(u)throw new Df({abiItem:a,type:u[0]},{abiItem:o,type:u[1]})}o=a}}return o||i[0]}function Es(t,e){const n=typeof t,r=e.type;switch(r){case"address":return me(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>Es(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>Es(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function rc(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return rc(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?me(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?me(n[r],{strict:!1}):!1)return o}}const po="/docs/contract/encodeEventTopics";function Nn(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const u=vt({abi:e,name:n});if(!u)throw new oo(n,{docsPath:po});s=u}if(s.type!=="event")throw new oo(void 0,{docsPath:po});const i=ge(s),o=wr(i);let a=[];if(r&&"inputs"in s){const u=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),l=Array.isArray(r)?r:Object.values(r).length>0?(u==null?void 0:u.map(d=>r[d.name]))??[]:[];l.length>0&&(a=(u==null?void 0:u.map((d,f)=>Array.isArray(l[f])?l[f].map((h,p)=>yo({param:d,value:l[f][p]})):typeof l[f]<"u"&&l[f]!==null?yo({param:d,value:l[f]}):null))??[])}return[o,...a]}function yo({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return Y(Kt(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new Hf(t.type);return wt([t],[e])}function xr(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function sc(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,u=xr(t,{method:"eth_newFilter"}),l=i?Nn({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?L(o):o,toBlock:typeof c=="bigint"?L(c):c,topics:l}]});return{abi:r,args:s,eventName:i,id:d,request:u(d),strict:!!a,type:"event"}}function de(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const mo="/docs/contract/encodeFunctionData";function G0(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=vt({abi:e,args:n,name:r});if(!i)throw new zt(r,{docsPath:mo});s=i}if(s.type!=="function")throw new zt(void 0,{docsPath:mo});return{abi:[s],functionName:Rn(ge(s))}}function Ae(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:G0(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?wt(s.inputs,e??[]):void 0;return Zt([i,o??"0x"])}const q0={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},ic={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},V0={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};let bo=class extends A{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}},oc=class extends A{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}},H0=class extends A{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}};const W0={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new H0({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new oc({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new bo({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new bo({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function bi(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(W0);return n.bytes=t,n.dataView=new DataView(t.buffer??t,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function K0(t,e={}){typeof e.size<"u"&&Ee(t,{size:e.size});const n=W(t,e);return Te(n,e)}function Z0(t,e={}){let n=t;if(typeof e.size<"u"&&(Ee(n,{size:e.size}),n=dt(n)),n.length>1||n[0]>1)throw new Kf(n);return!!n[0]}function Le(t,e={}){typeof e.size<"u"&&Ee(t,{size:e.size});const n=W(t,e);return je(n,e)}function Y0(t,e={}){let n=t;return typeof e.size<"u"&&(Ee(n,{size:e.size}),n=dt(n,{dir:"right"})),new TextDecoder().decode(n)}function Mn(t,e){const n=typeof e=="string"?Oe(e):e,r=bi(n);if(V(n)===0&&t.length>0)throw new Cn;if(V(e)&&V(e)<32)throw new Ma({data:typeof e=="string"?e:W(e),params:t,size:V(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,u]=Mt(r,a,{staticPosition:0});s+=u,i.push(c)}return i}function Mt(t,e,{staticPosition:n}){const r=mi(e.type);if(r){const[s,i]=r;return X0(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return nh(t,e,{staticPosition:n});if(e.type==="address")return J0(t);if(e.type==="bool")return Q0(t);if(e.type.startsWith("bytes"))return eh(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return th(t,e);if(e.type==="string")return rh(t,{staticPosition:n});throw new qf(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const go=32,As=32;function J0(t){const e=t.readBytes(32);return[_r(W(tc(e,-20))),32]}function X0(t,e,{length:n,staticPosition:r}){if(!n){const o=Le(t.readBytes(As)),a=r+o,c=a+go;t.setPosition(a);const u=Le(t.readBytes(go)),l=cn(e);let d=0;const f=[];for(let h=0;h<u;++h){t.setPosition(c+(l?h*32:d));const[p,y]=Mt(t,e,{staticPosition:c});d+=y,f.push(p)}return t.setPosition(r+32),[f,32]}if(cn(e)){const o=Le(t.readBytes(As)),a=r+o,c=[];for(let u=0;u<n;++u){t.setPosition(a+u*32);const[l]=Mt(t,e,{staticPosition:a});c.push(l)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=Mt(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function Q0(t){return[Z0(t.readBytes(32),{size:32}),32]}function eh(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Le(t.readBytes(32));t.setPosition(n+o);const a=Le(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[W(c),32]}return[W(t.readBytes(Number.parseInt(s,10),32)),32]}function th(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256",10),s=t.readBytes(32);return[r>48?K0(s,{signed:n}):Le(s,{signed:n}),32]}function nh(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(cn(e)){const o=Le(t.readBytes(As)),a=n+o;for(let c=0;c<e.components.length;++c){const u=e.components[c];t.setPosition(a+i);const[l,d]=Mt(t,u,{staticPosition:a});i+=d,s[r?c:u==null?void 0:u.name]=l}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,u]=Mt(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=u}return[s,i]}function rh(t,{staticPosition:e}){const n=Le(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Le(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=Y0(dt(i));return t.setPosition(e+32),[o,32]}function cn(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(cn);const n=mi(t.type);return!!(n&&cn({...t,type:n[1]}))}function sh(t){const{abi:e,data:n}=t,r=Gt(n,0,4);if(r==="0x")throw new Cn;const i=[...e||[],ic,V0].find(o=>o.type==="error"&&r===Rn(ge(o)));if(!i)throw new Ua(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?Mn(i.inputs,Gt(n,4)):void 0,errorName:i.name}}const J=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n);function ac({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?J(e[i]):e[i]}`).join(", ")})`}const ih={gwei:9,wei:18},oh={ether:-9,wei:9};function cc(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function gi(t,e="wei"){return cc(t,ih[e])}function oe(t,e="wei"){return cc(t,oh[e])}class ah extends A{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class ch extends A{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function wo(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function uh(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=wo(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=wo(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function Un(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class lh extends A{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Un(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class dh extends A{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:f}){var p;const h=Un({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof f<"u"&&`${gi(f)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${oe(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${oe(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${oe(u)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",h].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class uc extends A{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class lc extends A{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class fh extends A{constructor({receipt:e}){super(`Transaction with hash "${e.transactionHash}" reverted.`,{metaMessages:['The receipt marked the transaction as "reverted". This could mean that the function on the contract you are trying to call threw an error.'," ","You can attempt to extract the revert reason by:","- calling the `simulateContract` or `simulateCalls` Action with the `abi` and `functionName` of the contract","- using the `call` Action with raw `data`"],name:"TransactionReceiptRevertedError"}),Object.defineProperty(this,"receipt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.receipt=e}}class hh extends A{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const ph=t=>t,wi=t=>t;class dc extends A{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:f,stateOverride:h}){var b;const p=n?de(n):void 0;let y=Un({from:p==null?void 0:p.address,to:d,value:typeof f<"u"&&`${gi(f)} ${((b=s==null?void 0:s.nativeCurrency)==null?void 0:b.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${oe(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${oe(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${oe(u)} gwei`,nonce:l});h&&(y+=`
${uh(h)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",y].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class fc extends A{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=vt({abi:n,args:r,name:o}),u=c?ac({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,l=c?ge(c,{includeName:!0}):void 0,d=Un({address:s&&ph(s),function:l,args:u&&u!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${u}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class Ps extends A{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=sh({abi:e,data:n});const{abiItem:l,errorName:d,args:f}=o;if(d==="Error")c=f[0];else if(d==="Panic"){const[h]=f;c=q0[h]}else{const h=l?ge(l,{includeName:!0}):void 0,p=l&&f?ac({abiItem:l,args:f,includeFunctionName:!1,includeName:!1}):void 0;a=[h?`Error: ${h}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(l){i=l}else s&&(c=s);let u;i instanceof Ua&&(u=i.signature,a=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(c&&c!=="execution reverted"||u?[`The contract function "${r}" reverted with the following ${u?"signature":"reason"}:`,c||u].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=u}}class yh extends A{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class mh extends A{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class Ir extends A{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class sn extends A{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${wi(o)}`,e&&`Request body: ${J(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class vi extends A{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${wi(r)}`,`Request body: ${J(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data,this.url=r}}class vo extends A{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${wi(n)}`,`Request body: ${J(e)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=n}}const bh=-1;class ce extends A{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof vi?e.code:n??bh}}class he extends ce{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class un extends ce{constructor(e){super(e,{code:un.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(un,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class ln extends ce{constructor(e){super(e,{code:ln.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(ln,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class dn extends ce{constructor(e,{method:n}={}){super(e,{code:dn.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(dn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class fn extends ce{constructor(e){super(e,{code:fn.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(fn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class yt extends ce{constructor(e){super(e,{code:yt.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(yt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class nt extends ce{constructor(e){super(e,{code:nt.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(nt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class hn extends ce{constructor(e){super(e,{code:hn.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(hn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class pn extends ce{constructor(e){super(e,{code:pn.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(pn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class yn extends ce{constructor(e){super(e,{code:yn.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(yn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class ut extends ce{constructor(e,{method:n}={}){super(e,{code:ut.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(ut,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class qt extends ce{constructor(e){super(e,{code:qt.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(qt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class mn extends ce{constructor(e){super(e,{code:mn.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(mn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Ut extends he{constructor(e){super(e,{code:Ut.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Ut,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class bn extends he{constructor(e){super(e,{code:bn.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(bn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class gn extends he{constructor(e,{method:n}={}){super(e,{code:gn.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(gn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class wn extends he{constructor(e){super(e,{code:wn.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(wn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class vn extends he{constructor(e){super(e,{code:vn.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(vn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class _n extends he{constructor(e){super(e,{code:_n.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(_n,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class xn extends he{constructor(e){super(e,{code:xn.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(xn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class In extends he{constructor(e){super(e,{code:In.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(In,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class En extends he{constructor(e){super(e,{code:En.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(En,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class An extends he{constructor(e){super(e,{code:An.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(An,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Pn extends he{constructor(e){super(e,{code:Pn.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Pn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class kn extends he{constructor(e){super(e,{code:kn.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(kn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class $n extends he{constructor(e){super(e,{code:$n.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty($n,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class gh extends ce{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const wh=3;function Vt(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof Ir?t:t instanceof A?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:u,details:l,message:d,shortMessage:f}=a,h=t instanceof Cn?new yh({functionName:i}):[wh,yt.code].includes(c)&&(u||l||d||f)||c===nt.code&&l==="execution reverted"&&u?new Ps({abi:e,data:typeof u=="object"?u.data:u,functionName:i,message:a instanceof vi?l:f??d}):t;return new fc(h,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}function vh(t){const e=Y(`0x${t.substring(4)}`).substring(26);return _r(`0x${e}`)}const _h="modulepreload",xh=function(t){return"/"+t},_o={},hc=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=xh(c),c in _o)return;_o[c]=!0;const u=c.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${l}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":_h,u||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function Ih({hash:t,signature:e}){const n=we(t)?t:Se(t),{secp256k1:r}=await hc(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>Rb);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:u,s:l,v:d,yParity:f}=e,h=Number(f??d),p=xo(h);return new r.Signature(Te(u),Te(l)).addRecoveryBit(p)}const o=we(e)?e:Se(e);if(V(o)!==65)throw new Error("invalid signature length");const a=je(`0x${o.slice(130)}`),c=xo(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function xo(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function pc({hash:t,signature:e}){return vh(await Ih({hash:t,signature:e}))}function Eh(t,e="hex"){const n=yc(t),r=bi(new Uint8Array(n.length));return n.encode(r),e==="hex"?W(r.bytes):r.bytes}function yc(t){return Array.isArray(t)?Ah(t.map(e=>yc(e))):Ph(t)}function Ah(t){const e=t.reduce((s,i)=>s+i.length,0),n=mc(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function Ph(t){const e=typeof t=="string"?Oe(t):t,n=mc(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function mc(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new A("Length is too large.")}function kh(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Y(Zt(["0x05",Eh([e?L(e):"0x",s,n?L(n):"0x"])]));return r==="bytes"?Oe(i):i}async function bc(t){const{authorization:e,signature:n}=t;return pc({hash:kh(e),signature:n??e})}class $h extends A{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:f}){var p;const h=Un({from:n==null?void 0:n.address,to:d,value:typeof f<"u"&&`${gi(f)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${oe(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${oe(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${oe(u)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",h].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Bt extends A{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Bt,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Bt,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted|gas required exceeds allowance/});class or extends A{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${oe(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(or,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class ks extends A{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${oe(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(ks,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class $s extends A{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty($s,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Ts extends A{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(Ts,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Ss extends A{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(Ss,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class Os extends A{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(Os,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class Bs extends A{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(Bs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class Cs extends A{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(Cs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class Rs extends A{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(Rs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class ar extends A{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${oe(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${oe(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(ar,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Fn extends A{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function Er(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof A?t.walk(s=>(s==null?void 0:s.code)===Bt.code):t;return r instanceof A?new Bt({cause:t,message:r.details}):Bt.nodeMessage.test(n)?new Bt({cause:t,message:t.details}):or.nodeMessage.test(n)?new or({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):ks.nodeMessage.test(n)?new ks({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):$s.nodeMessage.test(n)?new $s({cause:t,nonce:e==null?void 0:e.nonce}):Ts.nodeMessage.test(n)?new Ts({cause:t,nonce:e==null?void 0:e.nonce}):Ss.nodeMessage.test(n)?new Ss({cause:t,nonce:e==null?void 0:e.nonce}):Os.nodeMessage.test(n)?new Os({cause:t}):Bs.nodeMessage.test(n)?new Bs({cause:t,gas:e==null?void 0:e.gas}):Cs.nodeMessage.test(n)?new Cs({cause:t,gas:e==null?void 0:e.gas}):Rs.nodeMessage.test(n)?new Rs({cause:t}):ar.nodeMessage.test(n)?new ar({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new Fn({cause:t})}function Th(t,{docsPath:e,...n}){const r=(()=>{const s=Er(t,n);return s instanceof Fn?t:s})();return new $h(r,{docsPath:e,...n})}function Ar(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const Sh={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Ln(t,e){const n={};return typeof t.authorizationList<"u"&&(n.authorizationList=Oh(t.authorizationList)),typeof t.accessList<"u"&&(n.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(n.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?n.blobs=t.blobs.map(r=>W(r)):n.blobs=t.blobs),typeof t.data<"u"&&(n.data=t.data),t.account&&(n.from=t.account.address),typeof t.from<"u"&&(n.from=t.from),typeof t.gas<"u"&&(n.gas=L(t.gas)),typeof t.gasPrice<"u"&&(n.gasPrice=L(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(n.maxFeePerBlobGas=L(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(n.maxFeePerGas=L(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(n.maxPriorityFeePerGas=L(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(n.nonce=L(t.nonce)),typeof t.to<"u"&&(n.to=t.to),typeof t.type<"u"&&(n.type=Sh[t.type]),typeof t.value<"u"&&(n.value=L(t.value)),n}function Oh(t){return t.map(e=>({address:e.address,r:e.r?L(BigInt(e.r)):e.r,s:e.s?L(BigInt(e.s)):e.s,chainId:L(e.chainId),nonce:L(e.nonce),...typeof e.yParity<"u"?{yParity:L(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:L(e.v)}:{}}))}function Io(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new ao({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new ao({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function Bh(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=L(e)),n!==void 0&&(o.nonce=L(n)),r!==void 0&&(o.state=Io(r)),s!==void 0){if(o.state)throw new ch;o.stateDiff=Io(s)}return o}function _i(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!me(n,{strict:!1}))throw new tt({address:n});if(e[n])throw new ah({address:n});e[n]=Bh(r)}return e}const Ch=2n**256n-1n;function Yt(t){const{account:e,maxFeePerGas:n,maxPriorityFeePerGas:r,to:s}=t,i=e?de(e):void 0;if(i&&!me(i.address))throw new tt({address:i.address});if(s&&!me(s))throw new tt({address:s});if(n&&n>Ch)throw new or({maxFeePerGas:n});if(r&&n&&r>n)throw new ar({maxFeePerGas:n,maxPriorityFeePerGas:r})}class gc extends A{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class xi extends A{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class Rh extends A{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${oe(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class wc extends A{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const vc={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Ii(t,e){const n={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?je(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?je(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?vc[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(n.authorizationList=Nh(t.authorizationList)),n.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof n.v=="bigint"){if(n.v===0n||n.v===27n)return 0;if(n.v===1n||n.v===28n)return 1;if(n.v>=35n)return n.v%2n===0n?1:0}})(),n.type==="legacy"&&(delete n.accessList,delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.yParity),n.type==="eip2930"&&(delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas),n.type==="eip1559"&&delete n.maxFeePerBlobGas,n}function Nh(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function _c(t,e){const n=(t.transactions??[]).map(r=>typeof r=="string"?r:Ii(r));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:n,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function be(t,{blockHash:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest",includeTransactions:s}={}){var u,l,d;const i=s??!1,o=n!==void 0?L(n):void 0;let a=null;if(e?a=await t.request({method:"eth_getBlockByHash",params:[e,i]},{dedupe:!0}):a=await t.request({method:"eth_getBlockByNumber",params:[o||r,i]},{dedupe:!!o}),!a)throw new wc({blockHash:e,blockNumber:n});return(((d=(l=(u=t.chain)==null?void 0:u.formatters)==null?void 0:l.block)==null?void 0:d.format)||_c)(a,"getBlock")}async function Ei(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function Mh(t,e){return xc(t,e)}async function xc(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const u=n||await F(t,be,"getBlock")({}),l=await a({block:u,client:t,request:s});if(l===null)throw new Error;return l}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Te(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):F(t,be,"getBlock")({}),F(t,Ei,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new xi;const u=c-a.baseFeePerGas;return u<0n?0n:u}}async function Uh(t,e){return Ns(t,e)}async function Ns(t,e){var f,h;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,y;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((y=r==null?void 0:r.fees)==null?void 0:y.baseFeeMultiplier)??1.2})();if(o<1)throw new gc;const c=10**(((f=o.toString().split(".")[1])==null?void 0:f.length)??0),u=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),l=n||await F(t,be,"getBlock")({});if(typeof((h=r==null?void 0:r.fees)==null?void 0:h.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:u,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof l.baseFeePerGas!="bigint")throw new xi;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await xc(t,{block:l,chain:r,request:s}),y=u(l.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??y+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??u(await F(t,Ei,"getGasPrice")({}))}}async function Ic(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?L(r):n]},{dedupe:!!r});return je(s)}function Ec(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Oe(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>W(i))}function Ac(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Oe(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Oe(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>W(o))}function Fh(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}function Lh(t,e,n){return t&e^~t&n}function zh(t,e,n){return t&e^t&n^e&n}class Dh extends fi{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Gr(this.buffer)}update(e){Dt(this),e=gr(e),pt(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Gr(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Dt(this),qa(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,jt(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Fh(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Gr(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const He=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),jh=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),We=new Uint32Array(64);class Gh extends Dh{constructor(e=32){super(64,e,8,!1),this.A=He[0]|0,this.B=He[1]|0,this.C=He[2]|0,this.D=He[3]|0,this.E=He[4]|0,this.F=He[5]|0,this.G=He[6]|0,this.H=He[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)We[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=We[d-15],h=We[d-2],p=Pe(f,7)^Pe(f,18)^f>>>3,y=Pe(h,17)^Pe(h,19)^h>>>10;We[d]=y+We[d-7]+p+We[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=Pe(a,6)^Pe(a,11)^Pe(a,25),h=l+f+Lh(a,c,u)+jh[d]+We[d]|0,y=(Pe(r,2)^Pe(r,13)^Pe(r,22))+zh(r,s,i)|0;l=u,u=c,c=a,a=o+h|0,o=i,i=s,s=r,r=h+y|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,c,u,l)}roundClean(){jt(We)}destroy(){this.set(0,0,0,0,0,0,0,0),jt(this.buffer)}}const Pc=Va(()=>new Gh),qh=Pc;function Vh(t,e){return qh(we(t,{strict:!1})?Kt(t):t)}function Hh(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=Vh(e);return s.set([n],0),r==="bytes"?s:W(s)}function Wh(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(Hh({commitment:i,to:r,version:n}));return s}const Eo=6,kc=32,Ai=4096,$c=kc*Ai,Ao=$c*Eo-1-1*Ai*Eo;class Kh extends A{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class Zh extends A{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function Yh(t){const e=typeof t.data=="string"?Oe(t.data):t.data,n=V(e);if(!n)throw new Zh;if(n>Ao)throw new Kh({maxSize:Ao,size:n});const r=[];let s=!0,i=0;for(;s;){const o=bi(new Uint8Array($c));let a=0;for(;a<Ai;){const c=e.slice(i,i+(kc-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>W(o.bytes))}function Jh(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??Yh({data:e}),i=t.commitments??Ec({blobs:s,kzg:n,to:r}),o=t.proofs??Ac({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function Xh(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new lh({transaction:t})}function Qh(t,{docsPath:e,...n}){const r=(()=>{const s=Er(t,n);return s instanceof Fn?t:s})();return new dh(r,{docsPath:e,...n})}async function Pi(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return je(e)}async function Tc(t,e){var E,S,N,T,B;const{account:n=t.account,accessList:r,authorizationList:s,chain:i=t.chain,blobVersionedHashes:o,blobs:a,data:c,gas:u,gasPrice:l,maxFeePerBlobGas:d,maxFeePerGas:f,maxPriorityFeePerGas:h,nonce:p,nonceManager:y,to:b,type:v,value:I,...g}=e,m=await(async()=>{if(!n||!y||typeof p<"u")return p;const O=de(n),D=i?i.id:await F(t,Pi,"getChainId")({});return await y.consume({address:O.address,chainId:D,client:t})})();Yt(e);const w=(S=(E=i==null?void 0:i.formatters)==null?void 0:E.transactionRequest)==null?void 0:S.format,x=(w||Ln)({...Ar(g,{format:w}),account:n?de(n):void 0,accessList:r,authorizationList:s,blobs:a,blobVersionedHashes:o,data:c,gas:u,gasPrice:l,maxFeePerBlobGas:d,maxFeePerGas:f,maxPriorityFeePerGas:h,nonce:m,to:b,type:v,value:I},"fillTransaction");try{const O=await t.request({method:"eth_fillTransaction",params:[x]}),_=(((T=(N=i==null?void 0:i.formatters)==null?void 0:N.transaction)==null?void 0:T.format)||Ii)(O.tx);delete _.blockHash,delete _.blockNumber,delete _.r,delete _.s,delete _.transactionIndex,delete _.v,delete _.yParity,_.data=_.input,_.gas&&(_.gas=e.gas??_.gas),_.gasPrice&&(_.gasPrice=e.gasPrice??_.gasPrice),_.maxFeePerBlobGas&&(_.maxFeePerBlobGas=e.maxFeePerBlobGas??_.maxFeePerBlobGas),_.maxFeePerGas&&(_.maxFeePerGas=e.maxFeePerGas??_.maxFeePerGas),_.maxPriorityFeePerGas&&(_.maxPriorityFeePerGas=e.maxPriorityFeePerGas??_.maxPriorityFeePerGas),_.nonce&&(_.nonce=e.nonce??_.nonce);const k=await(async()=>{var M,j;if(typeof((M=i==null?void 0:i.fees)==null?void 0:M.baseFeeMultiplier)=="function"){const q=await F(t,be,"getBlock")({});return i.fees.baseFeeMultiplier({block:q,client:t,request:e})}return((j=i==null?void 0:i.fees)==null?void 0:j.baseFeeMultiplier)??1.2})();if(k<1)throw new gc;const $=10**(((B=k.toString().split(".")[1])==null?void 0:B.length)??0),R=M=>M*BigInt(Math.ceil(k*$))/BigInt($);return _.maxFeePerGas&&!e.maxFeePerGas&&(_.maxFeePerGas=R(_.maxFeePerGas)),_.gasPrice&&!e.gasPrice&&(_.gasPrice=R(_.gasPrice)),{raw:O.raw,transaction:{from:x.from,..._}}}catch(O){throw Qh(O,{...e,chain:t.chain})}}const ep=["blobVersionedHashes","chainId","fees","gas","nonce","type"],Po=new Map,Hr=new vr(128);async function Sc(t,e){var m,w,P;let n=e;n.account??(n.account=t.account),n.parameters??(n.parameters=ep);const{account:r,chain:s=t.chain,nonceManager:i,parameters:o}=n,a=(()=>{if(typeof(s==null?void 0:s.prepareTransactionRequest)=="function")return{fn:s.prepareTransactionRequest,runAt:["beforeFillTransaction"]};if(Array.isArray(s==null?void 0:s.prepareTransactionRequest))return{fn:s.prepareTransactionRequest[0],runAt:s.prepareTransactionRequest[1].runAt}})();let c;async function u(){return c||(typeof n.chainId<"u"?n.chainId:s?s.id:(c=await F(t,Pi,"getChainId")({}),c))}const l=r&&de(r);let d=n.nonce;if(o.includes("nonce")&&typeof d>"u"&&l&&i){const x=await u();d=await i.consume({address:l.address,chainId:x,client:t})}a!=null&&a.fn&&((m=a.runAt)!=null&&m.includes("beforeFillTransaction"))&&(n=await a.fn({...n,chain:s},{phase:"beforeFillTransaction"}),d??(d=n.nonce));const h=((o.includes("blobVersionedHashes")||o.includes("sidecars"))&&n.kzg&&n.blobs||Hr.get(t.uid)===!1||!["fees","gas"].some(E=>o.includes(E))?!1:!!(o.includes("chainId")&&typeof n.chainId!="number"||o.includes("nonce")&&typeof d!="number"||o.includes("fees")&&typeof n.gasPrice!="bigint"&&(typeof n.maxFeePerGas!="bigint"||typeof n.maxPriorityFeePerGas!="bigint")||o.includes("gas")&&typeof n.gas!="bigint"))?await F(t,Tc,"fillTransaction")({...n,nonce:d}).then(x=>{const{chainId:E,from:S,gas:N,gasPrice:T,nonce:B,maxFeePerBlobGas:O,maxFeePerGas:D,maxPriorityFeePerGas:_,type:k,...C}=x.transaction;return Hr.set(t.uid,!0),{...n,...S?{from:S}:{},...k?{type:k}:{},...typeof E<"u"?{chainId:E}:{},...typeof N<"u"?{gas:N}:{},...typeof T<"u"?{gasPrice:T}:{},...typeof B<"u"?{nonce:B}:{},...typeof O<"u"?{maxFeePerBlobGas:O}:{},...typeof D<"u"?{maxFeePerGas:D}:{},...typeof _<"u"?{maxPriorityFeePerGas:_}:{},..."nonceKey"in C&&typeof C.nonceKey<"u"?{nonceKey:C.nonceKey}:{}}}).catch(x=>{var N;const E=x;return E.name!=="TransactionExecutionError"||((N=E.walk)==null?void 0:N.call(E,T=>{const B=T;return B.name==="MethodNotFoundRpcError"||B.name==="MethodNotSupportedRpcError"}))&&Hr.set(t.uid,!1),n}):n;d??(d=h.nonce),n={...h,...l?{from:l==null?void 0:l.address}:{},...d?{nonce:d}:{}};const{blobs:p,gas:y,kzg:b,type:v}=n;a!=null&&a.fn&&((w=a.runAt)!=null&&w.includes("beforeFillParameters"))&&(n=await a.fn({...n,chain:s},{phase:"beforeFillParameters"}));let I;async function g(){return I||(I=await F(t,be,"getBlock")({blockTag:"latest"}),I)}if(o.includes("nonce")&&typeof d>"u"&&l&&!i&&(n.nonce=await F(t,Ic,"getTransactionCount")({address:l.address,blockTag:"pending"})),(o.includes("blobVersionedHashes")||o.includes("sidecars"))&&p&&b){const x=Ec({blobs:p,kzg:b});if(o.includes("blobVersionedHashes")){const E=Wh({commitments:x,to:"hex"});n.blobVersionedHashes=E}if(o.includes("sidecars")){const E=Ac({blobs:p,commitments:x,kzg:b}),S=Jh({blobs:p,commitments:x,proofs:E,to:"hex"});n.sidecars=S}}if(o.includes("chainId")&&(n.chainId=await u()),(o.includes("fees")||o.includes("type"))&&typeof v>"u")try{n.type=Xh(n)}catch{let x=Po.get(t.uid);if(typeof x>"u"){const E=await g();x=typeof(E==null?void 0:E.baseFeePerGas)=="bigint",Po.set(t.uid,x)}n.type=x?"eip1559":"legacy"}if(o.includes("fees"))if(n.type!=="legacy"&&n.type!=="eip2930"){if(typeof n.maxFeePerGas>"u"||typeof n.maxPriorityFeePerGas>"u"){const x=await g(),{maxFeePerGas:E,maxPriorityFeePerGas:S}=await Ns(t,{block:x,chain:s,request:n});if(typeof n.maxPriorityFeePerGas>"u"&&n.maxFeePerGas&&n.maxFeePerGas<S)throw new Rh({maxPriorityFeePerGas:S});n.maxPriorityFeePerGas=S,n.maxFeePerGas=E}}else{if(typeof n.maxFeePerGas<"u"||typeof n.maxPriorityFeePerGas<"u")throw new xi;if(typeof n.gasPrice>"u"){const x=await g(),{gasPrice:E}=await Ns(t,{block:x,chain:s,request:n,type:"legacy"});n.gasPrice=E}}return o.includes("gas")&&typeof y>"u"&&(n.gas=await F(t,ki,"estimateGas")({...n,account:l,prepare:(l==null?void 0:l.type)==="local"?[]:["blobVersionedHashes"]})),a!=null&&a.fn&&((P=a.runAt)!=null&&P.includes("afterFillParameters"))&&(n=await a.fn({...n,chain:s},{phase:"afterFillParameters"})),Yt(n),delete n.parameters,n}async function ki(t,e){var o,a,c;const{account:n=t.account,prepare:r=!0}=e,s=n?de(n):void 0,i=(()=>{if(Array.isArray(r))return r;if((s==null?void 0:s.type)!=="local")return["blobVersionedHashes"]})();try{const u=await(async()=>{if(e.to)return e.to;if(e.authorizationList&&e.authorizationList.length>0)return await bc({authorization:e.authorizationList[0]}).catch(()=>{throw new A("`to` is required. Could not infer from `authorizationList`")})})(),{accessList:l,authorizationList:d,blobs:f,blobVersionedHashes:h,blockNumber:p,blockTag:y,data:b,gas:v,gasPrice:I,maxFeePerBlobGas:g,maxFeePerGas:m,maxPriorityFeePerGas:w,nonce:P,value:x,stateOverride:E,...S}=r?await Sc(t,{...e,parameters:i,to:u}):e;if(v&&e.gas!==v)return v;const T=(typeof p=="bigint"?L(p):void 0)||y,B=_i(E);Yt(e);const O=(c=(a=(o=t.chain)==null?void 0:o.formatters)==null?void 0:a.transactionRequest)==null?void 0:c.format,_=(O||Ln)({...Ar(S,{format:O}),account:s,accessList:l,authorizationList:d,blobs:f,blobVersionedHashes:h,data:b,gasPrice:I,maxFeePerBlobGas:g,maxFeePerGas:m,maxPriorityFeePerGas:w,nonce:P,to:u,value:x},"estimateGas");return BigInt(await t.request({method:"eth_estimateGas",params:B?[_,T??t.experimental_blockTag??"latest",B]:T?[_,T]:[_]}))}catch(u){throw Th(u,{...e,account:s,chain:t.chain})}}async function tp(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=Ae({abi:n,args:s,functionName:i});try{return await F(t,ki,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(u){const l=a.account?de(a.account):void 0;throw Vt(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:l==null?void 0:l.address})}}function Pr(t,e){if(!me(t,{strict:!1}))throw new tt({address:t});if(!me(e,{strict:!1}))throw new tt({address:e});return t.toLowerCase()===e.toLowerCase()}const ko="/docs/contract/decodeEventLog";function cr(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new Ff({docsPath:ko});const c=e.find(y=>y.type==="event"&&o===wr(ge(y)));if(!(c&&"name"in c)||c.type!=="event")throw new Lf(o,{docsPath:ko});const{name:u,inputs:l}=c,d=l==null?void 0:l.some(y=>!("name"in y&&y.name)),f=d?[]:{},h=l.map((y,b)=>[y,b]).filter(([y])=>"indexed"in y&&y.indexed);for(let y=0;y<h.length;y++){const[b,v]=h[y],I=a[y];if(!I)throw new di({abiItem:c,param:b});f[d?v:b.name||v]=np({param:b,value:I})}const p=l.filter(y=>!("indexed"in y&&y.indexed));if(p.length>0){if(n&&n!=="0x")try{const y=Mn(p,n);if(y)if(d)for(let b=0;b<l.length;b++)f[b]=f[b]??y.shift();else for(let b=0;b<p.length;b++)f[p[b].name]=y[b]}catch(y){if(i)throw y instanceof Ma||y instanceof oc?new ir({abiItem:c,data:n,params:p,size:V(n)}):y}else if(i)throw new ir({abiItem:c,data:"0x",params:p,size:0})}return{eventName:u,args:Object.values(f).length>0?f:void 0}}function np({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(Mn([t],e)||[])[0]}function $i(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var l;const a=e.filter(d=>d.type==="event"&&o.topics[0]===wr(d));if(a.length===0)return null;let c,u;for(const d of a)try{c=cr({...o,abi:[d],strict:!0}),u=d;break}catch{}if(!c&&!s){u=a[0];try{c=cr({...o,abi:[u],strict:!1})}catch{const d=(l=u.inputs)==null?void 0:l.some(f=>!("name"in f&&f.name));return{...o,args:d?[]:{},eventName:u.name}}}return!c||!u||i&&!i.includes(c.eventName)||!rp({args:c.args,inputs:u.inputs,matchArgs:n})?null:{...c,...o}}).filter(Boolean)}function rp(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?Pr(o,a):i.type==="string"||i.type==="bytes"?Y(Kt(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(u=>s(a,u,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(u=>u.name===i);return a?(Array.isArray(o)?o:[o]).some(u=>s(a,u,e[i])):!1}):!1}function Ge(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,blockTimestamp:t.blockTimestamp?BigInt(t.blockTimestamp):t.blockTimestamp===null?null:void 0,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function Ti(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const u=c??!1,l=o??(i?[i]:void 0);let d=[];l&&(d=[l.flatMap(y=>Nn({abi:[y],eventName:y.name,args:o?void 0:a}))],i&&(d=d[0]));let f;n?f=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):f=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?L(r):r,toBlock:typeof s=="bigint"?L(s):s}]});const h=f.map(p=>Ge(p));return l?$i({abi:l,args:a,logs:h,strict:u}):h}async function Oc(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:u}=e,l=o?vt({abi:n,name:o}):void 0,d=l?void 0:n.filter(f=>f.type==="event");return F(t,Ti,"getLogs")({address:r,args:s,blockHash:i,event:l,events:d,fromBlock:a,toBlock:c,strict:u})}const Wr="/docs/contract/decodeFunctionResult";function _t(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=vt({abi:e,args:n,name:r});if(!a)throw new zt(r,{docsPath:Wr});i=a}if(i.type!=="function")throw new zt(void 0,{docsPath:Wr});if(!i.outputs)throw new Fa(i.name,{docsPath:Wr});const o=Mn(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const sp="0.1.1";function ip(){return sp}class z extends Error{static setStaticOptions(e){z.prototype.docsOrigin=e.docsOrigin,z.prototype.showVersion=e.showVersion,z.prototype.version=e.version}constructor(e,n={}){const r=(()=>{var l;if(n.cause instanceof z){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(l=n.cause)!=null&&l.message?n.cause.message:n.details})(),s=n.cause instanceof z&&n.cause.docsPath||n.docsPath,i=n.docsOrigin??z.prototype.docsOrigin,o=`${i}${s??""}`,a=!!(n.version??z.prototype.showVersion),c=n.version??z.prototype.version,u=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s||a?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0,a?`Version: ${c}`:void 0]:[]].filter(l=>typeof l=="string").join(`
`);super(u,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsOrigin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"showVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.cause=n.cause,this.details=r,this.docs=o,this.docsOrigin=i,this.docsPath=s,this.shortMessage=e,this.showVersion=a,this.version=c}walk(e){return Bc(this,e)}}Object.defineProperty(z,"defaultStaticOptions",{enumerable:!0,configurable:!0,writable:!0,value:{docsOrigin:"https://oxlib.sh",showVersion:!1,version:`ox@${ip()}`}});z.setStaticOptions(z.defaultStaticOptions);function Bc(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?Bc(t.cause,e):e?null:t}function zn(t,e){if(Ct(t)>e)throw new xp({givenSize:Ct(t),maxSize:e})}const Re={zero:48,nine:57,A:65,F:70,a:97,f:102};function $o(t){if(t>=Re.zero&&t<=Re.nine)return t-Re.zero;if(t>=Re.A&&t<=Re.F)return t-(Re.A-10);if(t>=Re.a&&t<=Re.f)return t-(Re.a-10)}function op(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new Ip({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function Cc(t,e={}){const{dir:n="left"}=e;let r=t,s=0;for(let i=0;i<r.length-1&&r[n==="left"?i:r.length-i-1].toString()==="0";i++)s++;return r=n==="left"?r.slice(s):r.slice(0,r.length-s),r}function kr(t,e){if(fe(t)>e)throw new Tp({givenSize:fe(t),maxSize:e})}function ap(t,e){if(typeof e=="number"&&e>0&&e>fe(t)-1)throw new jc({offset:e,position:"start",size:fe(t)})}function cp(t,e,n){if(typeof e=="number"&&typeof n=="number"&&fe(t)!==n-e)throw new jc({offset:n,position:"end",size:fe(t)})}function Rc(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new Sp({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const up="#__bigint";function Nc(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+up:s,n)}const lp=new TextDecoder,dp=new TextEncoder;function fp(t){return t instanceof Uint8Array?t:typeof t=="string"?Mc(t):hp(t)}function hp(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function Mc(t,e={}){const{size:n}=e;let r=t;n&&(kr(t,n),r=bt(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const u=$o(s.charCodeAt(c++)),l=$o(s.charCodeAt(c++));if(u===void 0||l===void 0)throw new z(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=u<<4|l}return o}function pp(t,e={}){const{size:n}=e,r=dp.encode(t);return typeof n=="number"?(zn(r,n),yp(r,n)):r}function yp(t,e){return op(t,{dir:"right",size:e})}function Ct(t){return t.length}function mp(t,e,n,r={}){const{strict:s}=r;return t.slice(e,n)}function bp(t,e={}){const{size:n}=e;typeof n<"u"&&zn(t,n);const r=_e(t,e);return Lc(r,e)}function gp(t,e={}){const{size:n}=e;let r=t;if(typeof n<"u"&&(zn(r,n),r=Uc(r)),r.length>1||r[0]>1)throw new _p(r);return!!r[0]}function ze(t,e={}){const{size:n}=e;typeof n<"u"&&zn(t,n);const r=_e(t,e);return zc(r,e)}function wp(t,e={}){const{size:n}=e;let r=t;return typeof n<"u"&&(zn(r,n),r=vp(r)),lp.decode(r)}function Uc(t){return Cc(t,{dir:"left"})}function vp(t){return Cc(t,{dir:"right"})}class _p extends z{constructor(e){super(`Bytes value \`${e}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}let xp=class extends z{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},Ip=class extends z{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const Ep=new TextEncoder,Ap=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Pp(t,e={}){const{strict:n=!1}=e;if(!t)throw new To(t);if(typeof t!="string")throw new To(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new So(t);if(!t.startsWith("0x"))throw new So(t)}function ve(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function kp(t){return t instanceof Uint8Array?_e(t):Array.isArray(t)?_e(new Uint8Array(t)):t}function Fc(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(kr(n,e.size),mt(n,e.size)):n}function _e(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Ap[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(kr(r,e.size),bt(r,e.size)):r}function te(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const u=typeof t=="bigint"?"n":"";throw new Dc({max:i?`${i}${u}`:void 0,min:`${o}${u}`,signed:n,size:r,value:`${t}${u}`})}const c=`0x${(n&&s<0?BigInt.asUintN(r*8,BigInt(s)):s).toString(16)}`;return r?mt(c,r):c}function Si(t,e={}){return _e(Ep.encode(t),e)}function mt(t,e){return Rc(t,{dir:"left",size:e})}function bt(t,e){return Rc(t,{dir:"right",size:e})}function $e(t,e,n,r={}){const{strict:s}=r;ap(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&cp(i,e,n),i}function fe(t){return Math.ceil((t.length-2)/2)}function Lc(t,e={}){const{signed:n}=e;e.size&&kr(t,e.size);const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n)-1n,o=i>>1n;return r<=o?r:r-i-1n}function zc(t,e={}){const{signed:n,size:r}=e;return Number(!n&&!r?t:Lc(t,e))}function $p(t,e={}){const{strict:n=!1}=e;try{return Pp(t,{strict:n}),!0}catch{return!1}}class Dc extends z{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class To extends z{constructor(e){super(`Value \`${typeof e=="object"?Nc(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class So extends z{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class Tp extends z{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class jc extends z{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class Sp extends z{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function Op(t){return{address:t.address,amount:te(t.amount),index:te(t.index),validatorIndex:te(t.validatorIndex)}}function Gc(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:te(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:te(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:te(t.gasLimit)},...typeof t.number=="bigint"&&{number:te(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:te(t.prevRandao)},...typeof t.time=="bigint"&&{time:te(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(Op)}}}const ur=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],Ms=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],qc=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}],Vc=[...qc,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Bp=[...qc,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],Oo=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],Bo=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],Hc=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],Co=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],Cp="0x82ad56cb",Wc="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Rp="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Np="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",Oi="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033";class Us extends A{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class Kc extends A{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const Kr="/docs/contract/encodeDeployData";function Bi(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new Cf({docsPath:Kr});if(!("inputs"in s))throw new so({docsPath:Kr});if(!s.inputs||s.inputs.length===0)throw new so({docsPath:Kr});const i=wt(s.inputs,n);return Zt([r,i])}function Jt({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new Us({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new Us({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function Zc(t,{docsPath:e,...n}){const r=(()=>{const s=Er(t,n);return s instanceof Fn?t:s})();return new dc(r,{docsPath:e,...n})}function Yc(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const Zr=new Map;function Jc({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const l=c();o();const d=l.map(({args:f})=>f);d.length!==0&&t(d).then(f=>{s&&Array.isArray(f)&&f.sort(s);for(let h=0;h<l.length;h++){const{resolve:p}=l[h];p==null||p([f[h],f])}}).catch(f=>{for(let h=0;h<l.length;h++){const{reject:p}=l[h];p==null||p(f)}})},o=()=>Zr.delete(e),a=()=>c().map(({args:l})=>l),c=()=>Zr.get(e)||[],u=l=>Zr.set(e,[...c(),l]);return{flush:o,async schedule(l){const{promise:d,resolve:f,reject:h}=Yc();return(n==null?void 0:n([...a(),l]))&&i(),c().length>0?(u({args:l,resolve:f,reject:h}),d):(u({args:l,resolve:f,reject:h}),setTimeout(i,r),d)}}}async function $r(t,e){var O,D,_,k;const{account:n=t.account,authorizationList:r,batch:s=!!((O=t.batch)!=null&&O.multicall),blockNumber:i,blockTag:o=t.experimental_blockTag??"latest",accessList:a,blobs:c,blockOverrides:u,code:l,data:d,factory:f,factoryData:h,gas:p,gasPrice:y,maxFeePerBlobGas:b,maxFeePerGas:v,maxPriorityFeePerGas:I,nonce:g,to:m,value:w,stateOverride:P,...x}=e,E=n?de(n):void 0;if(l&&(f||h))throw new A("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(l&&m)throw new A("Cannot provide both `code` & `to` as parameters.");const S=l&&d,N=f&&h&&m&&d,T=S||N,B=S?Xc({code:l,data:d}):N?Fp({data:d,factory:f,factoryData:h,to:m}):d;try{Yt(e);const $=(typeof i=="bigint"?L(i):void 0)||o,R=u?Gc(u):void 0,M=_i(P),j=(k=(_=(D=t.chain)==null?void 0:D.formatters)==null?void 0:_.transactionRequest)==null?void 0:k.format,Q=(j||Ln)({...Ar(x,{format:j}),accessList:a,account:E,authorizationList:r,blobs:c,data:B,gas:p,gasPrice:y,maxFeePerBlobGas:b,maxFeePerGas:v,maxPriorityFeePerGas:I,nonce:g,to:T?void 0:m,value:w},"call");if(s&&Mp({request:Q})&&!M&&!R)try{return await Up(t,{...Q,blockNumber:i,blockTag:o})}catch(ee){if(!(ee instanceof Kc)&&!(ee instanceof Us))throw ee}const X=(()=>{const ee=[Q,$];return M&&R?[...ee,M,R]:M?[...ee,M]:R?[...ee,{},R]:ee})(),H=await t.request({method:"eth_call",params:X});return H==="0x"?{data:void 0}:{data:H}}catch(C){const $=Lp(C),{offchainLookup:R,offchainLookupSignature:M}=await hc(async()=>{const{offchainLookup:j,offchainLookupSignature:q}=await import("./ccip-BWLaw1vP.js");return{offchainLookup:j,offchainLookupSignature:q}},[]);if(t.ccipRead!==!1&&($==null?void 0:$.slice(0,10))===M&&m)return{data:await R(t,{data:$,to:m})};throw T&&($==null?void 0:$.slice(0,10))==="0x101bb98d"?new mh({factory:f}):Zc(C,{...e,account:E,chain:t.chain})}}function Mp({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(Cp)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Up(t,e){var y;const{batchSize:n=1024,deployless:r=!1,wait:s=0}=typeof((y=t.batch)==null?void 0:y.multicall)=="object"?t.batch.multicall:{},{blockNumber:i,blockTag:o=t.experimental_blockTag??"latest",data:a,to:c}=e,u=(()=>{if(r)return null;if(e.multicallAddress)return e.multicallAddress;if(t.chain)return Jt({blockNumber:i,chain:t.chain,contract:"multicall3"});throw new Kc})(),d=(typeof i=="bigint"?L(i):void 0)||o,{schedule:f}=Jc({id:`${t.uid}.${d}`,wait:s,shouldSplitBatch(b){return b.reduce((I,{data:g})=>I+(g.length-2),0)>n*2},fn:async b=>{const v=b.map(m=>({allowFailure:!0,callData:m.data,target:m.to})),I=Ae({abi:ur,args:[v],functionName:"aggregate3"}),g=await t.request({method:"eth_call",params:[{...u===null?{data:Xc({code:Oi,data:I})}:{to:u,data:I}},d]});return _t({abi:ur,args:[v],functionName:"aggregate3",data:g||"0x"})}}),[{returnData:h,success:p}]=await f({data:a,to:c});if(!p)throw new Ir({data:h});return h==="0x"?{data:void 0}:{data:h}}function Xc(t){const{code:e,data:n}=t;return Bi({abi:Ca(["constructor(bytes, bytes)"]),bytecode:Wc,args:[e,n]})}function Fp(t){const{data:e,factory:n,factoryData:r,to:s}=t;return Bi({abi:Ca(["constructor(address, bytes, address, bytes)"]),bytecode:Rp,args:[s,e,n,r]})}function Lp(t){var n;if(!(t instanceof A))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function xe(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Ae({abi:n,args:s,functionName:i});try{const{data:c}=await F(t,$r,"call")({...o,data:a,to:r});return _t({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw Vt(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function zp(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?de(a.account):t.account,u=Ae({abi:n,args:s,functionName:o});try{const{data:l}=await F(t,$r,"call")({batch:!1,data:`${u}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=_t({abi:n,args:s,functionName:o,data:l||"0x"}),f=n.filter(h=>"name"in h&&h.name===e.functionName);return{result:d,request:{abi:f,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(l){throw Vt(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}const Yr=new Map,Ro=new Map;let Dp=0;function rt(t,e,n){const r=++Dp,s=()=>Yr.get(t)||[],i=()=>{const l=s();Yr.set(t,l.filter(d=>d.id!==r))},o=()=>{const l=s();if(!l.some(f=>f.id===r))return;const d=Ro.get(t);if(l.length===1&&d){const f=d();f instanceof Promise&&f.catch(()=>{})}i()},a=s();if(Yr.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const l in e)c[l]=(...d)=>{var h,p;const f=s();if(f.length!==0)for(const y of f)(p=(h=y.fns)[l])==null||p.call(h,...d)};const u=n(c);return typeof u=="function"&&Ro.set(t,u),o}async function Fs(t){return new Promise(e=>setTimeout(e,t))}function Dn(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await Fs(c);const u=async()=>{s&&(await t({unpoll:i}),await Fs(r),u())};u()})(),i}const jp=new Map,Gp=new Map;function qp(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,jp),r=e(t,Gp);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Vp(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=qp(e),s=r.response.get();if(s&&n>0&&Date.now()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const Hp=t=>`blockNumber.${t}`;async function jn(t,{cacheTime:e=t.cacheTime}={}){const n=await Vp(()=>t.request({method:"eth_blockNumber"}),{cacheKey:Hp(t.uid),cacheTime:e});return BigInt(n)}async function Tr(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>Ge(i));return!("abi"in e)||!e.abi?s:$i({abi:e.abi,logs:s,strict:n})}async function Sr(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function Wp(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:u,poll:l,pollingInterval:d=t.pollingInterval,strict:f}=e;return(typeof l<"u"?l:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const b=f??!1,v=J(["watchContractEvent",r,s,i,t.uid,o,d,b,a]);return rt(v,{onLogs:u,onError:c},I=>{let g;a!==void 0&&(g=a-1n);let m,w=!1;const P=Dn(async()=>{var x;if(!w){try{m=await F(t,sc,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:b,fromBlock:a})}catch{}w=!0;return}try{let E;if(m)E=await F(t,Tr,"getFilterChanges")({filter:m});else{const S=await F(t,jn,"getBlockNumber")({});g&&g<S?E=await F(t,Oc,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:g+1n,toBlock:S,strict:b}):E=[],g=S}if(E.length===0)return;if(i)I.onLogs(E);else for(const S of E)I.onLogs([S])}catch(E){m&&E instanceof nt&&(w=!1),(x=I.onError)==null||x.call(I,E)}},{emitOnBegin:!0,interval:d});return async()=>{m&&await F(t,Sr,"uninstallFilter")({filter:m}),P()}})})():(()=>{const b=f??!1,v=J(["watchContractEvent",r,s,i,t.uid,o,d,b]);let I=!0,g=()=>I=!1;return rt(v,{onLogs:u,onError:c},m=>((async()=>{try{const w=(()=>{if(t.transport.type==="fallback"){const E=t.transport.transports.find(S=>S.config.type==="webSocket"||S.config.type==="ipc");return E?E.value:t.transport}return t.transport})(),P=o?Nn({abi:n,eventName:o,args:s}):[],{unsubscribe:x}=await w.subscribe({params:["logs",{address:r,topics:P}],onData(E){var N;if(!I)return;const S=E.result;try{const{eventName:T,args:B}=cr({abi:n,data:S.data,topics:S.topics,strict:f}),O=Ge(S,{args:B,eventName:T});m.onLogs([O])}catch(T){let B,O;if(T instanceof ir||T instanceof di){if(f)return;B=T.abiItem.name,O=(N=T.abiItem.inputs)==null?void 0:N.some(_=>!("name"in _&&_.name))}const D=Ge(S,{args:O?[]:{},eventName:B});m.onLogs([D])}},onError(E){var S;(S=m.onError)==null||S.call(m,E)}});g=x,I||g()}catch(w){c==null||c(w)}})(),()=>g()))})()}async function Kp(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}function Ls(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:u})=>{const l=typeof e=="function"?e({count:a,error:u}):e;l&&await Fs(l),o({count:a+1})};try{const u=await t();s(u)}catch(u){if(a<n&&await r({count:a,error:u}))return c({error:u});i(u)}};o()})}const Zp={"0x0":"reverted","0x1":"success"};function Qc(t,e){const n={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(r=>Ge(r)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?je(t.transactionIndex):null,status:t.status?Zp[t.status]:null,type:t.type?vc[t.type]||t.type:null};return t.blobGasPrice&&(n.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(n.blobGasUsed=BigInt(t.blobGasUsed)),n}const zs=256;let Hn=zs,Wn;function eu(t=11){if(!Wn||Hn+t>zs*2){Wn="",Hn=0;for(let e=0;e<zs;e++)Wn+=(256+Math.random()*256|0).toString(16).substring(1)}return Wn.substring(Hn,Hn+++t)}function Yp(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=t.experimental_blockTag??(typeof(n==null?void 0:n.experimental_preconfirmationTime)=="number"?"pending":void 0),c=(n==null?void 0:n.blockTime)??12e3,u=Math.min(Math.max(Math.floor(c/2),500),4e3),l=t.pollingInterval??u,d=t.cacheTime??l,f=t.account?de(t.account):void 0,{config:h,request:p,value:y}=t.transport({account:f,chain:n,pollingInterval:l}),b={...h,...y},v={account:f,batch:e,cacheTime:d,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:p,transport:b,type:o,uid:eu(),...a?{experimental_blockTag:a}:{}};function I(g){return m=>{const w=m(g);for(const x in v)delete w[x];const P={...g,...w};return Object.assign(P,{extend:I(P)})}}return Object.assign(v,{extend:I(v)})}function Ci(t){var n,r,s,i,o,a;if(!(t instanceof A))return!1;const e=t.walk(c=>c instanceof Ps);return e instanceof Ps?((n=e.data)==null?void 0:n.errorName)==="HttpError"||((r=e.data)==null?void 0:r.errorName)==="ResolverError"||((s=e.data)==null?void 0:s.errorName)==="ResolverNotContract"||((i=e.data)==null?void 0:i.errorName)==="ResolverNotFound"||((o=e.data)==null?void 0:o.errorName)==="ReverseAddressMismatch"||((a=e.data)==null?void 0:a.errorName)==="UnsupportedResolverProfile":!1}function Jp(t){const{abi:e,data:n}=t,r=Gt(n,0,4),s=e.find(i=>i.type==="function"&&r===Rn(ge(i)));if(!s)throw new zf(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?Mn(s.inputs,Gt(n,4)):void 0}}const Jr="/docs/contract/encodeErrorResult";function No(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=vt({abi:e,args:r,name:n});if(!c)throw new io(n,{docsPath:Jr});s=c}if(s.type!=="error")throw new io(void 0,{docsPath:Jr});const i=ge(s),o=Rn(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new Uf(s.name,{docsPath:Jr});a=wt(s.inputs,r)}return Zt([o,a])}const Xr="/docs/contract/encodeFunctionResult";function Xp(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=vt({abi:e,name:n});if(!o)throw new zt(n,{docsPath:Xr});s=o}if(s.type!=="function")throw new zt(void 0,{docsPath:Xr});if(!s.outputs)throw new Fa(s.name,{docsPath:Xr});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new La(r)})();return wt(s.outputs,i)}const Or="x-batch-gateway:true";async function Qp(t){const{data:e,ccipRequest:n}=t,{args:[r]}=Jp({abi:Ms,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(Or)?await Qp({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=ey(c)}})),Xp({abi:Ms,functionName:"query",result:[s,i]})}function ey(t){return t.name==="HttpRequestError"&&t.status?No({abi:Ms,errorName:"HttpError",args:[t.status,t.shortMessage]}):No({abi:[ic],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function tu(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return we(e)?e:null}function Ds(t){let e=new Uint8Array(32).fill(0);if(!t)return W(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=tu(n[r]),i=s?Kt(s):Y(ft(n[r]),"bytes");e=Y(Be([e,i]),"bytes")}return W(e)}function ty(t){return`[${t.slice(2)}]`}function ny(t){const e=new Uint8Array(32).fill(0);return t?tu(t)||Y(ft(t)):W(e)}function Ri(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(ft(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=ft(s[i]);o.byteLength>255&&(o=ft(ty(ny(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function ry(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,u=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Jt({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),l=c==null?void 0:c.ensTlds;if(l&&!l.some(f=>i.endsWith(f)))return null;const d=s!=null?[Ds(i),BigInt(s)]:[Ds(i)];try{const f=Ae({abi:Bo,functionName:"addr",args:d}),h={address:u,abi:Vc,functionName:"resolveWithGateways",args:[Se(Ri(i)),f,o??[Or]],blockNumber:n,blockTag:r},y=await F(t,xe,"readContract")(h);if(y[0]==="0x")return null;const b=_t({abi:Bo,args:d,functionName:"addr",data:y[0]});return b==="0x"||dt(b)==="0x00"?null:b}catch(f){if(a)throw f;if(Ci(f))return null;throw f}}class sy extends A{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class rn extends A{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class Ni extends A{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class iy extends A{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const oy=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,ay=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,cy=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,uy=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function ly(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!Object.hasOwn(globalThis,"Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function Mo(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function nu({uri:t,gatewayUrls:e}){const n=cy.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=Mo(e==null?void 0:e.ipfs,"https://ipfs.io"),s=Mo(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(oy),{protocol:o,subpath:a,target:c,subtarget:u=""}=(i==null?void 0:i.groups)||{},l=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||ay.test(t);if(t.startsWith("http")&&!l&&!d){let h=t;return e!=null&&e.arweave&&(h=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:h,isOnChain:!1,isEncoded:!1}}if((l||d)&&c)return{uri:`${r}/${l?"ipns":"ipfs"}/${c}${u}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${u||""}`,isOnChain:!1,isEncoded:!1};let f=t.replace(uy,"");if(f.startsWith("<svg")&&(f=`data:image/svg+xml;base64,${btoa(f)}`),f.startsWith("data:")||f.startsWith("{"))return{uri:f,isOnChain:!0,isEncoded:!1};throw new Ni({uri:t})}function ru(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new sy({data:t});return t.image||t.image_url||t.image_data}async function dy({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await Mi({gatewayUrls:t,uri:ru(n)})}catch{throw new Ni({uri:e})}}async function Mi({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=nu({uri:e,gatewayUrls:t});if(r||await ly(n))return n;throw new Ni({uri:e})}function fy(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new rn({reason:"Only EIP-155 supported"});if(!o)throw new rn({reason:"Chain ID not found"});if(!c)throw new rn({reason:"Contract address not found"});if(!s)throw new rn({reason:"Token ID not found"});if(!a)throw new rn({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o,10),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function hy(t,{nft:e}){if(e.namespace==="erc721")return xe(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return xe(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new iy({namespace:e.namespace})}async function py(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?yy(t,{gatewayUrls:e,record:n}):Mi({uri:n,gatewayUrls:e})}async function yy(t,{gatewayUrls:e,record:n}){const r=fy(n),s=await hy(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=nu({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const u=a?atob(i.replace("data:application/json;base64,","")):i,l=JSON.parse(u);return Mi({uri:ru(l),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),dy({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function su(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,u=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Jt({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),l=c==null?void 0:c.ensTlds;if(l&&!l.some(d=>i.endsWith(d)))return null;try{const d={address:u,abi:Vc,args:[Se(Ri(i)),Ae({abi:Oo,functionName:"text",args:[Ds(i),s]}),o??[Or]],functionName:"resolveWithGateways",blockNumber:n,blockTag:r},h=await F(t,xe,"readContract")(d);if(h[0]==="0x")return null;const p=_t({abi:Oo,functionName:"text",data:h[0]});return p===""?null:p}catch(d){if(a)throw d;if(Ci(d))return null;throw d}}async function my(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await F(t,su,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await py(t,{record:c,gatewayUrls:r})}catch{return null}}async function by(t,e){const{address:n,blockNumber:r,blockTag:s,coinType:i=60n,gatewayUrls:o,strict:a}=e,{chain:c}=t,u=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Jt({blockNumber:r,chain:c,contract:"ensUniversalResolver"})})();try{const l={address:u,abi:Bp,args:[n,i,o??[Or]],functionName:"reverseWithGateways",blockNumber:r,blockTag:s},d=F(t,xe,"readContract"),[f]=await d(l);return f||null}catch(l){if(a)throw l;if(Ci(l))return null;throw l}}async function gy(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return Jt({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(u=>s.endsWith(u)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await F(t,xe,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Se(Ri(s))],blockNumber:n,blockTag:r});return c}async function iu(t,e){var b,v,I;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:l,maxPriorityFeePerGas:d,to:f,value:h,...p}=e,y=n?de(n):void 0;try{Yt(e);const m=(typeof r=="bigint"?L(r):void 0)||s,w=(I=(v=(b=t.chain)==null?void 0:b.formatters)==null?void 0:v.transactionRequest)==null?void 0:I.format,x=(w||Ln)({...Ar(p,{format:w}),account:y,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:l,maxPriorityFeePerGas:d,to:f,value:h},"createAccessList"),E=await t.request({method:"eth_createAccessList",params:[x,m]});return{accessList:E.accessList,gasUsed:BigInt(E.gasUsed)}}catch(g){throw Zc(g,{...e,account:y,chain:t.chain})}}async function wy(t){const e=xr(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}async function ou(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),u=xr(t,{method:"eth_newFilter"});let l=[];c&&(l=[c.flatMap(h=>Nn({abi:[h],eventName:h.name,args:n}))],r&&(l=l[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?L(i):i,toBlock:typeof a=="bigint"?L(a):a,...l.length?{topics:l}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:u(d),strict:!!o,toBlock:a,type:"event"}}async function au(t){const e=xr(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function vy(t,{address:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest"}){const s=typeof n=="bigint"?L(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function _y(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}async function xy(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?L(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),je(i)}async function js(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?L(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}class Iy extends A{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function Ey(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,u,l,d]=await F(t,xe,"readContract")({abi:Ay,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:u,salt:l},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new Iy({address:n}):o}}const Ay=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function Py(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function ky(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?L(n):void 0,o=await t.request({method:"eth_feeHistory",params:[L(e),i||r,s]},{dedupe:!!i});return Py(o)}async function $y(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>Ge(i));return e.abi?$i({abi:e.abi,logs:s,strict:n}):s}async function Ty({address:t,authorization:e,signature:n}){return Pr(Xa(t),await bc({authorization:e,signature:n}))}const Kn=new vr(8192);function Sy(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(Kn.get(n))return Kn.get(n);const r=t().finally(()=>Kn.delete(n));return Kn.set(n,r),r}function Oy(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:u}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(u))throw new ut(new Error("method not supported"),{method:u});if(i!=null&&i.include&&!i.include.includes(u))throw new ut(new Error("method not supported"),{method:u});const l=s?on(`${c}.${J(n)}`):void 0;return Sy(()=>Ls(async()=>{try{return await t(n)}catch(f){const h=f;switch(h.code){case un.code:throw new un(h);case ln.code:throw new ln(h);case dn.code:throw new dn(h,{method:n.method});case fn.code:throw new fn(h);case yt.code:throw new yt(h);case nt.code:throw new nt(h);case hn.code:throw new hn(h);case pn.code:throw new pn(h);case yn.code:throw new yn(h);case ut.code:throw new ut(h,{method:n.method});case qt.code:throw new qt(h);case mn.code:throw new mn(h);case Ut.code:throw new Ut(h);case bn.code:throw new bn(h);case gn.code:throw new gn(h);case wn.code:throw new wn(h);case vn.code:throw new vn(h);case _n.code:throw new _n(h);case xn.code:throw new xn(h);case In.code:throw new In(h);case En.code:throw new En(h);case An.code:throw new An(h);case Pn.code:throw new Pn(h);case kn.code:throw new kn(h);case $n.code:throw new $n(h);case 5e3:throw new Ut(h);default:throw f instanceof A?f:new gh(h)}}},{delay:({count:f,error:h})=>{var p;if(h&&h instanceof sn){const y=(p=h==null?void 0:h.headers)==null?void 0:p.get("Retry-After");if(y!=null&&y.match(/\d/))return Number.parseInt(y,10)*1e3}return~~(1<<f)*o},retryCount:a,shouldRetry:({error:f})=>By(f)}),{enabled:s,id:l})}}function By(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===qt.code||t.code===yt.code:t instanceof sn&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Cy(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r&&a.abort()},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function Ry(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const Uo=Ry();function Ny(t,e={}){return{async request(n){var f;const{body:r,fetchFn:s=e.fetchFn??fetch,onRequest:i=e.onRequest,onResponse:o=e.onResponse,timeout:a=e.timeout??1e4}=n,c={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:u,method:l,signal:d}=c;try{const h=await Cy(async({signal:y})=>{const b={...c,body:Array.isArray(r)?J(r.map(m=>({jsonrpc:"2.0",id:m.id??Uo.take(),...m}))):J({jsonrpc:"2.0",id:r.id??Uo.take(),...r}),headers:{"Content-Type":"application/json",...u},method:l||"POST",signal:d||(a>0?y:null)},v=new Request(t,b),I=await(i==null?void 0:i(v,b))??{...b,url:t};return await s(I.url??t,I)},{errorInstance:new vo({body:r,url:t}),timeout:a,signal:!0});o&&await o(h);let p;if((f=h.headers.get("Content-Type"))!=null&&f.startsWith("application/json"))p=await h.json();else{p=await h.text();try{p=JSON.parse(p||"{}")}catch(y){if(h.ok)throw y;p={error:p}}}if(!h.ok)throw new sn({body:r,details:J(p.error)||h.statusText,headers:h.headers,status:h.status,url:t});return p}catch(h){throw h instanceof sn||h instanceof vo?h:new sn({body:r,cause:h,url:t})}}}}const My=`Ethereum Signed Message:
`;function Uy(t){const e=typeof t=="string"?on(t):typeof t.raw=="string"?t.raw:W(t.raw),n=on(`${My}${V(e)}`);return Be([n,e])}function cu(t,e){return Y(Uy(t),e)}class Fy extends A{constructor({domain:e}){super(`Invalid domain "${J(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Ly extends A{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class zy extends A{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Dy(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:u,type:l}=c,d=a[u],f=l.match(nc);if(f&&(typeof d=="number"||typeof d=="bigint")){const[y,b,v]=f;L(d,{signed:b==="int",size:Number.parseInt(v,10)/8})}if(l==="address"&&typeof d=="string"&&!me(d))throw new tt({address:d});const h=l.match(R0);if(h){const[y,b]=h;if(b&&V(d)!==Number.parseInt(b,10))throw new jf({expectedSize:Number.parseInt(b,10),givenSize:V(d)})}const p=s[l];p&&(Gy(l),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new Fy({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new Ly({primaryType:r,types:s})}function jy({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Gy(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new zy({type:t})}function qy(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:jy({domain:e}),...t.types};Dy({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(Vy({domain:e,types:s})),r!=="EIP712Domain"&&i.push(uu({data:n,primaryType:r,types:s})),Y(Be(i))}function Vy({domain:t,types:e}){return uu({data:t,primaryType:"EIP712Domain",types:e})}function uu({data:t,primaryType:e,types:n}){const r=lu({data:t,primaryType:e,types:n});return Y(r)}function lu({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[Hy({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=fu({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return wt(r,s)}function Hy({primaryType:t,types:e}){const n=Se(Wy({primaryType:t,types:e}));return Y(n)}function Wy({primaryType:t,types:e}){let n="";const r=du({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function du({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])du({primaryType:i.type,types:e},n);return n}function fu({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},Y(lu({data:r,primaryType:n,types:t}))];if(n==="bytes")return[{type:"bytes32"},Y(r)];if(n==="string")return[{type:"bytes32"},Y(Se(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>fu({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},Y(wt(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}class Ky extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Zy={checksum:new Ky(8192)},Qr=Zy.checksum;function hu(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=Ya(fp(t));return n==="Bytes"?r:_e(r)}const Yy=/^0x[a-fA-F0-9]{40}$/;function Br(t,e={}){const{strict:n=!0}=e;if(!Yy.test(t))throw new Fo({address:t,cause:new Jy});if(n){if(t.toLowerCase()===t)return;if(pu(t)!==t)throw new Fo({address:t,cause:new Xy})}}function pu(t){if(Qr.has(t))return Qr.get(t);Br(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=hu(pp(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return Qr.set(t,s),s}function Gs(t,e={}){const{strict:n=!0}=e??{};try{return Br(t,{strict:n}),!0}catch{return!1}}class Fo extends z{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class Jy extends z{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class Xy extends z{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const Qy=/^(.*)\[([0-9]*)\]$/,em=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,yu=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Lo=2n**256n-1n;function Ft(t,e,n){const{checksumAddress:r,staticPosition:s}=n,i=Li(e.type);if(i){const[o,a]=i;return nm(t,{...e,type:a},{checksumAddress:r,length:o,staticPosition:s})}if(e.type==="tuple")return om(t,e,{checksumAddress:r,staticPosition:s});if(e.type==="address")return tm(t,{checksum:r});if(e.type==="bool")return rm(t);if(e.type.startsWith("bytes"))return sm(t,e,{staticPosition:s});if(e.type.startsWith("uint")||e.type.startsWith("int"))return im(t,e);if(e.type==="string")return am(t,{staticPosition:s});throw new Di(e.type)}const zo=32,qs=32;function tm(t,e={}){const{checksum:n=!1}=e,r=t.readBytes(32);return[(i=>n?pu(i):i)(_e(mp(r,-20))),32]}function nm(t,e,n){const{checksumAddress:r,length:s,staticPosition:i}=n;if(!s){const c=ze(t.readBytes(qs)),u=i+c,l=u+zo;t.setPosition(u);const d=ze(t.readBytes(zo)),f=Tn(e);let h=0;const p=[];for(let y=0;y<d;++y){t.setPosition(l+(f?y*32:h));const[b,v]=Ft(t,e,{checksumAddress:r,staticPosition:l});h+=v,p.push(b)}return t.setPosition(i+32),[p,32]}if(Tn(e)){const c=ze(t.readBytes(qs)),u=i+c,l=[];for(let d=0;d<s;++d){t.setPosition(u+d*32);const[f]=Ft(t,e,{checksumAddress:r,staticPosition:u});l.push(f)}return t.setPosition(i+32),[l,32]}let o=0;const a=[];for(let c=0;c<s;++c){const[u,l]=Ft(t,e,{checksumAddress:r,staticPosition:i+o});o+=l,a.push(u)}return[a,o]}function rm(t){return[gp(t.readBytes(32),{size:32}),32]}function sm(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=ze(t.readBytes(32));t.setPosition(n+o);const a=ze(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[_e(c),32]}return[_e(t.readBytes(Number.parseInt(s,10),32)),32]}function im(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256",10),s=t.readBytes(32);return[r>48?bp(s,{signed:n}):ze(s,{signed:n}),32]}function om(t,e,n){const{checksumAddress:r,staticPosition:s}=n,i=e.components.length===0||e.components.some(({name:c})=>!c),o=i?[]:{};let a=0;if(Tn(e)){const c=ze(t.readBytes(qs)),u=s+c;for(let l=0;l<e.components.length;++l){const d=e.components[l];t.setPosition(u+a);const[f,h]=Ft(t,d,{checksumAddress:r,staticPosition:u});a+=h,o[i?l:d==null?void 0:d.name]=f}return t.setPosition(s+32),[o,32]}for(let c=0;c<e.components.length;++c){const u=e.components[c],[l,d]=Ft(t,u,{checksumAddress:r,staticPosition:s});o[i?c:u==null?void 0:u.name]=l,a+=d}return[o,a]}function am(t,{staticPosition:e}){const n=ze(t.readBytes(32)),r=e+n;t.setPosition(r);const s=ze(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=wp(Uc(i));return t.setPosition(e+32),[o,32]}function cm({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(Ui({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function Ui({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=Li(r.type);if(s){const[i,o]=s;return lm(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return ym(n,{checksumAddress:t,parameter:r});if(r.type==="address")return um(n,{checksum:t});if(r.type==="bool")return fm(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=yu.exec(r.type)??[];return hm(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return dm(n,{type:r.type});if(r.type==="string")return pm(n);throw new Di(r.type)}function Fi(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=fe(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(te(e+s,{size:32})),r.push(a),s+=fe(a)):n.push(a)}return ve(...n,...r)}function um(t,e){const{checksum:n=!1}=e;return Br(t,{strict:n}),{dynamic:!1,encoded:mt(t.toLowerCase())}}function lm(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new Em(t);if(!i&&t.length!==r)throw new Im({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const u=Ui({checksumAddress:n,parameter:s,value:t[c]});u.dynamic&&(o=!0),a.push(u)}if(i||o){const c=Fi(a);if(i){const u=te(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?ve(u,c):u}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:ve(...a.map(({encoded:c})=>c))}}function dm(t,{type:e}){const[,n]=e.split("bytes"),r=fe(t);if(!n){let s=t;return r%32!==0&&(s=bt(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:ve(mt(te(r,{size:32})),s)}}if(r!==Number.parseInt(n,10))throw new bu({expectedSize:Number.parseInt(n,10),value:t});return{dynamic:!1,encoded:bt(t)}}function fm(t){if(typeof t!="boolean")throw new z(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:mt(Fc(t))}}function hm(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new Dc({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:te(t,{size:32,signed:e})}}function pm(t){const e=Si(t),n=Math.ceil(fe(e)/32),r=[];for(let s=0;s<n;s++)r.push(bt($e(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:ve(bt(te(fe(e),{size:32})),...r)}}function ym(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,u=Ui({checksumAddress:n,parameter:a,value:t[c]});i.push(u),u.dynamic&&(s=!0)}return{dynamic:s,encoded:s?Fi(i):ve(...i.map(({encoded:o})=>o))}}function Li(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function Tn(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(Tn);const n=Li(t.type);return!!(n&&Tn({...t,type:n[1]}))}const mm={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new wm({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new gm({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new Do({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new Do({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function bm(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(mm);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}class Do extends z{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}class gm extends z{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}class wm extends z{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}function vm(t,e,n={}){const{as:r="Array",checksumAddress:s=!1}=n,i=typeof e=="string"?Mc(e):e,o=bm(i);if(Ct(i)===0&&t.length>0)throw new xm;if(Ct(i)&&Ct(i)<32)throw new _m({data:typeof e=="string"?e:_e(e),parameters:t,size:Ct(i)});let a=0;const c=r==="Array"?[]:{};for(let u=0;u<t.length;++u){const l=t[u];o.setPosition(a);const[d,f]=Ft(o,l,{checksumAddress:s,staticPosition:0});a+=f,r==="Array"?c.push(d):c[l.name??u]=d}return c}function zi(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new gu({expectedLength:t.length,givenLength:e.length});const s=cm({checksumAddress:r,parameters:t,values:e}),i=Fi(s);return i.length===0?"0x":i}function Vs(t,e){if(t.length!==e.length)throw new gu({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(Vs.encode(s,i))}return ve(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return Br(c),mt(c.toLowerCase(),s?32:0)}if(n==="string")return Si(r);if(n==="bytes")return r;if(n==="bool")return mt(Fc(r),s?32:1);const i=n.match(yu);if(i){const[c,u,l="256"]=i,d=Number.parseInt(l,10)/8;return te(r,{size:s?32:d,signed:u==="int"})}const o=n.match(em);if(o){const[c,u]=o;if(Number.parseInt(u,10)!==(r.length-2)/2)throw new bu({expectedSize:Number.parseInt(u,10),value:r});return bt(r,s?32:0)}const a=n.match(Qy);if(a&&Array.isArray(r)){const[c,u]=a,l=[];for(let d=0;d<r.length;d++)l.push(e(u,r[d],!0));return l.length===0?"0x":ve(...l)}throw new Di(n)}t.encode=e})(Vs||(Vs={}));function mu(t){return Array.isArray(t)&&typeof t[0]=="string"||typeof t=="string"?ro(t):t}class _m extends z{constructor({data:e,parameters:n,size:r}){super(`Data size of ${r} bytes is too small for given parameters.`,{metaMessages:[`Params: (${Ot(n)})`,`Data:   ${e} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}class xm extends z{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}class Im extends z{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class bu extends z{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${fe(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class gu extends z{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class Em extends z{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class Di extends z{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}class wu extends fi{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,l0(e);const r=gr(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),jt(i)}update(e){return Dt(this),this.iHash.update(e),this}digestInto(e){Dt(this),pt(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const vu=(t,e,n)=>new wu(t,e).update(n).digest();vu.create=(t,e)=>new wu(t,e);function _u(t,e={}){const{recovered:n}=e;if(typeof t.r>"u")throw new es({signature:t});if(typeof t.s>"u")throw new es({signature:t});if(n&&typeof t.yParity>"u")throw new es({signature:t});if(t.r<0n||t.r>Lo)throw new Om({value:t.r});if(t.s<0n||t.s>Lo)throw new Bm({value:t.s});if(typeof t.yParity=="number"&&t.yParity!==0&&t.yParity!==1)throw new Gi({value:t.yParity})}function Am(t){return xu(_e(t))}function xu(t){if(t.length!==130&&t.length!==132)throw new Sm({signature:t});const e=BigInt($e(t,0,32)),n=BigInt($e(t,32,64)),r=(()=>{const s=+`0x${t.slice(130)}`;if(!Number.isNaN(s))try{return ji(s)}catch{throw new Gi({value:s})}})();return typeof r>"u"?{r:e,s:n}:{r:e,s:n,yParity:r}}function Pm(t){if(!(typeof t.r>"u")&&!(typeof t.s>"u"))return km(t)}function km(t){const e=typeof t=="string"?xu(t):t instanceof Uint8Array?Am(t):typeof t.r=="string"?Tm(t):t.v?$m(t):{r:t.r,s:t.s,...typeof t.yParity<"u"?{yParity:t.yParity}:{}};return _u(e),e}function $m(t){return{r:t.r,s:t.s,yParity:ji(t.v)}}function Tm(t){const e=(()=>{const n=t.v?Number(t.v):void 0;let r=t.yParity?Number(t.yParity):void 0;if(typeof n=="number"&&typeof r!="number"&&(r=ji(n)),typeof r!="number")throw new Gi({value:t.yParity});return r})();return{r:BigInt(t.r),s:BigInt(t.s),yParity:e}}function ji(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new Cm({value:t})}class Sm extends z{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${fe(kp(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class es extends z{constructor({signature:e}){super(`Signature \`${Nc(e)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class Om extends z{constructor({value:e}){super(`Value \`${e}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class Bm extends z{constructor({value:e}){super(`Value \`${e}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class Gi extends z{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class Cm extends z{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}function Rm(t,e={}){return typeof t.chainId=="string"?Nm(t):{...t,...e.signature}}function Nm(t){const{address:e,chainId:n,nonce:r}=t,s=Pm(t);return{address:e,chainId:Number(n),nonce:BigInt(r),...s}}const Mm="0x8010801080108010801080108010801080108010801080108010801080108010",Um=mu("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function Iu(t){if(typeof t=="string"){if($e(t,-32)!==Mm)throw new zm(t)}else _u(t.authorization)}function Fm(t){Iu(t);const e=zc($e(t,-64,-32)),n=$e(t,-e-64,-64),r=$e(t,0,-e-64),[s,i,o]=vm(Um,n);return{authorization:Rm({address:s.delegation,chainId:Number(s.chainId),nonce:s.nonce,yParity:s.yParity,r:s.r,s:s.s}),signature:r,...o&&o!=="0x"?{data:o,to:i}:{}}}function Lm(t){try{return Iu(t),!0}catch{return!1}}let zm=class extends z{constructor(e){super(`Value \`${e}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}};function Dm(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function jm(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?je(t.nonce):void 0,storageProof:t.storageProof?Dm(t.storageProof):void 0}}async function Gm(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?L(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return jm(a)}async function qm(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?L(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function qi(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i,sender:o,nonce:a}){var f,h,p;const c=r||"latest",u=n!==void 0?L(n):void 0;let l=null;if(s?l=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?l=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,L(i)]},{dedupe:!0}):typeof i=="number"?l=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[u||c,L(i)]},{dedupe:!!u}):o&&typeof a=="number"&&(l=await t.request({method:"eth_getTransactionBySenderAndNonce",params:[o,L(a)]},{dedupe:!0})),!l)throw new uc({blockHash:e,blockNumber:n,blockTag:c,hash:s,index:i});return(((p=(h=(f=t.chain)==null?void 0:f.formatters)==null?void 0:h.transaction)==null?void 0:p.format)||Ii)(l,"getTransaction")}async function Vm(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([F(t,jn,"getBlockNumber")({}),e?F(t,qi,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}async function rr(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new lc({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||Qc)(n,"getTransactionReceipt")}async function Hm(t,e){var I;const{account:n,authorizationList:r,allowFailure:s=!0,blockNumber:i,blockOverrides:o,blockTag:a,stateOverride:c}=e,u=e.contracts,{batchSize:l=e.batchSize??1024,deployless:d=e.deployless??!1}=typeof((I=t.batch)==null?void 0:I.multicall)=="object"?t.batch.multicall:{},f=(()=>{if(e.multicallAddress)return e.multicallAddress;if(d)return null;if(t.chain)return Jt({blockNumber:i,chain:t.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),h=[[]];let p=0,y=0;for(let g=0;g<u.length;g++){const{abi:m,address:w,args:P,functionName:x}=u[g];try{const E=Ae({abi:m,args:P,functionName:x});y+=(E.length-2)/2,l>0&&y>l&&h[p].length>0&&(p++,y=(E.length-2)/2,h[p]=[]),h[p]=[...h[p],{allowFailure:!0,callData:E,target:w}]}catch(E){const S=Vt(E,{abi:m,address:w,args:P,docsPath:"/docs/contract/multicall",functionName:x,sender:n});if(!s)throw S;h[p]=[...h[p],{allowFailure:!0,callData:"0x",target:w}]}}const b=await Promise.allSettled(h.map(g=>F(t,xe,"readContract")({...f===null?{code:Oi}:{address:f},abi:ur,account:n,args:[g],authorizationList:r,blockNumber:i,blockOverrides:o,blockTag:a,functionName:"aggregate3",stateOverride:c}))),v=[];for(let g=0;g<b.length;g++){const m=b[g];if(m.status==="rejected"){if(!s)throw m.reason;for(let P=0;P<h[g].length;P++)v.push({status:"failure",error:m.reason,result:void 0});continue}const w=m.value;for(let P=0;P<w.length;P++){const{returnData:x,success:E}=w[P],{callData:S}=h[g][P],{abi:N,address:T,functionName:B,args:O}=u[v.length];try{if(S==="0x")throw new Cn;if(!E)throw new Ir({data:x});const D=_t({abi:N,args:O,data:x,functionName:B});v.push(s?{result:D,status:"success"}:D)}catch(D){const _=Vt(D,{abi:N,address:T,args:O,docsPath:"/docs/contract/multicall",functionName:B});if(!s)throw _;v.push({error:_,result:void 0,status:"failure"})}}}if(v.length!==u.length)throw new A("multicall results mismatch");return v}async function Hs(t,e){const{blockNumber:n,blockTag:r=t.experimental_blockTag??"latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const f of s){const h=f.blockOverrides?Gc(f.blockOverrides):void 0,p=f.calls.map(b=>{const v=b,I=v.account?de(v.account):void 0,g=v.abi?Ae(v):v.data,m={...v,account:I,data:v.dataSuffix?Be([g||"0x",v.dataSuffix]):g,from:v.from??(I==null?void 0:I.address)};return Yt(m),Ln(m)}),y=f.stateOverrides?_i(f.stateOverrides):void 0;c.push({blockOverrides:h,calls:p,stateOverrides:y})}const l=(typeof n=="bigint"?L(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},l]})).map((f,h)=>({..._c(f),calls:f.calls.map((p,y)=>{var N,T;const{abi:b,args:v,functionName:I,to:g}=s[h].calls[y],m=((N=p.error)==null?void 0:N.data)??p.returnData,w=BigInt(p.gasUsed),P=(T=p.logs)==null?void 0:T.map(B=>Ge(B)),x=p.status==="0x1"?"success":"failure",E=b&&x==="success"&&m!=="0x"?_t({abi:b,data:m,functionName:I}):null,S=(()=>{var O;if(x==="success")return;let B;if(((O=p.error)==null?void 0:O.data)==="0x"?B=new Cn:p.error&&(B=new Ir(p.error)),!!B)return Vt(B,{abi:b??[],address:g??"0x",args:v,functionName:I??"<unknown>"})})();return{data:m,gasUsed:w,logs:P,status:x,...x==="success"?{result:E}:{error:S}}})}))}catch(c){const u=c,l=Er(u,{});throw l instanceof Fn?u:l}}function Ws(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new z("Unable to normalize signature.");return s}function Ks(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Gs(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>Ks(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>Ks(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Eu(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return Eu(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Gs(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Gs(n[r],{strict:!1}):!1)return o}}function Au(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?no(t):t;return{...r,...n?{hash:Rt(r)}:{}}}function Cr(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=$p(e,{strict:!1}),o=t.filter(u=>i?u.type==="function"||u.type==="error"?Pu(u)===$e(e,0,4):u.type==="event"?Rt(u)===e:!1:"name"in u&&u.name===e);if(o.length===0)throw new lr({name:e});if(o.length===1)return{...o[0],...s?{hash:Rt(o[0])}:{}};let a;for(const u of o){if(!("inputs"in u))continue;if(!r||r.length===0){if(!u.inputs||u.inputs.length===0)return{...u,...s?{hash:Rt(u)}:{}};continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==r.length)continue;if(r.every((d,f)=>{const h="inputs"in u&&u.inputs[f];return h?Ks(d,h):!1})){if(a&&"inputs"in a&&a.inputs){const d=Eu(u.inputs,a.inputs,r);if(d)throw new Km({abiItem:u,type:d[0]},{abiItem:a,type:d[1]})}a=u}}const c=(()=>{if(a)return a;const[u,...l]=o;return{...u,overloads:l}})();if(!c)throw new lr({name:e});return{...c,...s?{hash:Rt(c)}:{}}}function Pu(...t){const e=(()=>{if(Array.isArray(t[0])){const[n,r]=t;return Cr(n,r)}return t[0]})();return $e(Rt(e),0,4)}function Wm(...t){const e=(()=>{if(Array.isArray(t[0])){const[r,s]=t;return Cr(r,s)}return t[0]})(),n=typeof e=="string"?e:sr(e);return Ws(n)}function Rt(...t){const e=(()=>{if(Array.isArray(t[0])){const[n,r]=t;return Cr(n,r)}return t[0]})();return typeof e!="string"&&"hash"in e&&e.hash?e.hash:hu(Si(Wm(e)))}class Km extends z{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${Ws(sr(e.abiItem))}\`, and`,`\`${n.type}\` in \`${Ws(sr(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class lr extends z{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}function Zm(...t){var i;const[e,n]=(()=>{if(Array.isArray(t[0])){const[o,a]=t;return[Jm(o),a]}return t})(),{bytecode:r,args:s}=n;return ve(r,(i=e.inputs)!=null&&i.length&&(s!=null&&s.length)?zi(e.inputs,s):"0x")}function Ym(t){return Au(t)}function Jm(t){const e=t.find(n=>n.type==="constructor");if(!e)throw new lr({name:"constructor"});return e}function Xm(...t){const[e,n=[]]=(()=>{if(Array.isArray(t[0])){const[u,l,d]=t;return[jo(u,l,{args:d}),d]}const[a,c]=t;return[a,c]})(),{overloads:r}=e,s=r?jo([e,...r],e.name,{args:n}):e,i=Qm(s),o=n.length>0?zi(s.inputs,n):void 0;return o?ve(i,o):i}function At(t,e={}){return Au(t,e)}function jo(t,e,n){const r=Cr(t,e,n);if(r.type!=="function")throw new lr({name:e,type:"function"});return r}function Qm(t){return Pu(t)}const eb="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",ke="0x0000000000000000000000000000000000000000",tb="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function nb(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,u=e.account?de(e.account):void 0;if(o&&!u)throw new A("`account` is required when `traceAssetChanges` is true");const l=u?Zm(Ym("constructor(bytes, bytes)"),{bytecode:Wc,args:[tb,Xm(At("function getBalance(address)"),[u.address])]}):void 0,d=o?await Promise.all(e.calls.map(async $=>{if(!$.data&&!$.abi)return;const{accessList:R}=await iu(t,{account:u.address,...$,data:$.abi?Ae($):$.data});return R.map(({address:M,storageKeys:j})=>j.length>0?M:null)})).then($=>$.flat().filter(Boolean)):[],f=await Hs(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:l}],stateOverrides:i},{calls:d.map(($,R)=>({abi:[At("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:$,from:ke,nonce:R})),stateOverrides:[{address:ke,nonce:0}]}]:[],{calls:[...s,{}].map($=>({...$,from:u==null?void 0:u.address})),stateOverrides:i},...o?[{calls:[{data:l}]},{calls:d.map(($,R)=>({abi:[At("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:$,from:ke,nonce:R})),stateOverrides:[{address:ke,nonce:0}]},{calls:d.map(($,R)=>({to:$,abi:[At("function decimals() returns (uint256)")],functionName:"decimals",from:ke,nonce:R})),stateOverrides:[{address:ke,nonce:0}]},{calls:d.map(($,R)=>({to:$,abi:[At("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:ke,nonce:R})),stateOverrides:[{address:ke,nonce:0}]},{calls:d.map(($,R)=>({to:$,abi:[At("function symbol() returns (string)")],functionName:"symbol",from:ke,nonce:R})),stateOverrides:[{address:ke,nonce:0}]}]:[]],traceTransfers:a,validation:c}),h=o?f[2]:f[0],[p,y,,b,v,I,g,m]=o?f:[],{calls:w,...P}=h,x=w.slice(0,-1)??[],E=(p==null?void 0:p.calls)??[],S=(y==null?void 0:y.calls)??[],N=[...E,...S].map($=>$.status==="success"?Te($.data):null),T=(b==null?void 0:b.calls)??[],B=(v==null?void 0:v.calls)??[],O=[...T,...B].map($=>$.status==="success"?Te($.data):null),D=((I==null?void 0:I.calls)??[]).map($=>$.status==="success"?$.result:null),_=((m==null?void 0:m.calls)??[]).map($=>$.status==="success"?$.result:null),k=((g==null?void 0:g.calls)??[]).map($=>$.status==="success"?$.result:null),C=[];for(const[$,R]of O.entries()){const M=N[$];if(typeof R!="bigint"||typeof M!="bigint")continue;const j=D[$-1],q=_[$-1],Q=k[$-1],X=$===0?{address:eb,decimals:18,symbol:"ETH"}:{address:d[$-1],decimals:Q||j?Number(j??1):void 0,symbol:q??void 0};C.some(H=>H.token.address===X.address)||C.push({token:X,value:{pre:M,post:R,diff:R-M}})}return{assetChanges:C,block:P,results:x}}const ku="0x6492649264926492649264926492649264926492649264926492649264926492";function rb(t){if($e(t,-32)!==ku)throw new ob(t)}function sb(t){const{data:e,signature:n,to:r}=t;return ve(zi(mu("address, bytes, bytes"),[r,e,n]),ku)}function ib(t){try{return rb(t),!0}catch{return!1}}class ob extends z{constructor(e){super(`Value \`${e}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vi=BigInt(0),Zs=BigInt(1);function Gn(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Hi(t){if(!Gn(t))throw new Error("Uint8Array expected")}function Sn(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Zn(t){const e=t.toString(16);return e.length&1?"0"+e:e}function $u(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Vi:BigInt("0x"+t)}const Tu=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",ab=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function On(t){if(Hi(t),Tu)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=ab[t[n]];return e}const Ne={_0:48,_9:57,A:65,F:70,a:97,f:102};function Go(t){if(t>=Ne._0&&t<=Ne._9)return t-Ne._0;if(t>=Ne.A&&t<=Ne.F)return t-(Ne.A-10);if(t>=Ne.a&&t<=Ne.f)return t-(Ne.a-10)}function dr(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Tu)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Go(t.charCodeAt(i)),a=Go(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function ht(t){return $u(On(t))}function Su(t){return Hi(t),$u(On(Uint8Array.from(t).reverse()))}function qn(t,e){return dr(t.toString(16).padStart(e*2,"0"))}function Ou(t,e){return qn(t,e).reverse()}function ye(t,e,n){let r;if(typeof e=="string")try{r=dr(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Gn(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function fr(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Hi(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const ts=t=>typeof t=="bigint"&&Vi<=t;function Wi(t,e,n){return ts(t)&&ts(e)&&ts(n)&&e<=t&&t<n}function Lt(t,e,n,r){if(!Wi(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function cb(t){let e;for(e=0;t>Vi;t>>=Zs,e+=1);return e}const Rr=t=>(Zs<<BigInt(t))-Zs,ns=t=>new Uint8Array(t),qo=t=>Uint8Array.from(t);function ub(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=ns(t),s=ns(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=ns(0))=>{s=a(qo([0]),d),r=a(),d.length!==0&&(s=a(qo([1]),d),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){r=a();const h=r.slice();f.push(h),d+=r.length}return fr(...f)};return(d,f)=>{o(),c(d);let h;for(;!(h=f(u()));)c();return o(),h}}const lb={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Gn(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Nr(t,e,n={}){const r=(s,i,o)=>{const a=lb[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function Vo(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ie=BigInt(0),ne=BigInt(1),lt=BigInt(2),db=BigInt(3),Bu=BigInt(4),Cu=BigInt(5),Ru=BigInt(8);function se(t,e){const n=t%e;return n>=ie?n:e+n}function pe(t,e,n){let r=t;for(;e-- >ie;)r*=r,r%=n;return r}function Ys(t,e){if(t===ie)throw new Error("invert: expected non-zero number");if(e<=ie)throw new Error("invert: expected positive modulus, got "+e);let n=se(t,e),r=e,s=ie,i=ne;for(;n!==ie;){const a=r/n,c=r%n,u=s-i*a;r=n,n=c,s=i,i=u}if(r!==ne)throw new Error("invert: does not exist");return se(s,e)}function Nu(t,e){const n=(t.ORDER+ne)/Bu,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function fb(t,e){const n=(t.ORDER-Cu)/Ru,r=t.mul(e,lt),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,lt),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function hb(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-ne,n=0;for(;e%lt===ie;)e/=lt,n++;let r=lt;const s=Ki(t);for(;Ho(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Nu;let i=s.pow(r,e);const o=(e+ne)/lt;return function(c,u){if(c.is0(u))return u;if(Ho(c,u)!==1)throw new Error("Cannot find square root");let l=n,d=c.mul(c.ONE,i),f=c.pow(u,e),h=c.pow(u,o);for(;!c.eql(f,c.ONE);){if(c.is0(f))return c.ZERO;let p=1,y=c.sqr(f);for(;!c.eql(y,c.ONE);)if(p++,y=c.sqr(y),p===l)throw new Error("Cannot find square root");const b=ne<<BigInt(l-p-1),v=c.pow(d,b);l=p,d=c.sqr(v),f=c.mul(f,d),h=c.mul(h,v)}return h}}function pb(t){return t%Bu===db?Nu:t%Ru===Cu?fb:hb(t)}const yb=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function mb(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=yb.reduce((r,s)=>(r[s]="function",r),e);return Nr(t,n)}function bb(t,e,n){if(n<ie)throw new Error("invalid exponent, negatives unsupported");if(n===ie)return t.ONE;if(n===ne)return e;let r=t.ONE,s=e;for(;n>ie;)n&ne&&(r=t.mul(r,s)),s=t.sqr(s),n>>=ne;return r}function Mu(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function Ho(t,e){const n=(t.ORDER-ne)/lt,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Uu(t,e){e!==void 0&&an(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Ki(t,e,n=!1,r={}){if(t<=ie)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=Uu(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:Rr(s),ZERO:ie,ONE:ne,create:c=>se(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ie<=c&&c<t},is0:c=>c===ie,isOdd:c=>(c&ne)===ne,neg:c=>se(-c,t),eql:(c,u)=>c===u,sqr:c=>se(c*c,t),add:(c,u)=>se(c+u,t),sub:(c,u)=>se(c-u,t),mul:(c,u)=>se(c*u,t),pow:(c,u)=>bb(a,c,u),div:(c,u)=>se(c*Ys(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Ys(c,t),sqrt:r.sqrt||(c=>(o||(o=pb(t)),o(a,c))),toBytes:c=>n?Ou(c,i):qn(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?Su(c):ht(c)},invertBatch:c=>Mu(a,c),cmov:(c,u,l)=>l?u:c});return Object.freeze(a)}function Fu(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Lu(t){const e=Fu(t);return e+Math.ceil(e/2)}function gb(t,e,n=!1){const r=t.length,s=Fu(e),i=Lu(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?Su(t):ht(t),a=se(o,e-ne)+ne;return n?Ou(a,s):qn(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wo=BigInt(0),Js=BigInt(1);function rs(t,e){const n=e.negate();return t?n:e}function zu(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function ss(t,e){zu(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=Rr(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function Ko(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Js);const u=e*r,l=u+Math.abs(a)-1,d=a===0,f=a<0,h=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:f,isNegF:h,offsetF:u}}function wb(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function vb(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const is=new WeakMap,Du=new WeakMap;function os(t){return Du.get(t)||1}function _b(t,e){return{constTimeNegate:rs,hasPrecomputes(n){return os(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Wo;)r&Js&&(s=s.add(i)),i=i.double(),r>>=Js;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=ss(r,e),o=[];let a=n,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=ss(n,e);for(let c=0;c<a.windows;c++){const{nextN:u,offset:l,isZero:d,isNeg:f,isNegF:h,offsetF:p}=Ko(s,c,a);s=u,d?o=o.add(rs(h,r[p])):i=i.add(rs(f,r[l]))}return{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=ss(n,e);for(let a=0;a<o.windows&&s!==Wo;a++){const{nextN:c,offset:u,isZero:l,isNeg:d}=Ko(s,a,o);if(s=c,!l){const f=r[u];i=i.add(d?f.negate():f)}}return i},getPrecomputes(n,r,s){let i=is.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&is.set(r,s(i))),i},wNAFCached(n,r,s){const i=os(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=os(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){zu(r,e),Du.set(n,r),is.delete(n)}}}function xb(t,e,n,r){wb(n,t),vb(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=cb(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=Rr(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let h=d;h>=0;h-=c){l.fill(o);for(let y=0;y<i;y++){const b=r[y],v=Number(b>>BigInt(h)&u);l[v]=l[v].add(n[y])}let p=o;for(let y=l.length-1,b=o;y>0;y--)b=b.add(l[y]),p=p.add(b);if(f=f.add(p),h!==0)for(let y=0;y<c;y++)f=f.double()}return f}function ju(t){return mb(t.Fp),Nr(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Uu(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Zo(t){t.lowS!==void 0&&Sn("lowS",t.lowS),t.prehash!==void 0&&Sn("prehash",t.prehash)}function Ib(t){const e=ju(t);Nr(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}class Eb extends Error{constructor(e=""){super(e)}}const Ue={Err:Eb,_tlv:{encode:(t,e)=>{const{Err:n}=Ue;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Zn(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Zn(s.length/2|128):"";return Zn(t)+i+s+e},decode(t,e){const{Err:n}=Ue;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Ue;if(t<Fe)throw new e("integer: negative integers are not allowed");let n=Zn(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Ue;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return ht(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Ue,s=ye("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:u,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=Ue,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}};function as(t,e){return On(qn(t,e))}const Fe=BigInt(0),K=BigInt(1);BigInt(2);const cs=BigInt(3),Ab=BigInt(4);function Pb(t){const e=Ib(t),{Fp:n}=e,r=Ki(e.n,e.nBitLength),s=e.toBytes||((g,m,w)=>{const P=m.toAffine();return fr(Uint8Array.from([4]),n.toBytes(P.x),n.toBytes(P.y))}),i=e.fromBytes||(g=>{const m=g.subarray(1),w=n.fromBytes(m.subarray(0,n.BYTES)),P=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:w,y:P}});function o(g){const{a:m,b:w}=e,P=n.sqr(g),x=n.mul(P,g);return n.add(n.add(x,n.mul(g,m)),w)}function a(g,m){const w=n.sqr(m),P=o(g);return n.eql(w,P)}if(!a(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(e.a,cs),Ab),u=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(c,u)))throw new Error("bad curve params: a or b");function l(g){return Wi(g,K,e.n)}function d(g){const{allowedPrivateKeyLengths:m,nByteLength:w,wrapPrivateKey:P,n:x}=e;if(m&&typeof g!="bigint"){if(Gn(g)&&(g=On(g)),typeof g!="string"||!m.includes(g.length))throw new Error("invalid private key");g=g.padStart(w*2,"0")}let E;try{E=typeof g=="bigint"?g:ht(ye("private key",g,w))}catch{throw new Error("invalid private key, expected hex or "+w+" bytes, got "+typeof g)}return P&&(E=se(E,x)),Lt("private key",E,K,x),E}function f(g){if(!(g instanceof y))throw new Error("ProjectivePoint expected")}const h=Vo((g,m)=>{const{px:w,py:P,pz:x}=g;if(n.eql(x,n.ONE))return{x:w,y:P};const E=g.is0();m==null&&(m=E?n.ONE:n.inv(x));const S=n.mul(w,m),N=n.mul(P,m),T=n.mul(x,m);if(E)return{x:n.ZERO,y:n.ZERO};if(!n.eql(T,n.ONE))throw new Error("invZ was invalid");return{x:S,y:N}}),p=Vo(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:m,y:w}=g.toAffine();if(!n.isValid(m)||!n.isValid(w))throw new Error("bad point: x or y not FE");if(!a(m,w))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class y{constructor(m,w,P){if(m==null||!n.isValid(m))throw new Error("x required");if(w==null||!n.isValid(w)||n.is0(w))throw new Error("y required");if(P==null||!n.isValid(P))throw new Error("z required");this.px=m,this.py=w,this.pz=P,Object.freeze(this)}static fromAffine(m){const{x:w,y:P}=m||{};if(!m||!n.isValid(w)||!n.isValid(P))throw new Error("invalid affine point");if(m instanceof y)throw new Error("projective point not allowed");const x=E=>n.eql(E,n.ZERO);return x(w)&&x(P)?y.ZERO:new y(w,P,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const w=Mu(n,m.map(P=>P.pz));return m.map((P,x)=>P.toAffine(w[x])).map(y.fromAffine)}static fromHex(m){const w=y.fromAffine(i(ye("pointHex",m)));return w.assertValidity(),w}static fromPrivateKey(m){return y.BASE.multiply(d(m))}static msm(m,w){return xb(y,r,m,w)}_setWindowSize(m){I.setWindowSize(this,m)}assertValidity(){p(this)}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){f(m);const{px:w,py:P,pz:x}=this,{px:E,py:S,pz:N}=m,T=n.eql(n.mul(w,N),n.mul(E,x)),B=n.eql(n.mul(P,N),n.mul(S,x));return T&&B}negate(){return new y(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:w}=e,P=n.mul(w,cs),{px:x,py:E,pz:S}=this;let N=n.ZERO,T=n.ZERO,B=n.ZERO,O=n.mul(x,x),D=n.mul(E,E),_=n.mul(S,S),k=n.mul(x,E);return k=n.add(k,k),B=n.mul(x,S),B=n.add(B,B),N=n.mul(m,B),T=n.mul(P,_),T=n.add(N,T),N=n.sub(D,T),T=n.add(D,T),T=n.mul(N,T),N=n.mul(k,N),B=n.mul(P,B),_=n.mul(m,_),k=n.sub(O,_),k=n.mul(m,k),k=n.add(k,B),B=n.add(O,O),O=n.add(B,O),O=n.add(O,_),O=n.mul(O,k),T=n.add(T,O),_=n.mul(E,S),_=n.add(_,_),O=n.mul(_,k),N=n.sub(N,O),B=n.mul(_,D),B=n.add(B,B),B=n.add(B,B),new y(N,T,B)}add(m){f(m);const{px:w,py:P,pz:x}=this,{px:E,py:S,pz:N}=m;let T=n.ZERO,B=n.ZERO,O=n.ZERO;const D=e.a,_=n.mul(e.b,cs);let k=n.mul(w,E),C=n.mul(P,S),$=n.mul(x,N),R=n.add(w,P),M=n.add(E,S);R=n.mul(R,M),M=n.add(k,C),R=n.sub(R,M),M=n.add(w,x);let j=n.add(E,N);return M=n.mul(M,j),j=n.add(k,$),M=n.sub(M,j),j=n.add(P,x),T=n.add(S,N),j=n.mul(j,T),T=n.add(C,$),j=n.sub(j,T),O=n.mul(D,M),T=n.mul(_,$),O=n.add(T,O),T=n.sub(C,O),O=n.add(C,O),B=n.mul(T,O),C=n.add(k,k),C=n.add(C,k),$=n.mul(D,$),M=n.mul(_,M),C=n.add(C,$),$=n.sub(k,$),$=n.mul(D,$),M=n.add(M,$),k=n.mul(C,M),B=n.add(B,k),k=n.mul(j,M),T=n.mul(R,T),T=n.sub(T,k),k=n.mul(R,C),O=n.mul(j,O),O=n.add(O,k),new y(T,B,O)}subtract(m){return this.add(m.negate())}is0(){return this.equals(y.ZERO)}wNAF(m){return I.wNAFCached(this,m,y.normalizeZ)}multiplyUnsafe(m){const{endo:w,n:P}=e;Lt("scalar",m,Fe,P);const x=y.ZERO;if(m===Fe)return x;if(this.is0()||m===K)return this;if(!w||I.hasPrecomputes(this))return I.wNAFCachedUnsafe(this,m,y.normalizeZ);let{k1neg:E,k1:S,k2neg:N,k2:T}=w.splitScalar(m),B=x,O=x,D=this;for(;S>Fe||T>Fe;)S&K&&(B=B.add(D)),T&K&&(O=O.add(D)),D=D.double(),S>>=K,T>>=K;return E&&(B=B.negate()),N&&(O=O.negate()),O=new y(n.mul(O.px,w.beta),O.py,O.pz),B.add(O)}multiply(m){const{endo:w,n:P}=e;Lt("scalar",m,K,P);let x,E;if(w){const{k1neg:S,k1:N,k2neg:T,k2:B}=w.splitScalar(m);let{p:O,f:D}=this.wNAF(N),{p:_,f:k}=this.wNAF(B);O=I.constTimeNegate(S,O),_=I.constTimeNegate(T,_),_=new y(n.mul(_.px,w.beta),_.py,_.pz),x=O.add(_),E=D.add(k)}else{const{p:S,f:N}=this.wNAF(m);x=S,E=N}return y.normalizeZ([x,E])[0]}multiplyAndAddUnsafe(m,w,P){const x=y.BASE,E=(N,T)=>T===Fe||T===K||!N.equals(x)?N.multiplyUnsafe(T):N.multiply(T),S=E(this,w).add(E(m,P));return S.is0()?void 0:S}toAffine(m){return h(this,m)}isTorsionFree(){const{h:m,isTorsionFree:w}=e;if(m===K)return!0;if(w)return w(y,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:w}=e;return m===K?this:w?w(y,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return Sn("isCompressed",m),this.assertValidity(),s(y,this,m)}toHex(m=!0){return Sn("isCompressed",m),On(this.toRawBytes(m))}}y.BASE=new y(e.Gx,e.Gy,n.ONE),y.ZERO=new y(n.ZERO,n.ONE,n.ZERO);const{endo:b,nBitLength:v}=e,I=_b(y,b?Math.ceil(v/2):v);return{CURVE:e,ProjectivePoint:y,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:l}}function kb(t){const e=ju(t);return Nr(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function $b(t){const e=kb(t),{Fp:n,n:r,nByteLength:s,nBitLength:i}=e,o=n.BYTES+1,a=2*n.BYTES+1;function c(_){return se(_,r)}function u(_){return Ys(_,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:d,weierstrassEquation:f,isWithinCurveOrder:h}=Pb({...e,toBytes(_,k,C){const $=k.toAffine(),R=n.toBytes($.x),M=fr;return Sn("isCompressed",C),C?M(Uint8Array.from([k.hasEvenY()?2:3]),R):M(Uint8Array.from([4]),R,n.toBytes($.y))},fromBytes(_){const k=_.length,C=_[0],$=_.subarray(1);if(k===o&&(C===2||C===3)){const R=ht($);if(!Wi(R,K,n.ORDER))throw new Error("Point is not on curve");const M=f(R);let j;try{j=n.sqrt(M)}catch(X){const H=X instanceof Error?": "+X.message:"";throw new Error("Point is not on curve"+H)}const q=(j&K)===K;return(C&1)===1!==q&&(j=n.neg(j)),{x:R,y:j}}else if(k===a&&C===4){const R=n.fromBytes($.subarray(0,n.BYTES)),M=n.fromBytes($.subarray(n.BYTES,2*n.BYTES));return{x:R,y:M}}else{const R=o,M=a;throw new Error("invalid Point, expected length of "+R+", or uncompressed "+M+", got "+k)}}});function p(_){const k=r>>K;return _>k}function y(_){return p(_)?c(-_):_}const b=(_,k,C)=>ht(_.slice(k,C));class v{constructor(k,C,$){Lt("r",k,K,r),Lt("s",C,K,r),this.r=k,this.s=C,$!=null&&(this.recovery=$),Object.freeze(this)}static fromCompact(k){const C=s;return k=ye("compactSignature",k,C*2),new v(b(k,0,C),b(k,C,2*C))}static fromDER(k){const{r:C,s:$}=Ue.toSig(ye("DER",k));return new v(C,$)}assertValidity(){}addRecoveryBit(k){return new v(this.r,this.s,k)}recoverPublicKey(k){const{r:C,s:$,recovery:R}=this,M=x(ye("msgHash",k));if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");const j=R===2||R===3?C+e.n:C;if(j>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const q=R&1?"03":"02",Q=l.fromHex(q+as(j,n.BYTES)),X=u(j),H=c(-M*X),ee=c($*X),Ve=l.BASE.multiplyAndAddUnsafe(Q,H,ee);if(!Ve)throw new Error("point at infinify");return Ve.assertValidity(),Ve}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return dr(this.toDERHex())}toDERHex(){return Ue.hexFromSig(this)}toCompactRawBytes(){return dr(this.toCompactHex())}toCompactHex(){const k=s;return as(this.r,k)+as(this.s,k)}}const I={isValidPrivateKey(_){try{return d(_),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const _=Lu(e.n);return gb(e.randomBytes(_),e.n)},precompute(_=8,k=l.BASE){return k._setWindowSize(_),k.multiply(BigInt(3)),k}};function g(_,k=!0){return l.fromPrivateKey(_).toRawBytes(k)}function m(_){if(typeof _=="bigint")return!1;if(_ instanceof l)return!0;const C=ye("key",_).length,$=n.BYTES,R=$+1,M=2*$+1;if(!(e.allowedPrivateKeyLengths||s===R))return C===R||C===M}function w(_,k,C=!0){if(m(_)===!0)throw new Error("first arg must be private key");if(m(k)===!1)throw new Error("second arg must be public key");return l.fromHex(k).multiply(d(_)).toRawBytes(C)}const P=e.bits2int||function(_){if(_.length>8192)throw new Error("input is too large");const k=ht(_),C=_.length*8-i;return C>0?k>>BigInt(C):k},x=e.bits2int_modN||function(_){return c(P(_))},E=Rr(i);function S(_){return Lt("num < 2^"+i,_,Fe,E),qn(_,s)}function N(_,k,C=T){if(["recovered","canonical"].some(st=>st in C))throw new Error("sign() legacy options not supported");const{hash:$,randomBytes:R}=e;let{lowS:M,prehash:j,extraEntropy:q}=C;M==null&&(M=!0),_=ye("msgHash",_),Zo(C),j&&(_=ye("prehashed msgHash",$(_)));const Q=x(_),X=d(k),H=[S(X),S(Q)];if(q!=null&&q!==!1){const st=q===!0?R(n.BYTES):q;H.push(ye("extraEntropy",st))}const ee=fr(...H),Ve=Q;function Ur(st){const xt=P(st);if(!h(xt))return;const Fr=u(xt),Xt=l.BASE.multiply(xt).toAffine(),it=c(Xt.x);if(it===Fe)return;const Qt=c(Fr*c(Ve+it*X));if(Qt===Fe)return;let en=(Xt.x===it?0:2)|Number(Xt.y&K),It=Qt;return M&&p(Qt)&&(It=y(Qt),en^=1),new v(it,It,en)}return{seed:ee,k2sig:Ur}}const T={lowS:e.lowS,prehash:!1},B={lowS:e.lowS,prehash:!1};function O(_,k,C=T){const{seed:$,k2sig:R}=N(_,k,C),M=e;return ub(M.hash.outputLen,M.nByteLength,M.hmac)($,R)}l.BASE._setWindowSize(8);function D(_,k,C,$=B){var en;const R=_;k=ye("msgHash",k),C=ye("publicKey",C);const{lowS:M,prehash:j,format:q}=$;if(Zo($),"strict"in $)throw new Error("options.strict was renamed to lowS");if(q!==void 0&&q!=="compact"&&q!=="der")throw new Error("format must be compact or der");const Q=typeof R=="string"||Gn(R),X=!Q&&!q&&typeof R=="object"&&R!==null&&typeof R.r=="bigint"&&typeof R.s=="bigint";if(!Q&&!X)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let H,ee;try{if(X&&(H=new v(R.r,R.s)),Q){try{q!=="compact"&&(H=v.fromDER(R))}catch(It){if(!(It instanceof Ue.Err))throw It}!H&&q!=="der"&&(H=v.fromCompact(R))}ee=l.fromHex(C)}catch{return!1}if(!H||M&&H.hasHighS())return!1;j&&(k=e.hash(k));const{r:Ve,s:Ur}=H,st=x(k),xt=u(Ur),Fr=c(st*xt),Xt=c(Ve*xt),it=(en=l.BASE.multiplyAndAddUnsafe(ee,Fr,Xt))==null?void 0:en.toAffine();return it?c(it.x)===Ve:!1}return{CURVE:e,getPublicKey:g,getSharedSecret:w,sign:O,verify:D,ProjectivePoint:l,Signature:v,utils:I}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Tb(t){return{hash:t,hmac:(e,...n)=>vu(t,e,m0(...n)),randomBytes:b0}}function Sb(t,e){const n=r=>$b({...t,...Tb(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gu=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Yo=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ob=BigInt(0),Bb=BigInt(1),Xs=BigInt(2),Jo=(t,e)=>(t+e/Xs)/e;function Cb(t){const e=Gu,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,d=pe(l,n,e)*l%e,f=pe(d,n,e)*l%e,h=pe(f,Xs,e)*u%e,p=pe(h,s,e)*h%e,y=pe(p,i,e)*p%e,b=pe(y,a,e)*y%e,v=pe(b,c,e)*b%e,I=pe(v,a,e)*y%e,g=pe(I,n,e)*l%e,m=pe(g,o,e)*p%e,w=pe(m,r,e)*u%e,P=pe(w,Xs,e);if(!Qs.eql(Qs.sqr(P),t))throw new Error("Cannot find square root");return P}const Qs=Ki(Gu,void 0,void 0,{sqrt:Cb}),qu=Sb({a:Ob,b:BigInt(7),Fp:Qs,n:Yo,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Yo,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Bb*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=Jo(i*t,e),c=Jo(-r*t,e);let u=se(t-a*n-c*s,e),l=se(-a*r-c*i,e);const d=u>o,f=l>o;if(d&&(u=e-u),f&&(l=e-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:u,k2neg:f,k2:l}}}},Pc),Rb=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:qu},Symbol.toStringTag,{value:"Module"}));function Nb({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new qu.Signature(Te(t),Te(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:Oe(o)}async function Mr(t,e){var c,u,l,d;const{address:n,chain:r=t.chain,hash:s,erc6492VerifierAddress:i=e.universalSignatureVerifierAddress??((u=(c=r==null?void 0:r.contracts)==null?void 0:c.erc6492Verifier)==null?void 0:u.address),multicallAddress:o=e.multicallAddress??((d=(l=r==null?void 0:r.contracts)==null?void 0:l.multicall3)==null?void 0:d.address)}=e;if(r!=null&&r.verifyHash)return await r.verifyHash(t,e);const a=(()=>{const f=e.signature;return we(f)?f:typeof f=="object"&&"r"in f&&"s"in f?Nb(f):W(f)})();try{return Lm(a)?await Mb(t,{...e,multicallAddress:o,signature:a}):await Ub(t,{...e,verifierAddress:i,signature:a})}catch(f){try{if(Pr(Xa(n),await pc({hash:s,signature:a})))return!0}catch{}if(f instanceof gt)return!1;throw f}}async function Mb(t,e){var b;const{address:n,blockNumber:r,blockTag:s,hash:i,multicallAddress:o}=e,{authorization:a,data:c,signature:u,to:l}=Fm(e.signature);if(await js(t,{address:n,blockNumber:r,blockTag:s})===Zt(["0xef0100",a.address]))return await Fb(t,{address:n,blockNumber:r,blockTag:s,hash:i,signature:u});const f={address:a.address,chainId:Number(a.chainId),nonce:Number(a.nonce),r:L(a.r,{size:32}),s:L(a.s,{size:32}),yParity:a.yParity};if(!await Ty({address:n,authorization:f}))throw new gt;const p=await F(t,xe,"readContract")({...o?{address:o}:{code:Oi},authorizationList:[f],abi:ur,blockNumber:r,blockTag:"pending",functionName:"aggregate3",args:[[...c?[{allowFailure:!0,target:l??n,callData:c}]:[],{allowFailure:!0,target:n,callData:Ae({abi:Hc,functionName:"isValidSignature",args:[i,u]})}]]}),y=(b=p[p.length-1])==null?void 0:b.returnData;if(y!=null&&y.startsWith("0x1626ba7e"))return!0;throw new gt}async function Ub(t,e){const{address:n,factory:r,factoryData:s,hash:i,signature:o,verifierAddress:a,...c}=e,u=await(async()=>!r&&!s||ib(o)?o:sb({data:s,signature:o,to:r}))(),l=a?{to:a,data:Ae({abi:Co,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:Bi({abi:Co,args:[n,i,u],bytecode:Np}),...c},{data:d}=await F(t,$r,"call")(l).catch(f=>{throw f instanceof dc?new gt:f});if(Jf(d??"0x0"))return!0;throw new gt}async function Fb(t,e){const{address:n,blockNumber:r,blockTag:s,hash:i,signature:o}=e;if((await F(t,xe,"readContract")({address:n,abi:Hc,args:[i,o],blockNumber:r,blockTag:s,functionName:"isValidSignature"}).catch(c=>{throw c instanceof fc?new gt:c})).startsWith("0x1626ba7e"))return!0;throw new gt}class gt extends Error{}async function Lb(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=cu(n);return F(t,Mr,"verifyHash")({address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function zb(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:u,...l}=e,d=qy({message:o,primaryType:a,types:c,domain:u});return F(t,Mr,"verifyHash")({address:n,factory:r,factoryData:s,hash:d,signature:i,...l})}function Vu(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=J(["watchBlockNumber",t.uid,e,n,o]);return rt(d,{onBlockNumber:r,onError:s},f=>Dn(async()=>{var h;try{const p=await F(t,jn,"getBlockNumber")({cacheTime:0});if(c!==void 0){if(p===c)return;if(p-c>1&&n)for(let y=c+1n;y<p;y++)f.onBlockNumber(y,c),c=y}(c===void 0||p>c)&&(f.onBlockNumber(p,c),c=p)}catch(p){(h=f.onError)==null||h.call(f,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=J(["watchBlockNumber",t.uid,e,n]);return rt(d,{onBlockNumber:r,onError:s},f=>{let h=!0,p=()=>h=!1;return(async()=>{try{const y=(()=>{if(t.transport.type==="fallback"){const v=t.transport.transports.find(I=>I.config.type==="webSocket"||I.config.type==="ipc");return v?v.value:t.transport}return t.transport})(),{unsubscribe:b}=await y.subscribe({params:["newHeads"],onData(v){var g;if(!h)return;const I=Te((g=v.result)==null?void 0:g.number);f.onBlockNumber(I,c),c=I},onError(v){var I;(I=f.onError)==null||I.call(f,v)}});p=b,h||p()}catch(y){s==null||s(y)}})(),()=>p()})})()}async function Db(t,e){const{checkReplacement:n=!0,confirmations:r=1,hash:s,onReplaced:i,retryCount:o=6,retryDelay:a=({count:w})=>~~(1<<w)*200,timeout:c=18e4}=e,u=J(["waitForTransactionReceipt",t.uid,s]),l=(()=>{var w;return e.pollingInterval?e.pollingInterval:(w=t.chain)!=null&&w.experimental_preconfirmationTime?t.chain.experimental_preconfirmationTime:t.pollingInterval})();let d,f,h,p=!1,y,b;const{promise:v,resolve:I,reject:g}=Yc(),m=c?setTimeout(()=>{b==null||b(),y==null||y(),g(new hh({hash:s}))},c):void 0;return y=rt(u,{onReplaced:i,resolve:I,reject:g},async w=>{if(h=await F(t,rr,"getTransactionReceipt")({hash:s}).catch(()=>{}),h&&r<=1){clearTimeout(m),w.resolve(h),y==null||y();return}b=F(t,Vu,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:l,async onBlockNumber(P){const x=S=>{clearTimeout(m),b==null||b(),S(),y==null||y()};let E=P;if(!p)try{if(h){if(r>1&&(!h.blockNumber||E-h.blockNumber+1n<r))return;x(()=>w.resolve(h));return}if(n&&!d&&(p=!0,await Ls(async()=>{d=await F(t,qi,"getTransaction")({hash:s}),d.blockNumber&&(E=d.blockNumber)},{delay:a,retryCount:o}),p=!1),h=await F(t,rr,"getTransactionReceipt")({hash:s}),r>1&&(!h.blockNumber||E-h.blockNumber+1n<r))return;x(()=>w.resolve(h))}catch(S){if(S instanceof uc||S instanceof lc){if(!d){p=!1;return}try{f=d,p=!0;const N=await Ls(()=>F(t,be,"getBlock")({blockNumber:E,includeTransactions:!0}),{delay:a,retryCount:o,shouldRetry:({error:O})=>O instanceof wc});p=!1;const T=N.transactions.find(({from:O,nonce:D})=>O===f.from&&D===f.nonce);if(!T||(h=await F(t,rr,"getTransactionReceipt")({hash:T.hash}),r>1&&(!h.blockNumber||E-h.blockNumber+1n<r)))return;let B="replaced";T.to===f.to&&T.value===f.value&&T.input===f.input?B="repriced":T.from===T.to&&T.value===0n&&(B="cancelled"),x(()=>{var O;(O=w.onReplaced)==null||O.call(w,{reason:B,replacedTransaction:f,transaction:T,transactionReceipt:h}),w.resolve(h)})}catch(N){x(()=>w.reject(N))}}else x(()=>w.reject(S))}}})}),v}function jb(t,{blockTag:e=t.experimental_blockTag??"latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const u=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),l=o??!1;let d;return u?(()=>{const p=J(["watchBlocks",t.uid,e,n,r,l,c]);return rt(p,{onBlock:s,onError:i},y=>Dn(async()=>{var b;try{const v=await F(t,be,"getBlock")({blockTag:e,includeTransactions:l});if(v.number!==null&&(d==null?void 0:d.number)!=null){if(v.number===d.number)return;if(v.number-d.number>1&&n)for(let I=(d==null?void 0:d.number)+1n;I<v.number;I++){const g=await F(t,be,"getBlock")({blockNumber:I,includeTransactions:l});y.onBlock(g,d),d=g}}((d==null?void 0:d.number)==null||e==="pending"&&(v==null?void 0:v.number)==null||v.number!==null&&v.number>d.number)&&(y.onBlock(v,d),d=v)}catch(v){(b=y.onError)==null||b.call(y,v)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,y=!0,b=()=>p=!1;return(async()=>{try{r&&F(t,be,"getBlock")({blockTag:e,includeTransactions:l}).then(g=>{p&&y&&(s(g,void 0),y=!1)}).catch(i);const v=(()=>{if(t.transport.type==="fallback"){const g=t.transport.transports.find(m=>m.config.type==="webSocket"||m.config.type==="ipc");return g?g.value:t.transport}return t.transport})(),{unsubscribe:I}=await v.subscribe({params:["newHeads"],async onData(g){var w;if(!p)return;const m=await F(t,be,"getBlock")({blockNumber:(w=g.result)==null?void 0:w.number,includeTransactions:l}).catch(()=>{});p&&(s(m,d),y=!1,d=m)},onError(g){i==null||i(g)}});b=I,p||b()}catch(v){i==null||i(v)}})(),()=>b()})()}function Gb(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:u,pollingInterval:l=t.pollingInterval,strict:d}){const f=typeof u<"u"?u:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),h=d??!1;return f?(()=>{const b=J(["watchEvent",e,n,r,t.uid,s,l,o]);return rt(b,{onLogs:c,onError:a},v=>{let I;o!==void 0&&(I=o-1n);let g,m=!1;const w=Dn(async()=>{var P;if(!m){try{g=await F(t,ou,"createEventFilter")({address:e,args:n,event:s,events:i,strict:h,fromBlock:o})}catch{}m=!0;return}try{let x;if(g)x=await F(t,Tr,"getFilterChanges")({filter:g});else{const E=await F(t,jn,"getBlockNumber")({});I&&I!==E?x=await F(t,Ti,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:I+1n,toBlock:E}):x=[],I=E}if(x.length===0)return;if(r)v.onLogs(x);else for(const E of x)v.onLogs([E])}catch(x){g&&x instanceof nt&&(m=!1),(P=v.onError)==null||P.call(v,x)}},{emitOnBegin:!0,interval:l});return async()=>{g&&await F(t,Sr,"uninstallFilter")({filter:g}),w()}})})():(()=>{let b=!0,v=()=>b=!1;return(async()=>{try{const I=(()=>{if(t.transport.type==="fallback"){const P=t.transport.transports.find(x=>x.config.type==="webSocket"||x.config.type==="ipc");return P?P.value:t.transport}return t.transport})(),g=i??(s?[s]:void 0);let m=[];g&&(m=[g.flatMap(x=>Nn({abi:[x],eventName:x.name,args:n}))],s&&(m=m[0]));const{unsubscribe:w}=await I.subscribe({params:["logs",{address:e,topics:m}],onData(P){var E;if(!b)return;const x=P.result;try{const{eventName:S,args:N}=cr({abi:g??[],data:x.data,topics:x.topics,strict:h}),T=Ge(x,{args:N,eventName:S});c([T])}catch(S){let N,T;if(S instanceof ir||S instanceof di){if(d)return;N=S.abiItem.name,T=(E=S.abiItem.inputs)==null?void 0:E.some(O=>!("name"in O&&O.name))}const B=Ge(x,{args:T?[]:{},eventName:N});c([B])}},onError(P){a==null||a(P)}});v=w,b||v()}catch(I){a==null||a(I)}})(),()=>v()})()}function qb(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const u=J(["watchPendingTransactions",t.uid,e,i]);return rt(u,{onTransactions:r,onError:n},l=>{let d;const f=Dn(async()=>{var h;try{if(!d)try{d=await F(t,au,"createPendingTransactionFilter")({});return}catch(y){throw f(),y}const p=await F(t,Tr,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)l.onTransactions(p);else for(const y of p)l.onTransactions([y])}catch(p){(h=l.onError)==null||h.call(l,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await F(t,Sr,"uninstallFilter")({filter:d}),f()}})})():(()=>{let u=!0,l=()=>u=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(f){if(!u)return;const h=f.result;r([h])},onError(f){n==null||n(f)}});l=d,u||l()}catch(d){n==null||n(d)}})(),()=>l()})()}function Vb(t){var d,f,h;const{scheme:e,statement:n,...r}=((d=t.match(Hb))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...u}=((f=t.match(Wb))==null?void 0:f.groups)??{},l=(h=t.split("Resources:")[1])==null?void 0:h.split(`
- `).slice(1);return{...r,...u,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...l?{resources:l}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const Hb=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Wb=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function Kb(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!me(r.address,{strict:!1})||e&&!Pr(r.address,e))return!1}catch{return!1}return!0}async function Zb(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...u}=e,l=Vb(s);if(!l.address||!Kb({address:n,domain:r,message:l,nonce:i,scheme:o,time:c}))return!1;const f=cu(s);return Mr(t,{address:l.address,hash:f,signature:a,...u})}async function Yb(t,{serializedTransaction:e,throwOnReceiptRevert:n,timeout:r}){var a,c,u;const s=await t.request({method:"eth_sendRawTransactionSync",params:r?[e,L(r)]:[e]},{retryCount:0}),o=(((u=(c=(a=t.chain)==null?void 0:a.formatters)==null?void 0:c.transactionReceipt)==null?void 0:u.format)||Qc)(s);if(o.status==="reverted"&&n)throw new fh({receipt:o});return o}function Jb(t){return{call:e=>$r(t,e),createAccessList:e=>iu(t,e),createBlockFilter:()=>wy(t),createContractEventFilter:e=>sc(t,e),createEventFilter:e=>ou(t,e),createPendingTransactionFilter:()=>au(t),estimateContractGas:e=>tp(t,e),estimateGas:e=>ki(t,e),getBalance:e=>vy(t,e),getBlobBaseFee:()=>_y(t),getBlock:e=>be(t,e),getBlockNumber:e=>jn(t,e),getBlockTransactionCount:e=>xy(t,e),getBytecode:e=>js(t,e),getChainId:()=>Pi(t),getCode:e=>js(t,e),getContractEvents:e=>Oc(t,e),getEip712Domain:e=>Ey(t,e),getEnsAddress:e=>ry(t,e),getEnsAvatar:e=>my(t,e),getEnsName:e=>by(t,e),getEnsResolver:e=>gy(t,e),getEnsText:e=>su(t,e),getFeeHistory:e=>ky(t,e),estimateFeesPerGas:e=>Uh(t,e),getFilterChanges:e=>Tr(t,e),getFilterLogs:e=>$y(t,e),getGasPrice:()=>Ei(t),getLogs:e=>Ti(t,e),getProof:e=>Gm(t,e),estimateMaxPriorityFeePerGas:e=>Mh(t,e),fillTransaction:e=>Tc(t,e),getStorageAt:e=>qm(t,e),getTransaction:e=>qi(t,e),getTransactionConfirmations:e=>Vm(t,e),getTransactionCount:e=>Ic(t,e),getTransactionReceipt:e=>rr(t,e),multicall:e=>Hm(t,e),prepareTransactionRequest:e=>Sc(t,e),readContract:e=>xe(t,e),sendRawTransaction:e=>Kp(t,e),sendRawTransactionSync:e=>Yb(t,e),simulate:e=>Hs(t,e),simulateBlocks:e=>Hs(t,e),simulateCalls:e=>nb(t,e),simulateContract:e=>zp(t,e),verifyHash:e=>Mr(t,e),verifyMessage:e=>Lb(t,e),verifySiweMessage:e=>Zb(t,e),verifyTypedData:e=>zb(t,e),uninstallFilter:e=>Sr(t,e),waitForTransactionReceipt:e=>Db(t,e),watchBlocks:e=>jb(t,e),watchBlockNumber:e=>Vu(t,e),watchContractEvent:e=>Wp(t,e),watchEvent:e=>Gb(t,e),watchPendingTransactions:e=>qb(t,e)}}function Xb(t){const{key:e="public",name:n="Public Client"}=t;return Yp({...t,key:e,name:n,type:"publicClient"}).extend(Jb)}function Qb({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const u=eu();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:Oy(r,{methods:e,retryCount:s,retryDelay:i,uid:u}),value:c}}class e1 extends A{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function t1(t,e={}){const{batch:n,fetchFn:r,fetchOptions:s,key:i="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:u,retryDelay:l,raw:d}=e;return({chain:f,retryCount:h,timeout:p})=>{const{batchSize:y=1e3,wait:b=0}=typeof n=="object"?n:{},v=e.retryCount??h,I=p??e.timeout??1e4,g=t||(f==null?void 0:f.rpcUrls.default.http[0]);if(!g)throw new e1;const m=Ny(g,{fetchFn:r,fetchOptions:s,onRequest:c,onResponse:u,timeout:I});return Qb({key:i,methods:o,name:a,async request({method:w,params:P}){const x={method:w,params:P},{schedule:E}=Jc({id:g,wait:b,shouldSplitBatch(B){return B.length>y},fn:B=>m.request({body:B}),sort:(B,O)=>B.id-O.id}),S=async B=>n?E(B):[await m.request({body:B})],[{error:N,result:T}]=await S(x);if(d)return{error:N,result:T};if(N)throw new vi({body:x,error:N,url:g});return T},retryCount:v,retryDelay:l,timeout:I,type:"http"},{fetchOptions:s,url:g})}}const Xo=(t,e,n,r)=>{let s=Number(t),i=e.find(o=>o.id===s);if(!i)throw new _a(`Unsupported chainId ${t}`,4901);return Xb({transport:t1(n1(i,n,r.appId)),chain:i})},n1=(t,e,n)=>{var o,a,c;let r,s=t.id,i=Number(t.id);if(t.rpcUrls.privyWalletOverride&&t.rpcUrls.privyWalletOverride.http[0])r=t.rpcUrls.privyWalletOverride.http[0];else if(e.rpcUrls&&e.rpcUrls[i])r=e.rpcUrls[i];else if((o=t.rpcUrls.privy)!=null&&o.http[0]){let u=new URL(t.rpcUrls.privy.http[0]);u.searchParams.append("privyAppId",n),r=u.toString()}else r=(a=t.rpcUrls.public)!=null&&a.http[0]?t.rpcUrls.public.http[0]:(c=t.rpcUrls.default)==null?void 0:c.http[0];if(!r)throw new _a(`No RPC url found for ${s}`);return r};function r1({currentRecoveryMethod:t,upgradeToRecoveryMethod:e}){switch(t){case"privy":case"user-passcode":case"recovery-encryption-key":return!0;case"icloud":case"google-drive":if(t===e)throw Error("Cannot upgrade to the existing cloud platform");return!0;default:throw Error("Unknown recovery method")}}function s1(t){return new Promise(e=>{setTimeout(()=>{e()},t)})}let i1=class{enqueue(e,n){this.callbacks[e]=n}dequeue(e,n){let r=this.callbacks[n];if(!r)throw Error(`cannot dequeue ${e} event: no event found for id ${n}`);switch(delete this.callbacks[n],e){case"privy:iframe:ready":case"privy:wallets:create":case"privy:user-signer:sign":case"privy:wallets:add":case"privy:wallets:set-recovery":case"privy:wallets:connect":case"privy:wallets:recover":case"privy:wallets:rpc":case"privy:wallet:create":case"privy:wallet:connect":case"privy:wallet:recover":case"privy:wallet:rpc":case"privy:solana-wallet:create":case"privy:solana-wallet:create-additional":case"privy:solana-wallet:connect":case"privy:solana-wallet:recover":case"privy:solana-wallet:rpc":case"privy:delegated-actions:consent":case"privy:mfa:verify":case"privy:mfa:init-enrollment":case"privy:mfa:submit-enrollment":case"privy:mfa:unenroll":case"privy:mfa:clear":return r;default:throw Error(`invalid wallet event type ${e}`)}}constructor(){this.callbacks={}}};async function o1(t,e,n,r,s=!1,i,o){var l,d,f;let a=s,c=async h=>{var p;if(a){h===(s?0:1)?r():(p=n.current)==null||p.reject(new nr("missing_or_invalid_mfa","MFA verification failed, retry."));let y=await new Promise((b,v)=>{e.current={resolve:b,reject:v},setTimeout(()=>{var g;let I=new nr("mfa_timeout","Timed out waiting for MFA code");(g=n.current)==null||g.reject(I),v(I)},o)});return await t(y)}return await t()},u=null;for(let h=0;h<i;h++)try{u=await c(h),(l=n.current)==null||l.resolve(void 0);break}catch(p){if(p.type!=="missing_or_invalid_mfa")throw(d=n.current)==null||d.resolve(void 0),p;a=!0}if(u===null){let h=new nr("mfa_verification_max_attempts_reached","Max MFA verification attempts reached");throw(f=n.current)==null||f.reject(h),h}return u}var Qo;let a1=(Qo=0,()=>"id-"+Qo++),c1=(t,e)=>typeof e=="bigint"?e.toString():e,Ke=async(t,{ms:e,msg:n})=>{let r,s=new Promise((i,o)=>{r=setTimeout(()=>{o(Error(n))},e??15e3)});try{return await Promise.race([t,s])}finally{r!==void 0&&clearTimeout(r)}},ea=new i1,ta=class{invokeWithMfa(e,n){return Ke(o1(r=>Ke(this.waitForReady().then(()=>e(r)),{msg:n.timeoutMsg,ms:n.timeoutMs}),this.mfa.rootPromise,this.mfa.submitPromise,()=>this.mfa.emit("mfaRequired"),n.mfaAlwaysRequired??!1,4,3e5),{msg:"Operation reached timeout: MFA verification",ms:126e4})}reload(){return this.ready=!1,this._embeddedWalletMessagePoster.reload()}ping(e=15e3){return Ke(this.invoke("privy:iframe:ready",{}),{msg:"Ping reached timeout",ms:e})}create(e){return Ke(this.waitForReady().then(()=>this.invoke("privy:wallet:create",e)),{msg:"Operation reached timeout: create"})}rpc(e){return this.invokeWithMfa(n=>this.invoke("privy:wallet:rpc",{...n,...e}),{timeoutMsg:"Operation reached timeout: rpc"})}createSolana(e){return this.invokeWithMfa(n=>this.invoke("privy:solana-wallet:create",{...n,...e}),{timeoutMsg:"Operation reached timeout: create",timeoutMs:6e4})}createAdditionalSolana(e){return Ke(this.waitForReady().then(()=>this.invoke("privy:solana-wallet:create-additional",e)),{msg:"Operation reached timeout: create"})}solanaRpc(e){return this.invokeWithMfa(n=>this.invoke("privy:solana-wallet:rpc",{...n,...e}),{timeoutMsg:"Operation reached timeout: solana-rpc"})}delegateWallets(e){return this.invokeWithMfa(n=>this.invoke("privy:delegated-actions:consent",{...n,...e}),{timeoutMsg:"Operation reached timeout: delegated-actions:consent"})}verifyMfa(e){return this.invokeWithMfa(n=>this.invoke("privy:mfa:verify",{...n,...e}),{timeoutMsg:"Operation reached timeout: mfa:verify",mfaAlwaysRequired:!0})}initEnrollMfa(e){return this.invokeWithMfa(n=>this.invoke("privy:mfa:init-enrollment",{...n,...e}),{timeoutMsg:"Operation reached timeout: mfa:init-enrollment"})}submitEnrollMfa(e){return this.invokeWithMfa(n=>this.invoke("privy:mfa:submit-enrollment",{...n,...e}),{timeoutMsg:"Operation reached timeout: mfa:submit-enrollment"})}unenrollMfa(e){return this.invokeWithMfa(n=>this.invoke("privy:mfa:unenroll",{...n,...e}),{timeoutMsg:"Operation reached timeout: mfa:unenroll",mfaAlwaysRequired:!0})}clearMfa(e){return Ke(this.waitForReady().then(()=>this.invoke("privy:mfa:clear",e)),{msg:"Operation reached timeout: mfa:clear"})}createWallet(e){return this.invokeWithMfa(n=>this.invoke("privy:wallets:create",{...n,...e}),{timeoutMsg:"Operation reached timeout: create",timeoutMs:6e4})}signWithUserSigner(e){return this.invokeWithMfa(n=>this.invoke("privy:user-signer:sign",{...n,...e}),{timeoutMsg:"Operation reached timeout: user-signer:sign"})}addWallet(e){return Ke(this.waitForReady().then(()=>this.invoke("privy:wallets:add",e)),{msg:"Operation reached timeout: wallets:add"})}setRecovery(e){return this.invokeWithMfa(n=>this.invoke("privy:wallets:set-recovery",{...n,...e}),{timeoutMsg:"Operation reached timeout: wallets:set-recovery",timeoutMs:6e4})}connect(e){return Ke(this.waitForReady().then(()=>this.invoke("privy:wallets:connect",e)),{msg:"Operation reached timeout: wallets:connect"})}recover(e){return this.invokeWithMfa(n=>this.invoke("privy:wallets:recover",{...n,...e}),{timeoutMsg:"Operation reached timeout: wallets:recover",timeoutMs:6e4})}rpcWallet(e){return this.invokeWithMfa(n=>this.invoke("privy:wallets:rpc",{...n,...e}),{timeoutMsg:"Operation reached timeout: wallets:rpc"})}handleEmbeddedWalletMessages(e){if(!e.event.startsWith("privy:"))return void console.warn(`Unsupported event type: ${e.event}`);let{reject:n,resolve:r}=ea.dequeue(e.event,e.id);return e.error!==void 0?n(new nr(e.error.type,e.error.message)):r(e.data)}waitForReady(){return this.ready?Promise.resolve():new Promise(async(e,n)=>{for(;!this.ready;)this.invoke("privy:iframe:ready",{}).then(()=>{this.ready=!0,e()}).catch(n),await s1(150)})}invoke(e,n){let r=((i,o)=>`${i}${JSON.stringify(o,c1)}`)(e,n);if(e==="privy:wallet:create"||e==="privy:solana-wallet:create"){let i=this.cache.get(r);if(i)return i}let s=new Promise((i,o)=>{let a=a1();ea.enqueue(a,{resolve:i,reject:o}),this._embeddedWalletMessagePoster.postMessage(JSON.stringify({id:a,event:e,data:n}),"*")}).finally(()=>{this.cache.delete(r)});return this.cache.set(r,s),s}constructor(e,n){this.ready=!1,this.cache=new Map,this._embeddedWalletMessagePoster=e,this.mfa=n}};var u1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hu={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,u,l){this.fn=c,this.context=u,this.once=l||!1}function i(c,u,l,d,f){if(typeof l!="function")throw new TypeError("The listener must be a function");var h=new s(l,d||c,f),p=n?n+u:u;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],h]:c._events[p].push(h):(c._events[p]=h,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],l,d;if(this._eventsCount===0)return u;for(d in l=this._events)e.call(l,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(l)):u},a.prototype.listeners=function(u){var l=n?n+u:u,d=this._events[l];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,p=new Array(h);f<h;f++)p[f]=d[f].fn;return p},a.prototype.listenerCount=function(u){var l=n?n+u:u,d=this._events[l];return d?d.fn?1:d.length:0},a.prototype.emit=function(u,l,d,f,h,p){var y=n?n+u:u;if(!this._events[y])return!1;var b=this._events[y],v=arguments.length,I,g;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),v){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,l),!0;case 3:return b.fn.call(b.context,l,d),!0;case 4:return b.fn.call(b.context,l,d,f),!0;case 5:return b.fn.call(b.context,l,d,f,h),!0;case 6:return b.fn.call(b.context,l,d,f,h,p),!0}for(g=1,I=new Array(v-1);g<v;g++)I[g-1]=arguments[g];b.fn.apply(b.context,I)}else{var m=b.length,w;for(g=0;g<m;g++)switch(b[g].once&&this.removeListener(u,b[g].fn,void 0,!0),v){case 1:b[g].fn.call(b[g].context);break;case 2:b[g].fn.call(b[g].context,l);break;case 3:b[g].fn.call(b[g].context,l,d);break;case 4:b[g].fn.call(b[g].context,l,d,f);break;default:if(!I)for(w=1,I=new Array(v-1);w<v;w++)I[w-1]=arguments[w];b[g].fn.apply(b[g].context,I)}}return!0},a.prototype.on=function(u,l,d){return i(this,u,l,d,!1)},a.prototype.once=function(u,l,d){return i(this,u,l,d,!0)},a.prototype.removeListener=function(u,l,d,f){var h=n?n+u:u;if(!this._events[h])return this;if(!l)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===l&&(!f||p.once)&&(!d||p.context===d)&&o(this,h);else{for(var y=0,b=[],v=p.length;y<v;y++)(p[y].fn!==l||f&&!p[y].once||d&&p[y].context!==d)&&b.push(p[y]);b.length?this._events[h]=b.length===1?b[0]:b:o(this,h)}return this},a.prototype.removeAllListeners=function(u){var l;return u?(l=n?n+u:u,this._events[l]&&o(this,l)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(Hu);var l1=Hu.exports;const Yi=Zi(l1);let us={0:"legacy",1:"eip2930",2:"eip1559",3:"eip4844",4:"eip7702"};const d1={legacy:0,eip2930:1,eip1559:2,eip4844:3,eip7702:4};let Pt=t=>t!==void 0?BigInt(t):void 0;function na(t){let e,{type:n=2,...r}=typeof t=="string"?JSON.parse(t):t;r.accessList&&Array.isArray(r.accessList)?e=r.accessList.map(u=>Array.isArray(u)?{address:u[0],storageKeys:u[1]}:u):r.accessList&&(e=Object.entries(r.accessList).map(u=>({address:u[0],storageKeys:u[1]})));let s=Number(r.chainId??1),i=we(r.data)?r.data:r.data?Se(Uint8Array.from(r.data)):void 0,o=r.nonce?Number(r.nonce):void 0,a={chainId:s,data:i,nonce:o,value:Pt(r.value),gas:Pt(r.gas??r.gasLimit)},c=Number(n);if(c===0)return{...r,type:us[c],...a,gasPrice:Pt(r.gasPrice),accessList:void 0,maxFeePerGas:void 0,maxPriorityFeePerGas:void 0};if(c===1)return{...r,type:us[c],...a,gasPrice:Pt(r.gasPrice),accessList:e,maxFeePerGas:void 0,maxPriorityFeePerGas:void 0};if(c===2)return{...r,type:us[c],...a,nonce:o,accessList:e,maxFeePerGas:Pt(r.maxFeePerGas),maxPriorityFeePerGas:Pt(r.maxPriorityFeePerGas),gasPrice:void 0,maxFeePerBlobGas:void 0};throw Error(`Unsupported transaction type: ${n}`)}const hr=t=>/^0x[0-9a-fA-F]*$/.test(t),pr=t=>Buffer.from(t,"utf8"),Bn=t=>`0x${t.toString("hex")}`;var f1=function t(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?t(e.toJSON()):Array.isArray(e)?`[${e.reduce((s,i,o)=>`${s}${o===0?"":","}${t(i===void 0||typeof i=="symbol"?null:i)}`,"")}]`:`{${Object.keys(e).sort().reduce((r,s)=>{if(e[s]===void 0||typeof e[s]=="symbol")return r;const i=r.length===0?"":",";return`${r}${i}${t(s)}:${t(e[s])}`},"")}}`};const h1=Zi(f1);async function p1(t,e){let n=h1(e);if(n===void 0)throw new G({error:"Failed to prepare the payload for signing",code:"invalid_input"});let r=Buffer.from(n).toString("base64"),{signature:s}=await t({message:r});return{signature:s}}async function kt(t,e,{wallet_id:n,...r}){let s={version:1,url:t.getCompiledPath(Lr,{params:{wallet_id:n}}),method:Lr.method,headers:{"privy-app-id":t.app.appId},body:{...r}},{signature:i}=await p1(e,s);return await t.fetchPrivyRoute(Lr,{body:r,params:{wallet_id:n},headers:{"privy-authorization-signature":i}})}function y1(t){return{from:t.from,to:t.to??void 0,nonce:at(t.nonce),chain_id:at(t.chainId),data:function(e){if(e!==void 0)return typeof e=="string"?hr(e)?e:Bn(pr(e)):Bn(Buffer.from(Uint8Array.from(e)))}(t.data),value:at(t.value),type:t.type,gas_limit:at(t.gasLimit),gas_price:at(t.gasPrice),max_fee_per_gas:at(t.maxFeePerGas),max_priority_fee_per_gas:at(t.maxPriorityFeePerGas)}}function at(t){if(typeof t=="number"||typeof t=="bigint")return`0x${BigInt(t).toString(16)}`;if(typeof t=="string")return hr(t)?t:Bn(pr(t))}function m1(t){return typeof t=="string"&&(t=JSON.parse(t)),{types:t.types,primary_type:String(t.primaryType),domain:t.domain,message:t.message}}async function Wu({context:t,account:e,rpcRequest:n}){switch(n.chainType){case"ethereum":return async function({context:r,account:s,rpcRequest:i}){switch(i.method){case"personal_sign":{let[o]=i.params,a=await kt(r,r.signRequest,{chain_type:"ethereum",method:"personal_sign",wallet_id:s.id,params:o.startsWith("0x")?{message:o.slice(2),encoding:"hex"}:{message:o,encoding:"utf-8"}});if(a.method!=="personal_sign")throw Error("Unable to sign message");return{data:a.data.signature}}case"eth_signTransaction":{let[o]=i.params,a=await kt(r,r.signRequest,{chain_type:"ethereum",method:"eth_signTransaction",wallet_id:s.id,params:{transaction:y1(o)}});if(a.method!=="eth_signTransaction")throw Error("Unable to sign transaction");return{data:a.data.signed_transaction}}case"eth_signTypedData_v4":{let[,o]=i.params,a=await kt(r,r.signRequest,{chain_type:"ethereum",method:i.method,wallet_id:s.id,params:{typed_data:m1(o)}});if(a.method!=="eth_signTypedData_v4")throw Error("Unable to sign typed data");return{data:a.data.signature}}case"eth_sign":{let[,o]=i.params,a=await kt(r,r.signRequest,{chain_type:"ethereum",method:"secp256k1_sign",wallet_id:s.id,params:{hash:hr(o)?o:Bn(pr(o))}});if(a.method!=="secp256k1_sign")throw Error("Unable to sign message");return{data:a.data.signature}}case"secp256k1_sign":{let[o]=i.params,a=await kt(r,r.signRequest,{chain_type:"ethereum",method:"secp256k1_sign",wallet_id:s.id,params:{hash:hr(o)?o:Bn(pr(o))}});if(a.method!=="secp256k1_sign")throw Error("Unable to sign message");return{data:a.data.signature}}case"csw_signUserOperation":case"eth_sendTransaction":case"eth_populateTransactionRequest":throw Error(`This wallet does not support the method: ${i.method}`)}}({context:t,account:e,rpcRequest:n.request});case"solana":return async function({context:r,account:s,rpcRequest:i}){if(i.method==="signMessage"){let{message:o}=i.params,a=await kt(r,r.signRequest,{chain_type:"solana",method:"signMessage",wallet_id:s.id,params:{message:o,encoding:"base64"}});if(a.method!=="signMessage")throw Error("Unable to sign message");return{data:a.data.signature}}}({context:t,account:e,rpcRequest:n.request})}}let b1=new Set(["eth_sign","personal_sign","eth_signTypedData_v4","csw_signUserOperation","secp256k1_sign"]),ls=class extends Yi{async request(e){var n,r,s;if(b1.has(e.method))return this.handleIFrameRpc(e);switch(e.method){case"eth_accounts":case"eth_requestAccounts":return this._account.address?[this._account.address]:[];case"eth_chainId":return`0x${this._chainId.toString(16)}`;case"wallet_switchEthereumChain":return this.handleSwitchEthereumChain(e);case"eth_estimateGas":return this.handleEstimateGas(e);case"eth_signTransaction":{let i=(n=e.params)==null?void 0:n[0];return this.handleSignTransaction(i)}case"eth_sendTransaction":{let i=(r=e.params)==null?void 0:r[0];return this.handleSendTransaction(i)}case"eth_populateTransactionRequest":{let i=(s=e.params)==null?void 0:s[0];return this.handlePopulateTransaction(i)}default:return this.handleJsonRpc(e)}}ensureChainId(e){let n={chainId:this._chainId,...e};return this.internalSwitchEthereumChain(n.chainId),n}internalSwitchEthereumChain(e){e&&Number(e)!==this._chainId&&(this._chainId=Number(e),this._client=Xo(this._chainId,this._chains,{rpcUrls:[]},{appId:this._privyInternal.appId}),this.emit("chainChanged",e))}async handlePopulateTransaction(e){let n=this.ensureChainId(e),r=na(n),{type:s,...i}=await this._client.prepareTransactionRequest({account:n.from??this._account.address,...r});return{...i,type:d1[s]}}async handleSignTransaction(e){let n={...e};for(let r of Object.keys(n)){let s=n[r];s&&typeof s=="bigint"&&(n[r]=Se(s))}return await this.handleIFrameRpc({method:"eth_signTransaction",params:[n]})}async handleSendTransaction(e){let n=await this.handlePopulateTransaction(e),r=await this.handleSignTransaction(n);return await this.handleJsonRpc({method:"eth_sendRawTransaction",params:[r]})}async handleEstimateGas(e){var i;if(!e.params||!Array.isArray(e.params))throw Error("Invalid params for eth_estimateGas");let n=(i=e.params)==null?void 0:i[0],r=this.ensureChainId(n),s=na(r);return await this._client.estimateGas({account:r.from??this._account.address,...s})}handleSwitchEthereumChain(e){let n;if(!e.params||!Array.isArray(e.params))throw new Qi(`Invalid params for ${e.method}`,4200);if(typeof e.params[0]=="string")n=e.params[0];else{if(!("chainId"in e.params[0])||typeof e.params[0].chainId!="string")throw new Qi(`Invalid params for ${e.method}`,4200);n=e.params[0].chainId}this.internalSwitchEthereumChain(n)}async handleIFrameRpc(e){try{let n=await this._privyInternal.getAccessTokenInternal();if(!n)throw Error("Missing privy token. User must be logged in");this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address});let r=this._account;if(Je(r)){let{data:s}=await Wu({context:{app:this._appApi,fetchPrivyRoute:(...i)=>this._privyInternal.fetch(...i),getCompiledPath:(...i)=>this._privyInternal.getPath(...i),signRequest:({message:i})=>this._walletProxy.signWithUserSigner({accessToken:n,message:i})},account:r,rpcRequest:{chainType:"ethereum",request:e}});return s}try{await this._walletProxy.connect({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:n})}catch(s){let i=ui(s);if(i&&this._account.recovery_method==="privy")await this._walletProxy.recover({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:n});else{if(!i||!this._onNeedsRecovery)throw s;{let o;await new Promise(async(a,c)=>{var u;o=setTimeout(()=>c(new G({code:"embedded_wallet_recovery_error",error:"User-owned recovery timed out"})),12e4),await((u=this._onNeedsRecovery)==null?void 0:u.call(this,{recoveryMethod:this._account.recovery_method,onRecovered:()=>a(!0)}))}).finally(()=>clearTimeout(o))}}}return(await this._walletProxy.rpcWallet({accessToken:n,request:e,entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,hdWalletIndex:this._account.wallet_index,chainType:"ethereum"})).response.data}catch(n){console.error(n);let r=n instanceof Error?n.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:r}),new G({code:"embedded_wallet_request_error",error:r})}}async handleJsonRpc(e){return this._client.request(e)}toJSON(){return`PrivyEIP1193Provider { address: '${this._account.address}', chainId: ${this._chainId}, request: [Function] }`}constructor({walletProxy:e,privyInternal:n,account:r,entropyId:s,entropyIdVerifier:i,chains:o,onNeedsRecovery:a,chainId:c=o[0].id,appApi:u}){super(),this._walletProxy=e,this._privyInternal=n,this._account=r,this._entropyId=s,this._entropyIdVerifier=i,this._chainId=c,this._chains=o,this._onNeedsRecovery=a,this._client=Xo(c,o,{rpcUrls:[]},{appId:u.appId}),this._appApi=u}};function ei(t){return"version"in t}function ra(t,e){let n=(ei(t)?t.message:t.compileMessage()).staticAccountKeys.find(r=>r.toBase58()===e);if(!n)throw Error(`Transaction does not contain public key ${e}`);return n}let g1=class{async request(e){if(!await this._privyInternal.getAccessTokenInternal())throw new G({error:"Missing access token",code:"attempted_rpc_call_before_logged_in"});switch(e.method){case"signAndSendTransaction":return await this.handleSignAndSendTransaction(e);case"signTransaction":return await this.handleSignTransaction(e);default:return await this.handleIFrameRpc(e)}}get _publicKey(){return this._account.address}async connectAndRecover(e){if(this._account.recovery_method!=="privy-v2")try{await this._proxy.connect({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:e})}catch(n){let r=ui(n);if(r&&this._account.recovery_method==="privy")await this._proxy.recover({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:e});else{if(!r||!this._onNeedsRecovery)throw n;{let s;await new Promise(async(i,o)=>{var a;s=setTimeout(()=>o(new G({code:"embedded_wallet_recovery_error",error:"User-owned recovery timed out"})),12e4),await((a=this._onNeedsRecovery)==null?void 0:a.call(this,{recoveryMethod:this._account.recovery_method,onRecovered:()=>i(!0)}))}).finally(()=>clearTimeout(s))}}}}async signMessageRpc(e,n){let r=this._account;if(!Je(r))return(await this._proxy.rpcWallet({accessToken:n,request:e,chainType:"solana",hdWalletIndex:this._account.wallet_index,entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier})).response.data;{let{data:s}=await Wu({context:{app:this._app,fetchPrivyRoute:(...i)=>this._privyInternal.fetch(...i),getCompiledPath:(...i)=>this._privyInternal.getPath(...i),signRequest:({message:i})=>this._proxy.signWithUserSigner({accessToken:n,message:i})},account:r,rpcRequest:{chainType:"solana",request:e}});return{signature:s}}}async handleIFrameRpc(e){try{let n=await this._privyInternal.getAccessTokenInternal();if(!n)throw Error("Missing privy token. User must be logged in");return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),await this.connectAndRecover(n),await this.signMessageRpc(e,n)}catch(n){console.error(n);let r=n instanceof Error?n.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:r}),new G({code:"embedded_wallet_request_error",error:r})}}async handleSignAndSendTransaction(e){try{let n=await this._privyInternal.getAccessTokenInternal();if(!n)throw Error("Missing privy token. User must be logged in");this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),await this.connectAndRecover(n);let{transaction:r,connection:s,options:i}=e.params,o=ra(r,this._account.address),a=ei(r)?Buffer.from(r.message.serialize()):r.serializeMessage(),{signature:c}=await this.signMessageRpc({method:"signMessage",params:{message:a.toString("base64")}},n);return r.addSignature(o,Buffer.from(c,"base64")),{signature:await s.sendRawTransaction(r.serialize(),i)}}catch(n){console.error(n);let r=n instanceof Error?n.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:r}),new G({code:"embedded_wallet_request_error",error:r})}}async handleSignTransaction(e){try{let n=await this._privyInternal.getAccessTokenInternal();if(!n)throw Error("Missing privy token. User must be logged in");this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),await this.connectAndRecover(n);let{transaction:r}=e.params,s=ra(r,this._account.address),i=ei(r)?Buffer.from(r.message.serialize()):r.serializeMessage(),{signature:o}=await this.signMessageRpc({method:"signMessage",params:{message:i.toString("base64")}},n);return r.addSignature(s,Buffer.from(o,"base64")),{signedTransaction:r}}catch(n){console.error(n);let r=n instanceof Error?n.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.wallet_index,error:r}),new G({code:"embedded_wallet_request_error",error:r})}}toJSON(){return`PrivyEmbeddedSolanaProvider { address: '${this._account.address}', request: [Function] }`}constructor({proxy:e,privyInternal:n,account:r,entropyId:s,entropyIdVerifier:i,onNeedsRecovery:o,app:a}){this._proxy=e,this._privyInternal=n,this._account=r,this._entropyId=s,this._entropyIdVerifier=i,this._onNeedsRecovery=o,this._app=a}};class w1{setMessagePoster(e){this._proxy=new ta(e,this._mfaPromises),this._mfa.setProxy(this._proxy)}async signWithUserSigner(e){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");let n=await this._privyInternal.getAccessTokenInternal();if(!n)throw new G({error:"User must be logged in to sign a message with the user signer",code:"user_signer_sign_error"});let{signature:r}=await this._proxy.signWithUserSigner({accessToken:n,message:e.message});return{signature:r}}async add(e){var r;if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(((r=this._privyInternal.config)==null?void 0:r.embedded_wallet_config.mode)==="user-controlled-server-wallets-only")await Dr({context:{app:this._appApi,fetchPrivyRoute:(...s)=>this._privyInternal.fetch(...s),getCompiledPath:(...s)=>this._privyInternal.getPath(...s)},chainType:e.chainType});else{let s=await this._privyInternal.getAccessTokenInternal();if(!s)throw new G({error:"User must be logged in to create an embedded wallet",code:"embedded_wallet_creation_error"});await this._proxy.addWallet({accessToken:s,...e})}let{user:n}=await this._privyInternal.refreshSession();return{user:n}}async getBitcoinProvider({wallet:e,entropyId:n,entropyIdVerifier:r,recoveryPassword:s,recoveryAccessToken:i,recoverySecretOverride:o}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(!await this._privyInternal.getAccessTokenInternal())throw Error("User must be logged in to create an embedded wallet");return Je(e)||await this._load({entropyId:n,entropyIdVerifier:r,wallet:e,recoveryPassword:s,recoveryAccessToken:i,recoverySecretOverride:o}),new Ld({account:e,privyInternal:this._privyInternal,proxy:this._proxy,entropyId:n,entropyIdVerifier:r})}async create({password:e,recoveryMethod:n,recoveryToken:r,recoveryKey:s,recoverySecretOverride:i,iCloudRecordNameOverride:o,solanaAccount:a,skipCallbacks:c}){var u,l;if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(((u=this._privyInternal.config)==null?void 0:u.embedded_wallet_config.mode)==="user-controlled-server-wallets-only"){if(n&&!n.startsWith("privy"))throw new G({error:"User-controlled server wallets do not support custom recovery methods",code:"embedded_wallet_creation_error"});await Dr({context:{app:this._appApi,fetchPrivyRoute:(...d)=>this._privyInternal.fetch(...d),getCompiledPath:(...d)=>this._privyInternal.getPath(...d)},chainType:"ethereum"})}else{let d;if(d=n||(e?"user-passcode":"privy"),e&&typeof e!="string")throw Error("Invalid recovery password, must be a string");if(d==="privy"&&((l=this._privyInternal.config)!=null&&l.embedded_wallet_config.require_user_password_on_create))throw Error("Password not provided yet is required by App configuration");let f=await this._privyInternal.getAccessTokenInternal();if(!f)throw Error("User must be logged in to create an embedded wallet");let{address:h}=await this._proxy.create({accessToken:f,recoveryMethod:d,recoveryKey:s,recoveryPassword:e,recoveryAccessToken:r,recoverySecretOverride:i,iCloudRecordNameOverride:o,solanaAddress:a==null?void 0:a.address});if(!h)throw Error("Failed to create wallet")}return await this._privyInternal.refreshSession(c)}async createSolana(e){var n,r;if(!this._proxy)throw new G({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_creation_error"});if(((n=this._privyInternal.config)==null?void 0:n.embedded_wallet_config.mode)==="user-controlled-server-wallets-only")await Dr({context:{app:this._appApi,fetchPrivyRoute:(...s)=>this._privyInternal.fetch(...s),getCompiledPath:(...s)=>this._privyInternal.getPath(...s)},chainType:"solana"});else{let s=await this._privyInternal.getAccessTokenInternal();if(!s)throw new G({error:"User must be logged in to create an embedded wallet",code:"embedded_wallet_creation_error"});e!=null&&e.ethereumAccount&&await this.getProvider(e.ethereumAccount);let{publicKey:i}=await this._proxy.createSolana({accessToken:s,ethereumAddress:(r=e==null?void 0:e.ethereumAccount)==null?void 0:r.address});if(!i)throw new G({error:"Failed to create wallet",code:"embedded_wallet_creation_error"})}return await this._privyInternal.refreshSession()}async delegateWallets({delegatedWallets:e,rootWallet:n}){if(!this._proxy)throw new G({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_creation_error"});let r=await this._privyInternal.getAccessTokenInternal();if(!r)throw new G({error:"User must be logged in to create an embedded wallet",code:"embedded_wallet_creation_error"});await this._proxy.delegateWallets({accessToken:r,delegatedWallets:e,rootWallet:n})}async getProvider(e,n,r,s,i){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");return Je(e)||await this._load({wallet:e,entropyId:e.address,entropyIdVerifier:"ethereum-address-verifier",recoveryPassword:n,recoveryKey:i,recoveryAccessToken:r,recoverySecretOverride:s}),new ls({account:e,entropyId:e.address,entropyIdVerifier:"ethereum-address-verifier",privyInternal:this._privyInternal,chains:this._chains,walletProxy:this._proxy,appApi:this._appApi})}async getEthereumProvider({wallet:e,entropyId:n,entropyIdVerifier:r,recoveryPassword:s,recoveryAccessToken:i,recoverySecretOverride:o,recoveryKey:a,onNeedsRecovery:c}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(!await this._privyInternal.getAccessTokenInternal())throw Error("User must be logged in to create an embedded wallet");return Je(e)||(!c||s||i||o||a)&&await this._load({entropyId:n,entropyIdVerifier:r,wallet:e,recoveryPassword:s,recoveryAccessToken:i,recoverySecretOverride:o,recoveryKey:a}),new ls({account:e,entropyId:n,entropyIdVerifier:"ethereum-address-verifier",privyInternal:this._privyInternal,chains:this._chains,walletProxy:this._proxy,onNeedsRecovery:c,appApi:this._appApi})}async getSolanaProvider(e,n,r,s,i,o,a){if(!this._proxy)throw new G({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return Je(e)||(!a||s||i||o)&&await this._load({wallet:e,entropyId:n,entropyIdVerifier:r,recoveryPassword:s,recoveryAccessToken:i,recoverySecretOverride:o}),new g1({account:e,privyInternal:this._privyInternal,proxy:this._proxy,entropyId:n,entropyIdVerifier:r,onNeedsRecovery:a,app:this._appApi})}async setRecovery(e){let{wallet:n,...r}=e;if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(Je(n))throw new G({error:"This wallet does not support setting recovery methods",code:"unsupported_recovery_method"});r1({currentRecoveryMethod:n.recovery_method,upgradeToRecoveryMethod:r.recoveryMethod==="icloud-native"?"icloud":r.recoveryMethod}),await this._load(n.chain_type==="solana"?{wallet:n,entropyId:n.address,entropyIdVerifier:"solana-address-verifier"}:{wallet:n,entropyId:n.address,entropyIdVerifier:"ethereum-address-verifier"});let s=await this._privyInternal.getAccessTokenInternal();if(!s)throw Error("User must be logged in to interact with embedded wallets");let i=n.recovery_method;this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_set_recovery_started",{address:n.address,target_recovery_method:r.recoveryMethod,existing_recovery_method:i});try{let o;if(r.recoveryMethod==="user-passcode")o={recoveryMethod:"user-passcode",recoveryPassword:r.password};else if(r.recoveryMethod==="google-drive")o={recoveryMethod:"google-drive",recoveryAccessToken:r.recoveryAccessToken};else if(r.recoveryMethod==="icloud")o={recoveryMethod:"icloud",recoveryAccessToken:r.recoveryAccessToken};else if(r.recoveryMethod==="icloud-native")o={recoveryMethod:"icloud-native",iCloudRecordNameOverride:r.iCloudRecordNameOverride,recoverySecretOverride:r.recoverySecretOverride};else if(r.recoveryMethod==="recovery-encryption-key")o={recoveryMethod:"recovery-encryption-key",recoveryKey:r.recoveryKey};else{if(r.recoveryMethod!=="privy")throw Error(`Unknown recovery method: ${r.recoveryMethod}`);o={recoveryMethod:"privy"}}await this._proxy.setRecovery({accessToken:s,entropyId:n.address,entropyIdVerifier:n.chain_type==="solana"?"solana-address-verifier":"ethereum-address-verifier",...o}),this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_set_recovery_completed",{address:n.address,target_recovery_method:r.recoveryMethod,existing_recovery_method:i});let{user:a}=await this._privyInternal.refreshSession();return{user:a,provider:n.chain_type!=="ethereum"?null:new ls({account:n,entropyId:n.address,entropyIdVerifier:"ethereum-address-verifier",privyInternal:this._privyInternal,chains:this._chains,walletProxy:this._proxy,appApi:this._appApi})}}catch(o){throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_set_recovery_failed",{address:n.address,recovery_method:n.recovery_method,error:o instanceof Error?o.message:"Unable to recover wallet"}),o}}getURL(){let e=new URL(`${this._privyInternal.baseUrl}/apps/${this._privyInternal.appId}/embedded-wallets`);return this._privyInternal.caid&&e.searchParams.append("caid",this._privyInternal.caid),this._privyInternal.appClientId&&e.searchParams.append("client_id",this._privyInternal.appClientId),e.href}get chains(){return this._chains}onMessage(e){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");return this._proxy.handleEmbeddedWalletMessages(e)}reload(){this._proxy?this._proxy.reload():console.warn("Attempted to reload proxy before initialized")}async ping(e){try{if(!this._proxy)throw Error("Embedded wallet proxy not initialized");return await this._proxy.ping(e),!0}catch(n){return console.error(n),!1}}async _load({entropyId:e,entropyIdVerifier:n,wallet:r,recoveryPassword:s,recoveryKey:i,recoveryAccessToken:o,recoverySecretOverride:a}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");let c=await this._privyInternal.getAccessTokenInternal();if(!c)throw Error("User must be logged in to interact with embedded wallets");try{return await this._proxy.connect({accessToken:c,entropyId:e,entropyIdVerifier:n}),e}catch(u){if(ui(u))try{if(r.recovery_method==="privy"){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:r.address,recovery_method:r.recovery_method});let l=await this._proxy.recover({accessToken:c,entropyId:e,entropyIdVerifier:n});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:r.address,recovery_method:r.recovery_method}),l.entropyId}if(r.recovery_method==="user-passcode"&&s){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:r.address,recovery_method:r.recovery_method});let l=await this._proxy.recover({accessToken:c,recoveryPassword:s,entropyId:e,entropyIdVerifier:n});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:r.address,recovery_method:r.recovery_method}),l.entropyId}if(["google-drive","icloud"].includes(r.recovery_method)&&o){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:r.address,recovery_method:r.recovery_method});let l=await this._proxy.recover({accessToken:c,recoveryAccessToken:o,entropyId:e,entropyIdVerifier:n});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:r.address,recovery_method:r.recovery_method}),l.entropyId}if(r.recovery_method==="icloud"&&a){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:r.address,recovery_method:"icloud-native"});let l=await this._proxy.recover({accessToken:c,recoverySecretOverride:a,entropyId:e,entropyIdVerifier:n});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:r.address,recovery_method:"icloud-native"}),l.entropyId}if(r.recovery_method==="recovery-encryption-key"&&i){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:r.address,recovery_method:r.recovery_method});let l=await this._proxy.recover({accessToken:c,recoveryKey:i,entropyId:e,entropyIdVerifier:n});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:r.address,recovery_method:r.recovery_method}),l.entropyId}}catch(l){throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_failed",{address:r.address,recovery_method:r.recovery_method,error:l instanceof Error?l.message:`Unable to recover wallet: ${e}`}),l}throw u}}constructor(e,n,r,s,i,o){if(this._chains=Array.from(ci),this._privyInternal=e,n&&(this._proxy=new ta(n,i),s.setProxy(this._proxy)),r){let a=Ud(r);this._chains=a}this._mfa=s,this._mfaPromises=i,this._appApi=o}}let v1=class extends Yi{constructor(){super(),this.rootPromise={current:null},this.submitPromise={current:null}}};var Ku={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(u1,function(){var n=function(i,o){if(o=o||{},typeof i!="function")throw new s("fetch must be a function");if(typeof o!="object")throw new s("defaults must be an object");if(o.retries!==void 0&&!r(o.retries))throw new s("retries must be a positive integer");if(o.retryDelay!==void 0&&!r(o.retryDelay)&&typeof o.retryDelay!="function")throw new s("retryDelay must be a positive integer or a function returning a positive integer");if(o.retryOn!==void 0&&!Array.isArray(o.retryOn)&&typeof o.retryOn!="function")throw new s("retryOn property expects an array or function");var a={retries:3,retryDelay:1e3,retryOn:[]};return o=Object.assign(a,o),function(u,l){var d=o.retries,f=o.retryDelay,h=o.retryOn;if(l&&l.retries!==void 0)if(r(l.retries))d=l.retries;else throw new s("retries must be a positive integer");if(l&&l.retryDelay!==void 0)if(r(l.retryDelay)||typeof l.retryDelay=="function")f=l.retryDelay;else throw new s("retryDelay must be a positive integer or a function returning a positive integer");if(l&&l.retryOn)if(Array.isArray(l.retryOn)||typeof l.retryOn=="function")h=l.retryOn;else throw new s("retryOn property expects an array or function");return new Promise(function(p,y){var b=function(I){var g=typeof Request<"u"&&u instanceof Request?u.clone():u;i(g,l).then(function(m){if(Array.isArray(h)&&h.indexOf(m.status)===-1)p(m);else if(typeof h=="function")try{return Promise.resolve(h(I,null,m)).then(function(w){w?v(I,null,m):p(m)}).catch(y)}catch(w){y(w)}else I<d?v(I,null,m):p(m)}).catch(function(m){if(typeof h=="function")try{Promise.resolve(h(I,m,null)).then(function(w){w?v(I,m,null):y(m)}).catch(function(w){y(w)})}catch(w){y(w)}else I<d?v(I,m,null):y(m)})};function v(I,g,m){var w=typeof f=="function"?f(I,g,m):f;setTimeout(function(){b(++I)},w)}b(0)})}};function r(i){return Number.isInteger(i)&&i>=0}function s(i){this.name="ArgumentError",this.message=i}return n})})(Ku);var _1=Ku.exports;const Zu=Zi(_1);let Yn;const x1=new Uint8Array(16);function I1(){if(!Yn&&(Yn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Yn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Yn(x1)}const Z=[];for(let t=0;t<256;++t)Z.push((t+256).toString(16).slice(1));function E1(t,e=0){return Z[t[e+0]]+Z[t[e+1]]+Z[t[e+2]]+Z[t[e+3]]+"-"+Z[t[e+4]]+Z[t[e+5]]+"-"+Z[t[e+6]]+Z[t[e+7]]+"-"+Z[t[e+8]]+Z[t[e+9]]+"-"+Z[t[e+10]]+Z[t[e+11]]+Z[t[e+12]]+Z[t[e+13]]+Z[t[e+14]]+Z[t[e+15]]}const A1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),sa={randomUUID:A1};function ia(t,e,n){if(sa.randomUUID&&!t)return sa.randomUUID();t=t||{};const r=t.random||(t.rng||I1)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,E1(r)}var U,oa=((U={}).OAUTH_ACCOUNT_SUSPENDED="oauth_account_suspended",U.MISSING_OR_INVALID_PRIVY_APP_ID="missing_or_invalid_privy_app_id",U.MISSING_OR_INVALID_PRIVY_CLIENT_ID="missing_or_invalid_privy_client_id",U.MISSING_OR_INVALID_PRIVY_ACCOUNT_ID="missing_or_invalid_privy_account_id",U.MISSING_OR_INVALID_TOKEN="missing_or_invalid_token",U.MISSING_MFA_ENROLLMENT="missing_mfa_enrollment",U.MISSING_OR_INVALID_MFA="missing_or_invalid_mfa",U.EXPIRED_OR_INVALID_MFA_TOKEN="expired_or_invalid_mfa_token",U.INVALID_DATA="invalid_data",U.INVALID_CREDENTIALS="invalid_credentials",U.INVALID_CAPTCHA="invalid_captcha",U.LINKED_TO_ANOTHER_USER="linked_to_another_user",U.ALLOWLIST_REJECTED="allowlist_rejected",U.CANNOT_UNLINK_EMBEDDED_WALLET="cannot_unlink_embedded_wallet",U.CANNOT_UNLINK_SOLE_ACCOUNT="cannot_unlink_sole_account",U.CANNOT_LINK_MORE_OF_TYPE="cannot_link_more_of_type",U.LINKED_ACCOUNT_NOT_FOUND="linked_account_not_found",U.TOO_MANY_REQUESTS="too_many_requests",U.RESOURCE_CONFLICT="resource_conflict",U.INVALID_ORIGIN="invalid_origin",U.MISSING_ORIGIN="missing_origin",U.INVALID_NATIVE_APP_ID="invalid_native_app_id",U.TOKEN_ALREADY_USED="token_already_used",U.ALREADY_LOGGED_OUT="already_logged_out",U.NOT_SUPPORTED="not_supported",U.USER_UNSUBSCRIBED="user_unsubscribed",U.MAX_APPS_REACHED="max_apps_reached",U.USER_LIMIT_REACHED="max_accounts_reached",U.DEVICE_REVOKED="device_revoked",U.WALLET_PASSWORD_EXISTS="wallet_password_exists",U.OAUTH_STATE_MISMATCH="oauth_state_mismatch",U.MAX_DENYLIST_ENTRIES_REACHED="max_denylist_entries_reached",U.MAX_TEST_ACCOUNTS_REACHED="max_test_accounts_reached",U.DISALLOWED_LOGIN_METHOD="disallowed_login_method",U.DISALLOWED_PLUS_EMAIL="disallowed_plus_email",U.DISALLOWED_RECOVERY_METHOD="disallowed_recovery_method",U.LEGACY_DASHBOARD_LOGIN_CONFIGURATION="legacy_dashboard_login_configuration",U.CANNOT_SET_PASSWORD="cannot_set_password",U.INVALID_PKCE_PARAMETERS="invalid_pkce_parameters",U.INVALID_APP_URL_SCHEME_CONFIGURATION="invalid_app_url_scheme_configuration",U.CROSS_APP_CONNECTION_NOT_ALLOWED="cross_app_connection_not_allowed",U.USER_DOES_NOT_EXIST="user_does_not_exist",U.ALREADY_EXISTS="resource_already_exists",U.ACCOUNT_TRANSFER_REQUIRED="account_transfer_required",U.USER_HAS_NOT_DELEGATED_WALLET="user_has_not_delegated_wallet",U.FEATURE_NOT_ENABLED="feature_not_enabled",U.INSUFFICIENT_FUNDS="insufficient_funds",U.TRANSACTION_BROADCAST_FAILURE="transaction_broadcast_failure",U.TRANSACTION_EXECUTION_FAILURE="transaction_execution_failure",U.INVALID_POLICY_FORMAT="invalid_policy_format",U.POLICY_VIOLATION="policy_violation",U.AUTHORIZATION_KEY_HAS_ASSOCIATED_WALLETS="authorization_key_has_associated_wallets",U.INVALID_REQUEST="invalid_request",U.SIGNUP_DISABLED="signup_disabled",U);/*! js-cookie v3.0.5 | MIT */function Jn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var P1={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function ti(t,e){function n(s,i,o){if(!(typeof document>"u")){o=Jn({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var c in o)o[c]&&(a+="; "+c,o[c]!==!0&&(a+="="+o[c].split(";")[0]));return document.cookie=s+"="+t.write(i,s)+a}}function r(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var i=document.cookie?document.cookie.split("; "):[],o={},a=0;a<i.length;a++){var c=i[a].split("="),u=c.slice(1).join("=");try{var l=decodeURIComponent(c[0]);if(o[l]=t.read(u,l),s===l)break}catch{}}return s?o[s]:o}}return Object.create({set:n,get:r,remove:function(s,i){n(s,"",Jn({},i,{expires:-1}))},withAttributes:function(s){return ti(this.converter,Jn({},this.attributes,s))},withConverter:function(s){return ti(Jn({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var ue=ti(P1,{path:"/"});const aa=Promise.allSettled.bind(Promise)??(t=>Promise.all(t.map(e=>e.then(n=>({status:"fulfilled",value:n})).catch(n=>({status:"rejected",reason:n})))));let $t="privy:token",ds="privy-token",fs="privy:pat",Xn="privy:refresh_token",hs="privy-refresh-token",Tt="privy:id-token",ps="privy-id-token",Qn="privy-session";class Yu extends Yi{set isUsingServerCookies(e){this._isUsingServerCookies=e}async getCustomerAccessToken(){let e=await this._storage.get($t);try{return typeof e=="string"?new St(e).value:null}catch(n){return console.error(n),await this.destroyLocalState({reason:"getToken_error"}),null}}async getPrivyAccessToken(){let e=await this._storage.get(fs);try{return typeof e=="string"?new St(e).value:null}catch(n){return console.error(n),await this.destroyLocalState({reason:"getToken_error"}),null}}async getRefreshToken(){let e=await this._storage.get(Xn);return typeof e=="string"?e:null}async getIdentityToken(){let e=await this._storage.get(Tt);return typeof e=="string"?e:null}get mightHaveServerCookies(){try{let e=ue.get(Qn);return e!==void 0&&e.length>0}catch(e){console.error(e)}return!1}hasRefreshCredentials(e,n){return this.mightHaveServerCookies||typeof e=="string"&&typeof n=="string"}tokenIsActive(e){if(!e)return!1;let n=St.parse(e);return n!==null&&!n.isExpired(30)}async destroyLocalState(e){await aa([this._storage.del($t),this._storage.del(Xn),this._storage.del(Tt),this._storage.del(this.GUEST_CREDENTIAL_STORAGE_KEY)]),ue.remove(ds),ue.remove(hs),ue.remove(ps),ue.remove(Qn),e!=null&&e.reason&&this.emit("storage_cleared",{reason:e.reason})}async storeCustomerAccessToken(e){var n;if(typeof e=="string"){let r=await this._storage.get($t);if(await this._storage.put($t,e),!this._isUsingServerCookies){let s=(n=St.parse(e))==null?void 0:n.expiration;ue.set(ds,e,{sameSite:"Strict",secure:!0,expires:s?new Date(1e3*s):void 0})}r!==e&&this.emit("token_stored",{cookiesEnabled:this._isUsingServerCookies})}else{let r=await this._storage.get($t);await this._storage.del($t),ue.remove(ds),r!==null&&this.emit("token_cleared",{reason:"set_with_non_string_value"})}}async storePrivyAccessToken(e){typeof e=="string"?await this._storage.put(fs,e):await this._storage.del(fs)}async storeRefreshToken(e){typeof e=="string"?(await this._storage.put(Xn,e),this._isUsingServerCookies||(ue.set(Qn,"t",{sameSite:"Strict",secure:!0,expires:30}),ue.set(hs,e,{sameSite:"Strict",secure:!0,expires:30})),this.emit("refresh_token_stored",{cookiesEnabled:this._isUsingServerCookies})):(await this._storage.del(Xn),ue.remove(hs),ue.remove(Qn),this.emit("refresh_token_cleared",{reason:"set_with_non_string_value"}))}async updateWithTokensResponse(e){let n=(await aa([this.storeCustomerAccessToken(e.token),this.storePrivyAccessToken(e.privy_access_token),this.storeRefreshToken(e.refresh_token),this.storeIdentityToken(e.identity_token),this.processOAuthTokens(e.oauth_tokens)])).filter(r=>r.status==="rejected");n.length>0&&this.emit("error_storing_tokens",n.map(r=>String(r.reason)).join(", "))}async processOAuthTokens(e){e&&this.emit("oauth_tokens_granted",e)}async storeIdentityToken(e){var n;if(typeof e=="string"){let r=await this._storage.get(Tt);if(await this._storage.put(Tt,e),!this._isUsingServerCookies){let s=(n=St.parse(e))==null?void 0:n.expiration;ue.set(ps,e,{sameSite:"Strict",secure:!0,expires:s?new Date(1e3*s):void 0})}r!==e&&this.emit("identity_token_stored",{cookiesEnabled:this._isUsingServerCookies})}else{let r=await this._storage.get(Tt);await this._storage.del(Tt),ue.remove(ps),r!==null&&this.emit("identity_token_cleared",{reason:"set_with_non_string_value"})}}async getOrCreateGuestCredential(){let e=this._storage.get(this.GUEST_CREDENTIAL_STORAGE_KEY);if(e&&typeof e=="string")return e;let n=ni(crypto.getRandomValues(new Uint8Array(32)));return await this._storage.put(this.GUEST_CREDENTIAL_STORAGE_KEY,n),n}constructor(e){super(),this._isUsingServerCookies=!1,this._storage=e.storage,this.GUEST_CREDENTIAL_STORAGE_KEY=`privy:guest:${e.appId}`}}Yu.events=["storage_cleared","token_cleared","refresh_token_cleared","identity_token_cleared","token_stored","refresh_token_stored","identity_token_stored","oauth_tokens_granted","error_storing_tokens"];var k1=t=>{let e=new AbortController;return setTimeout(()=>e.abort(),t),e.signal};function $1(t){let e=new URLSearchParams;for(let n in t)t[n]!=null&&e.append(n,String(t[n]));return Array.from(e).length?"?"+e.toString():""}const er=()=>{};let Ze={NONE:Number.NEGATIVE_INFINITY,ERROR:1,WARN:2,INFO:3,DEBUG:Number.POSITIVE_INFINITY};const T1=({level:t}={level:"ERROR"})=>({get level(){return t},error:Ze[t]>=Ze.ERROR?console.error:er,warn:Ze[t]>=Ze.WARN?console.warn:er,info:Ze[t]>=Ze.INFO?console.info:er,debug:Ze[t]>=Ze.DEBUG?console.debug:er});let ys="privy:caid",S1=class{setCallbacks(e){this.callbacks={...this.callbacks,...e}}get isReady(){return!!this._config}get config(){return this._config}get caid(){return this._analyticsId}async _initialize(){var e,n,r,s,i;if(this.isReady)(n=(e=this.callbacks)==null?void 0:e.setIsReady)==null||n.call(e,!0);else{if(!await this.isStorageAccessible())throw new G({code:"storage_error",error:"Unable to access storage"});this._config=await this.getAppConfig(),(r=this._config)!=null&&r.custom_api_url&&(this.baseUrl=this._config.custom_api_url,this.session.isUsingServerCookies=!0),(i=(s=this.callbacks)==null?void 0:s.setIsReady)==null||i.call(s,!0),this._sdkVersion.startsWith("react-auth:")||this.createAnalyticsEvent("sdk_initialize",{})}}getPath(e,{params:n,query:r}){return`${this.baseUrl}${Gl(e.path,n)}${$1(r)}`}async fetch(e,{body:n,params:r,query:s,headers:i,onRequest:o=this._beforeRequest.bind(this)}){let a=new Request(this.getPath(e,{params:r,query:s}),{method:e.method,body:JSON.stringify(n),headers:i}),c=await o(a),u=await this._fetch(a,c),l=await u.json();if(u.status>299)throw new zr(l);return l}async _beforeRequestWithoutInitialize(e){let n=await this.session.getPrivyAccessToken()??await this.session.getCustomerAccessToken(),r=new Headers(e.headers);r.set("privy-app-id",this.appId),this.appClientId&&r.set("privy-client-id",this.appClientId),r.set("privy-client",this._sdkVersion),n&&r.set("Authorization",`Bearer ${n}`),r.set("Content-Type","application/json"),r.set("Accept","application/json");let s=await this._getOrGenerateClientAnalyticsId();return s&&r.set("privy-ca-id",s),this.nativeAppIdentifier&&r.set("x-native-app-identifier",this.nativeAppIdentifier),{signal:k1(2e4),headers:r,credentials:"include"}}async beforeRequestWithoutRefresh(e){return await this._initialize(),this._beforeRequestWithoutInitialize(e)}async _beforeRequest(e){return await this._initialize(),await this.getAccessTokenInternal(),this.beforeRequestWithoutRefresh(e)}async getAppConfig(){return await this.fetch(rl,{params:{app_id:this.appId},onRequest:this._beforeRequestWithoutInitialize.bind(this)})}async _getOrGenerateClientAnalyticsId(){if(this._analyticsId)return this._analyticsId;try{let e=await this._storage.get(ys);if(typeof e=="string"&&e.length>0)return this._analyticsId=e,e}catch(e){this.logger.error("Unable to load clientId",e)}try{this._analyticsId=ia()}catch(e){this.logger.error("Unable to generate uuidv4",e)}if(this._analyticsId){try{await this._storage.put(ys,this._analyticsId)}catch(e){this.logger.error(`Unable to store clientId: ${this._analyticsId}`,e)}return this._analyticsId}}async destroyClientAnalyticsId(){try{return await this._storage.del(ys)}catch(e){this.logger.error("Unable to delete clientId",e)}}async createAnalyticsEvent(e,n){try{await this.fetch(nl,{body:{event_name:e,client_id:await this._getOrGenerateClientAnalyticsId(),payload:n},onRequest:this.beforeRequestWithoutRefresh.bind(this)})}catch{}}async refreshSession(e=!1){if(!await this.isStorageAccessible())throw new G({code:"storage_error",error:"Unable to access storage"});let n=await this.session.getRefreshToken()??void 0,r=n??"key",s=this._cache.get(r);if(s)return this.logger.debug("[privy:refresh] found in-flight session refresh request, deduping"),await s;let i=this._refreshSession(n,e);this._cache.set(r,i);try{return await i}finally{this._cache.delete(r)}}async _refreshSession(e,n){var s,i,o,a,c,u;let r=await this.session.getCustomerAccessToken();if(!this.session.hasRefreshCredentials(r,e??null))throw this.logger.debug("[privy:refresh] missing tokens, skipping request"),await this._initialize(),new zr({code:oa.MISSING_OR_INVALID_TOKEN,error:"No tokens found in storage"});try{this.logger.debug(`[privy:refresh] fetching: ${Xi.path}`);let l=await this.fetch(Xi,{body:{refresh_token:e},onRequest:this.beforeRequestWithoutRefresh.bind(this)}),d=l.session_update_action;return this.logger.debug(`[privy:refresh] response: ${d}`),n||((i=(s=this.callbacks)==null?void 0:s.setUser)==null||i.call(s,l.user)),d==="set"&&(await this.session.updateWithTokensResponse(l),this.logger.debug("[privy:refresh] tokens stored")),d==="clear"&&(await this.session.destroyLocalState(),this.logger.debug("[privy:refresh] tokens cleared"),n||((a=(o=this.callbacks)==null?void 0:o.setUser)==null||a.call(o,null))),d==="ignore"&&l.token&&(await this.session.storeCustomerAccessToken(l.token),await this.session.storePrivyAccessToken(l.privy_access_token),this.logger.debug("[privy:refresh] access token stored"),l.identity_token&&(this.logger.debug("[privy:refresh] identity token stored"),await this.session.storeIdentityToken(l.identity_token))),this.logger.debug("[privy:refresh] returning response"),l}catch(l){throw this.logger.debug(`[privy:refresh] error: ${l.message??"unknown error"}`),l instanceof zr&&l.code===oa.MISSING_OR_INVALID_TOKEN&&(await this.session.destroyLocalState(),n||((u=(c=this.callbacks)==null?void 0:c.setUser)==null||u.call(c,null))),l}}async getAccessToken(){let[e,n]=await Promise.all([this.session.getCustomerAccessToken(),this.session.getRefreshToken()]);if(!this.session.tokenIsActive(e)&&this.session.hasRefreshCredentials(e,n)){let r=await this.refreshSession(),s=await this.session.getCustomerAccessToken();return r.token||this.logger.debug("[privy:getAccessToken] expected token received null"),r.token===e&&this.logger.debug("[privy:getAccessToken] expected new token in response received existing"),s===e&&this.logger.debug("[privy:getAccessToken] expected new token in storage received existing"),r.token??s}return e}async getAccessTokenInternal(){let e=await this.getAccessToken();return await this.session.getPrivyAccessToken()??e}async getIdentityToken(){return await this.session.getIdentityToken()}async isStorageAccessible(){try{let e=`privy:__storage__test-${ia()}`,n="blobby";await this._storage.put(e,n);let r=await this._storage.get(e);return await this._storage.del(e),r===n}catch(e){return this.logger.error(e),!1}}constructor(e){this._sdkVersion="js-sdk-core:0.58.5",this._cache=new Map,this.logger=T1({level:e.logLevel??"ERROR"}),this._storage=e.storage,this._analyticsId=null,this._getOrGenerateClientAnalyticsId(),this.baseUrl=e.baseUrl??"https://auth.privy.io",this.appId=e.appId,this.appClientId=e.appClientId,this._sdkVersion=e.sdkVersion??this._sdkVersion,this.callbacks=e.callbacks,this.nativeAppIdentifier=e.nativeAppIdentifier,this.session=new Yu({storage:this._storage,isUsingServerCookies:!1,appId:e.appId}),this._fetch=Zu(globalThis.fetch,{retries:3,retryDelay:n=>3**n*500,retryOn:[408,409,425,500,502,503,504]}),this.session.on("error_storing_tokens",n=>{this.createAnalyticsEvent("error_updating_tokens_in_storage",{reason:n})})}},O1=class{async get(){let{user:e}=await this._privyInternal.refreshSession();return{user:e}}async acceptTerms(){return{user:await this._privyInternal.fetch(ed,{})}}constructor(e){this._privyInternal=e}};const Ju=t=>t.type==="wallet"&&t.wallet_client_type==="privy"&&t.connector_type==="embedded",Xu=t=>t?t.linked_accounts.filter(Ju).filter(e=>e.chain_type==="ethereum").sort((e,n)=>e.wallet_index-n.wallet_index):[],ca=t=>Xu(t).find(e=>e.wallet_index===0)??null,Qu=t=>t?t.linked_accounts.filter(Ju).filter(e=>e.chain_type==="solana").sort((e,n)=>e.wallet_index-n.wallet_index):[],B1=t=>Qu(t).find(e=>e.wallet_index===0)??null,C1=(t,e)=>!(e==="off"||Xu(t).length>0||t.linked_accounts.filter(n=>n.type==="wallet"&&n.chain_type==="ethereum").length>0&&e!=="all-users"),R1=(t,e)=>!(e==="off"||Qu(t).length>0||t.linked_accounts.filter(n=>n.type==="wallet"&&n.chain_type==="solana").length>0&&e!=="all-users"),Ie=async(t,e,n)=>{var i,o;let r=C1(e.user,((i=n==null?void 0:n.ethereum)==null?void 0:i.createOnLogin)??"off"),s=R1(e.user,((o=n==null?void 0:n.solana)==null?void 0:o.createOnLogin)??"off");if(r&&s){let a=await t.create({recoveryMethod:"privy",skipCallbacks:!0});return{...await t.createSolana({ethereumAccount:ca(a.user)??void 0}),is_new_user:e.is_new_user,oauth_tokens:e.oauth_tokens}}return r?{...await t.create({recoveryMethod:"privy",solanaAccount:B1(e.user)??void 0}),is_new_user:e.is_new_user,oauth_tokens:e.oauth_tokens}:s?{...await t.createSolana({ethereumAccount:ca(e.user)??void 0}),is_new_user:e.is_new_user,oauth_tokens:e.oauth_tokens}:e};let N1=class{async syncWithToken(e,n,r){var o,a;let s=await this._privyInternal.fetch(al,{body:{token:e,mode:r}});await this._privyInternal.session.updateWithTokensResponse(s);let i=await Ie(this._embedded,s,n==null?void 0:n.embedded);return(a=(o=this._privyInternal.callbacks)==null?void 0:o.setUser)==null||a.call(o,i.user),i}constructor(e,n){this._privyInternal=e,this._embedded=n}},M1=class{async sendCode(e,n){return this._privyInternal.fetch(Tl,{body:{email:e,token:n}})}async loginWithCode(e,n,r,s){var a,c;let i=await this._privyInternal.fetch($l,{body:{email:e,code:n,mode:r}});await this._privyInternal.session.updateWithTokensResponse(i);let o=await Ie(this._embedded,i,s==null?void 0:s.embedded);return(c=(a=this._privyInternal.callbacks)==null?void 0:a.setUser)==null||c.call(a,o.user),o}async linkWithCode(e,n){await this._privyInternal.fetch(Sl,{body:{email:e,code:n}});let r=await this._privyInternal.refreshSession();return{user:r.user,identity_token:r.identity_token}}async updateEmail({oldEmailAddress:e,newEmailAddress:n,code:r}){await this._privyInternal.fetch(Bl,{body:{oldAddress:e,newAddress:n,code:r}});let s=await this._privyInternal.refreshSession();return{user:s.user,identity_token:s.identity_token}}async unlink(e){await this._privyInternal.fetch(Ol,{body:{address:e}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}constructor(e,n){this._privyInternal=e,this._embedded=n}},U1=class{async initializeAuth({relyingParty:e,redirectUrl:n,token:r}){return await this._privyInternal.fetch(cl,{body:{relying_party:e,redirect_url:n,token:r}})}async getFarcasterStatus({channel_token:e}){return await this._privyInternal.fetch(fl,{headers:{"farcaster-channel-token":e}})}async authenticate({channel_token:e,message:n,signature:r,fid:s,mode:i},o){var u,l;let a=await this._privyInternal.fetch(ul,{body:{channel_token:e,message:n,signature:r,fid:s,mode:i}});await this._privyInternal.session.updateWithTokensResponse(a);let c=await Ie(this._embedded,a,o==null?void 0:o.embedded);return(l=(u=this._privyInternal.callbacks)==null?void 0:u.setUser)==null||l.call(u,c.user),c}async link({channel_token:e,message:n,signature:r,fid:s}){await this._privyInternal.fetch(ll,{body:{channel_token:e,message:n,signature:r,fid:s}});let i=await this._privyInternal.refreshSession();return{user:i.user,identity_token:i.identity_token}}async unlink({fid:e}){await this._privyInternal.fetch(dl,{body:{fid:e}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}constructor(e,n){this._privyInternal=e,this._embedded=n}},F1=class{async initializeAuth(){return await this._privyInternal.fetch(hl,{body:{}})}async authenticate({message:e,signature:n,fid:r},s){var a,c;let i=await this._privyInternal.fetch(pl,{body:{message:e,signature:n,fid:r}});await this._privyInternal.session.updateWithTokensResponse(i);let o=await Ie(this._embedded,i,s==null?void 0:s.embedded);return(c=(a=this._privyInternal.callbacks)==null?void 0:a.setUser)==null||c.call(a,o.user),o}constructor(e,n){this._privyInternal=e,this._embedded=n}};class L1{async create(e){var i,o;let n=await this._privyInternal.session.getOrCreateGuestCredential(),r=await this._privyInternal.fetch(yl,{body:{guest_credential:n}});await this._privyInternal.session.updateWithTokensResponse(r);let s=await Ie(this._embedded,r,e==null?void 0:e.embedded);return(o=(i=this._privyInternal.callbacks)==null?void 0:i.setUser)==null||o.call(i,s.user),s}constructor(e,n){this._privyInternal=e,this._embedded=n}}const Xe="privy:state_code",Qe="privy:code_verifier";async function z1(t,e){let n=new TextEncoder().encode(t);return new Uint8Array(await e("SHA-256",n))}function D1(t){return crypto.getRandomValues(new Uint8Array(t))}function Ji(){return ni(D1(36))}function el(){return Ji()}async function tl({codeVerifier:t,method:e="S256",digest:n=crypto.subtle.digest.bind(crypto.subtle)}){if(e!="S256")return t;{let r=await z1(t,n);return ni(r)}}class j1{async generateURL(e,n){var o;let r=Ji(),s=el(),i=await tl({codeVerifier:r,digest:(o=this._crypto)==null?void 0:o.digest});return await Promise.all([this._storage.put(Qe,r),this._storage.put(Xe,s)]),this._privyInternal.fetch(wl,{body:{redirect_to:n,provider:e,code_challenge:i,state_code:s}})}async loginWithCode(e,n,r,s,i,o){var d,f;let[a,c]=await Promise.all([this._storage.get(Qe),this._storage.get(Xe)]);if(c!==n)throw this._privyInternal.createAnalyticsEvent("possible_phishing_attempt",{flow:"oauth",provider:r,storedStateCode:c??"",returnedStateCode:n??""}),new G({code:"pkce_state_code_mismatch",error:"Unexpected auth flow. This may be a phishing attempt."});let u=await this._privyInternal.fetch(gl,{body:{authorization_code:e,code_type:s,state_code:c,code_verifier:a,mode:i}});await this._privyInternal.session.updateWithTokensResponse(u);let l=await Ie(this._embedded,u,o==null?void 0:o.embedded);return await Promise.all([this._storage.del(Qe),this._storage.del(Xe)]),(f=(d=this._privyInternal.callbacks)==null?void 0:d.setUser)==null||f.call(d,l.user),l}async linkWithCode(e,n,r,s){let[i,o]=await Promise.all([this._storage.get(Qe),this._storage.get(Xe)]);if(o!==n)throw this._privyInternal.createAnalyticsEvent("possible_phishing_attempt",{flow:"oauth",provider:r,storedStateCode:o??"",returnedStateCode:n??""}),new G({code:"pkce_state_code_mismatch",error:"Unexpected auth flow. This may be a phishing attempt."});let a=await this._privyInternal.fetch(vl,{body:{authorization_code:e,code_type:s,state_code:o,code_verifier:i}});await this._privyInternal.session.processOAuthTokens(a.oauth_tokens);let c=await this._privyInternal.refreshSession();return await Promise.all([this._storage.del(Qe),this._storage.del(Xe)]),{user:c.user,identity_token:c.identity_token}}async unlink(e,n){await this._privyInternal.fetch(_l,{body:{provider:e,subject:n}});let r=await this._privyInternal.refreshSession();return{user:r.user,identity_token:r.identity_token}}constructor(e,n,r,s){this._privyInternal=e,this._embedded=n,this._storage=r,this._crypto=s}}let G1=class{async generateRegistrationOptions(e){return await this._privyInternal.fetch(kl,{body:{relying_party:e}})}async generateAuthenticationOptions(e){return await this._privyInternal.fetch(Al,{body:{relying_party:e}})}async generateSignupOptions(e){return await this._privyInternal.fetch(Pl,{body:{relying_party:e}})}async loginWithPasskey(e,n,r,s){var a,c;let i=await this._privyInternal.fetch(Il,{body:{relying_party:r,challenge:n,authenticator_response:this._transformAuthenticationResponseToSnakeCase(e)}});await this._privyInternal.session.updateWithTokensResponse(i);let o=await Ie(this._embedded,i,s==null?void 0:s.embedded);return(c=(a=this._privyInternal.callbacks)==null?void 0:a.setUser)==null||c.call(a,o.user),o}async signupWithPasskey(e,n,r){var o,a;let s=await this._privyInternal.fetch(El,{body:{relying_party:n,authenticator_response:this._transformRegistrationResponseToSnakeCase(e)}});await this._privyInternal.session.updateWithTokensResponse(s);let i=await Ie(this._embedded,s,r==null?void 0:r.embedded);return(a=(o=this._privyInternal.callbacks)==null?void 0:o.setUser)==null||a.call(o,i.user),i}async linkWithPasskey(e,n){await this._privyInternal.fetch(xl,{body:{relying_party:n,authenticator_response:this._transformRegistrationResponseToSnakeCase(e)}});let r=await this._privyInternal.refreshSession();return{user:r.user,identity_token:r.identity_token}}_transformRegistrationResponseToSnakeCase(e){return{type:e.type,id:e.id,raw_id:e.rawId,response:{client_data_json:e.response.clientDataJSON,attestation_object:e.response.attestationObject,authenticator_data:e.response.authenticatorData||void 0,transports:e.response.transports||void 0,public_key:e.response.publicKey||void 0,public_key_algorithm:e.response.publicKeyAlgorithm||void 0},authenticator_attachment:e.authenticatorAttachment||void 0,client_extension_results:{app_id:e.clientExtensionResults.appid||void 0,cred_props:e.clientExtensionResults.credProps||void 0,hmac_create_secret:e.clientExtensionResults.hmacCreateSecret||void 0}}}_transformAuthenticationResponseToSnakeCase(e){return{type:e.type,id:e.id,raw_id:e.rawId,response:{signature:e.response.signature,client_data_json:e.response.clientDataJSON,authenticator_data:e.response.authenticatorData,user_handle:e.response.userHandle||void 0},authenticator_attachment:e.authenticatorAttachment||void 0,client_extension_results:{app_id:e.clientExtensionResults.appid||void 0,cred_props:e.clientExtensionResults.credProps||void 0,hmac_create_secret:e.clientExtensionResults.hmacCreateSecret||void 0}}}constructor(e,n){this._privyInternal=e,this._embedded=n}},q1=class{async sendCode(e,n){return this._privyInternal.fetch(Rl,{body:{phoneNumber:e,token:n}})}async loginWithCode(e,n,r,s){var a,c;let i=await this._privyInternal.fetch(Cl,{body:{phoneNumber:e,code:n,mode:r}});await this._privyInternal.session.updateWithTokensResponse(i);let o=await Ie(this._embedded,i,s==null?void 0:s.embedded);return(c=(a=this._privyInternal.callbacks)==null?void 0:a.setUser)==null||c.call(a,o.user),o}async linkWithCode(e,n){await this._privyInternal.fetch(Nl,{body:{phoneNumber:e,code:n}});let r=await this._privyInternal.refreshSession();return{user:r.user,identity_token:r.identity_token}}async updatePhone({oldPhoneNumber:e,newPhoneNumber:n,code:r}){await this._privyInternal.fetch(Ul,{body:{old_phone_number:e,new_phone_number:n,code:r}});let s=await this._privyInternal.refreshSession();return{user:s.user,identity_token:s.identity_token}}async unlink(e){await this._privyInternal.fetch(Ml,{body:{phoneNumber:e}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}constructor(e,n){this._privyInternal=e,this._embedded=n}},V1=class{async unlinkWallet(e){await this._privyInternal.fetch(Zl,{body:{address:e}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}async linkWithSiwe(e,n,r){let s=n||this._wallet,i=r||this._preparedMessage;if(!s)throw Error("A wallet must be provided in the init step or as an argument to linkWithSiwe");if(!i)throw Error("A message must be generated and signed before being used to link a wallet to privy");await this._privyInternal.fetch(Wl,{body:{message:i,signature:e,chainId:s.chainId,walletClientType:s.walletClientType??null,connectorType:s.connectorType??null}});let o=await this._privyInternal.refreshSession();return{user:o.user,identity_token:o.identity_token}}async loginWithSiwe(e,n,r,s,i){var l,d;let o=n||this._wallet,a=r||this._preparedMessage;if(!o)throw Error("A wallet must be provided in the init step or as an argument to loginWithSiwe");if(!a)throw Error("A message must be generated and signed before being used to login to privy with a wallet");let c=await this._privyInternal.fetch(Hl,{body:{signature:e,message:a,chainId:o.chainId,walletClientType:o.walletClientType??null,connectorType:o.connectorType??null,mode:s}});await this._privyInternal.session.updateWithTokensResponse(c);let u=await Ie(this._embedded,c,i==null?void 0:i.embedded);return(d=(l=this._privyInternal.callbacks)==null?void 0:l.setUser)==null||d.call(l,u.user),u}async init(e,n,r){var s;this._wallet=e;let{nonce:i}=await this._privyInternal.fetch(ya,{body:{address:e.address}}),o=`${(s={chainId:e.chainId.toString().replace("eip155:",""),address:e.address,issuedAt:new Date().toISOString(),statement:"By signing, you are proving you own this wallet and logging in. This does not initiate a transaction or cost any fees.",domain:n,nonce:i,uri:r}).domain} wants you to sign in with your Ethereum account:
${s.address}

${s.statement}

URI: ${s.uri}
Version: 1
Chain ID: ${s.chainId}
Nonce: ${s.nonce}
Issued At: ${s.issuedAt}
Resources:
- https://privy.io`;return this._preparedMessage=o,{nonce:i,message:o}}constructor(e,n){this._wallet=void 0,this._privyInternal=e,this._embedded=n}},H1=class{async unlink({address:e}){await this._privyInternal.fetch(Ql,{body:{address:e}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}async link({message:e,signature:n,walletClientType:r,connectorType:s}){await this._privyInternal.fetch(Xl,{body:{message:e,signature:n,walletClientType:r??null,connectorType:s??null}});let i=await this._privyInternal.refreshSession();return{user:i.user,identity_token:i.identity_token}}async login({mode:e,message:n,signature:r,walletClientType:s,connectorType:i,opts:o}){var u,l;let a=await this._privyInternal.fetch(Jl,{body:{signature:r,message:n,walletClientType:s??null,connectorType:i??null,mode:e}});await this._privyInternal.session.updateWithTokensResponse(a);let c=await Ie(this._embedded,a,o==null?void 0:o.embedded);return(l=(u=this._privyInternal.callbacks)==null?void 0:u.setUser)==null||l.call(u,c.user),c}async fetchNonce({address:e}){let{nonce:n}=await this._privyInternal.fetch(Yl,{body:{address:e}});return{nonce:n}}constructor(e,n){this._privyInternal=e,this._embedded=n}},W1=class{async link(e,n,r,s){await this._privyInternal.fetch(Kl,{body:{message:e,signature:n,smart_wallet_type:r,smart_wallet_version:s}});let i=await this._privyInternal.refreshSession();return{user:i.user,identity_token:i.identity_token}}async init(e){var n;let{nonce:r}=await this._privyInternal.fetch(ya,{body:{address:e.address}});return{nonce:r,message:`${(n={chainId:e.chainId.toString().replace("eip155:",""),address:e.address,issuedAt:new Date().toISOString(),statement:"By signing, you are proving you own this wallet and logging in. This does not initiate a transaction or cost any fees.",domain:"privy.io",uri:"https://auth.privy.io",nonce:r}).domain} wants you to sign in with your Ethereum account:
${n.address}

${n.statement}

URI: ${n.uri}
Version: 1
Chain ID: ${n.chainId}
Nonce: ${n.nonce}
Issued At: ${n.issuedAt}
Resources:
- https://privy.io`}}constructor(e){this._privyInternal=e}},K1=class{async logout(e){var n,r;try{let s=await this._privyInternal.session.getRefreshToken()??void 0;await this._privyInternal.fetch(ql,{body:{refresh_token:s}})}catch{console.warn("Error destroying session")}await Promise.all([this._privyInternal.session.destroyLocalState({reason:"logout"}),this._privyInternal.destroyClientAnalyticsId(),(e==null?void 0:e.userId)&&this._mfa.clearMfa({userId:e.userId})]),(r=(n=this._privyInternal.callbacks)==null?void 0:n.setUser)==null||r.call(n,null)}constructor(e,n,r,s,i){this._privyInternal=e,this._mfa=i,this.customProvider=new N1(this._privyInternal,n),this.phone=new q1(this._privyInternal,n),this.email=new M1(this._privyInternal,n),this.oauth=new j1(this._privyInternal,n,r,s),this.guest=new L1(this._privyInternal,n),this.siwe=new V1(this._privyInternal,n),this.siws=new H1(this._privyInternal,n),this.smartWallet=new W1(this._privyInternal),this.passkey=new G1(this._privyInternal,n),this.farcaster=new U1(this._privyInternal,n),this.farcasterV2=new F1(this._privyInternal,n)}};class Z1{async initOnRampSession(e){return await this._privyInternal.fetch(sl,{body:e})}async getStatus(e){return await this._privyInternal.fetch(il,{query:{partnerUserId:e}})}constructor(e){this._privyInternal=e}}const Y1={prod:{url:"https://api.moonpay.com/v1",key:"pk_live_hirbpu0cVcLHrjktC9l7fbc9ctjv0SL"},sandbox:{url:"https://api.moonpay.com/v1",key:"pk_test_fqWjXZMSFwloh7orvJsRfjiUHXJqFzI"}};oi.id,ri.id,ii.id,ai.id,si.id,wa.id;oi.id,ri.id,va.id,ii.id,ai.id,si.id;let J1=class{async sign(e){return await this._privyInternal.fetch(td,{body:e})}async getTransactionStatus({transactionId:e,useSandbox:n}){let{url:r,key:s}=Y1[n?"sandbox":"prod"],i=await Zu(fetch,{retries:3,retryDelay:500})(`${r}/transactions/ext/${e}?apiKey=${s}`);if(!i.ok)throw new Fd({error:`Failed to fetch transaction status for Transaction ${e}`,code:"failed_to_fetch_moonpay_transaction_status",response:i});let o=await i.json();return Array.isArray(o)?o.at(0):void 0}constructor(e){this._privyInternal=e}},X1=class{constructor(e){this.moonpay=new J1(e),this.coinbase=new Z1(e)}};class Q1{async generateAuthenticationOptions(e){return await this._privyInternal.fetch(ml,{body:e})}constructor(e){this._privyInternal=e}}class eg{async sendCode(e){return await this._privyInternal.fetch(bl,{body:e})}constructor(e){this._privyInternal=e}}let tg=class{setProxy(e){this.proxy=e}async getAccessTokenInternal(){let e=await this.privyInternal.getAccessTokenInternal();if(!e)throw new G({error:"Missing access token",code:"attempted_rpc_call_before_logged_in"});return e}async verifyMfa(){if(!this.proxy)throw new G({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return await this.proxy.verifyMfa({accessToken:await this.getAccessTokenInternal()})}async initEnrollMfa(e){if(!this.proxy)throw new G({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return await this.proxy.initEnrollMfa({...e,accessToken:await this.getAccessTokenInternal()})}async submitEnrollMfa(e){if(!this.proxy)throw new G({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});let n=await this.proxy.submitEnrollMfa({...e,accessToken:await this.getAccessTokenInternal()});return await this.privyInternal.refreshSession(),n}async unenrollMfa(e){if(!this.proxy)throw new G({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});let n=await this.proxy.unenrollMfa({method:e,accessToken:await this.getAccessTokenInternal()});return await this.privyInternal.refreshSession(),n}async clearMfa(e){if(!this.proxy)throw new G({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return await this.proxy.clearMfa(e)}constructor(e,n){this.proxy=n,this.privyInternal=e,this.sms=new eg(e),this.passkey=new Q1(e)}},ng=class{async init(t){return this._privyInternal.fetch(Dl,{body:{client_type:t}})}async getICloudConfiguration(t){return this._privyInternal.fetch(jl,{body:{client_type:t}})}constructor(t){this._privyInternal=t}};class rg{async generateURL(e){var i;let n=Ji(),r=el(),s=await tl({codeVerifier:n,digest:(i=this._crypto)==null?void 0:i.digest});return await Promise.all([this._storage.put(Qe,n),this._storage.put(Xe,r)]),this._privyInternal.fetch(Ll,{body:{redirect_to:e,code_challenge:s,state_code:r}})}async authorize(e,n){let[r,s]=await Promise.all([this._storage.get(Qe),this._storage.get(Xe)]);if(s!==n)throw this._privyInternal.createAnalyticsEvent("possible_phishing_attempt",{flow:"recovery_oauth",storedStateCode:s??"",returnedStateCode:n??""}),new G({code:"pkce_state_code_mismatch",error:"Unexpected auth flow. This may be a phishing attempt."});let i=await this._privyInternal.fetch(zl,{body:{authorization_code:e,state_code:s,code_verifier:r}});return await Promise.all([this._storage.del(Qe),this._storage.del(Xe)]),i}constructor(e,n,r){this._privyInternal=e,this._storage=n,this._crypto=r}}class sg{async getRecoveryKeyMaterial(e,n){return this._privyInternal.fetch(Fl,{body:{chain_type:n},params:{address:e}})}constructor(e,n,r){this._privyInternal=e,this.auth=new rg(this._privyInternal,n,r),this.icloudAuth=new ng(this._privyInternal)}}class ig{async initialize(){await this._privyInternal._initialize()}setMessagePoster(e){this.embeddedWallet.setMessagePoster(e)}addOAuthTokensListener(e){return this._privyInternal.session.on("oauth_tokens_granted",e),{unsubscribe:()=>{this._privyInternal.session.removeListener("oauth_tokens_granted",e)}}}setCallbacks(e){this._privyInternal.setCallbacks(e)}getAccessToken(){return this._privyInternal.getAccessToken()}getIdentityToken(){return this._privyInternal.getIdentityToken()}getCompiledPath(e,n){return this._privyInternal.getPath(e,n)}async fetchPrivyRoute(e,n){return this._privyInternal.fetch(e,n)}get logger(){return this._privyInternal.logger}constructor({clientId:e,...n}){this._privyInternal=new S1({...n,appClientId:e}),this.mfa=new tg(this._privyInternal),this.mfaPromises=new v1,this.app=new sd(this._privyInternal),this.embeddedWallet=new w1(this._privyInternal,n.embeddedWalletMessagePoster,n.supportedChains,this.mfa,this.mfaPromises,this.app),this.user=new O1(this._privyInternal),this.auth=new K1(this._privyInternal,this.embeddedWallet,n.storage,n.crypto,this.mfa),this.recovery=new sg(this._privyInternal,n.storage,n.crypto),this.funding=new X1(this._privyInternal),this.delegated=new yd(this._privyInternal),this.crossApp=new ga(this._privyInternal,n.storage)}}window.PrivySDK=ig;function ct(t){return!t||isNaN(t)?"$0":(t=parseFloat(t),t>=1e9?`$${(t/1e9).toFixed(2)}B`:t>=1e6?`$${(t/1e6).toFixed(2)}M`:t>=1e3?`$${(t/1e3).toFixed(2)}K`:`$${t.toFixed(2)}`)}function og(t,e=2){return t==null||isNaN(t)?"0%":(t=parseFloat(t),`${t>=0?"+":""}${t.toFixed(e)}%`)}function ag(t){return!t||isNaN(t)?"":parseFloat(t)>=0?"positive":"negative"}function ms(t,e,n){return t>=e?"good":t>=n?"warn":"bad"}function cg(t){return t?"pass":"fail"}function ug(){var t,e,n,r;return{marketMaking:parseInt((t=document.getElementById("input-marketMaking"))==null?void 0:t.value)||0,buybackBurn:parseInt((e=document.getElementById("input-buybackBurn"))==null?void 0:e.value)||0,liquidity:parseInt((n=document.getElementById("input-liquidity"))==null?void 0:n.value)||0,creatorRevenue:parseInt((r=document.getElementById("input-creatorRevenue"))==null?void 0:r.value)||0}}function lg(){const t=ug(),e=t.marketMaking+t.buybackBurn+t.liquidity+t.creatorRevenue,n=document.getElementById("totalAllocation"),r=document.getElementById("saveAllocBtn");n&&(n.textContent=e+"%",e===100?(n.style.color="var(--gold)",r&&(r.disabled=!1,r.textContent="Save Allocations")):e>100?(n.style.color="var(--error)",n.style.animation="pulse 1s ease-in-out infinite",r&&(r.disabled=!0,r.textContent="Over by "+(e-100)+"%")):(n.style.color="var(--warning)",n.style.animation="pulse 1s ease-in-out infinite",r&&(r.disabled=!0,r.textContent="Under by "+(100-e)+"%")))}var fa;const dg=((fa=window.LAUNCHR_CONFIG)==null?void 0:fa.SOLANA_RPC)||"https://api.mainnet-beta.solana.com";var ha;const bs=((ha=window.LAUNCHR_CONFIG)==null?void 0:ha.PRIVY_APP_ID)||"";var pa;(pa=window.LAUNCHR_CONFIG)!=null&&pa.FEE_WALLET;let Ye=null,Me=null,yr=null,ua=0;document.addEventListener("DOMContentLoaded",async()=>{await fg();const t=localStorage.getItem("connectedWallet");t&&hg(t),la(),lg(),setInterval(la,3e4)});async function la(){try{const e=await(await fetch("/api/tracker/stats")).json(),n=(e.totalDistributed||0)*.01;document.getElementById("holderPoolAmount").textContent=n.toFixed(2)+" SOL",document.getElementById("totalCollected").textContent=(e.totalClaimed||0).toFixed(2)+" SOL",document.getElementById("totalDistributed").textContent=(e.totalDistributed||0).toFixed(2)+" SOL",document.getElementById("holderCount").textContent=e.totalTokens||0,document.getElementById("statClaimed").textContent=(e.totalClaimed||0).toFixed(2),document.getElementById("statHolderPool").textContent=n.toFixed(2),document.getElementById("statDistributed").textContent=((e.totalDistributed||0)*.99).toFixed(2)}catch(t){console.error("[STATS] Failed to fetch:",t)}}async function fg(){if(!bs){console.log("[PRIVY] App ID not configured - Privy disabled");return}try{const t=window.PrivySDK;if(!t){console.error("[PRIVY] SDK not loaded - check Vite build");return}const e={get:n=>localStorage.getItem(n),put:(n,r)=>localStorage.setItem(n,r),del:n=>localStorage.removeItem(n),getKeys:()=>Object.keys(localStorage)};if(console.log("[PRIVY] Initializing with appId:",bs.substring(0,8)+"..."),Ye=new t({appId:bs,storage:e}),Ye.embeddedWallet&&typeof Ye.embeddedWallet.getURL=="function"){const n=Ye.embeddedWallet.getURL();Me=document.createElement("iframe"),Me.src=n,Me.style.cssText="display:none;position:absolute;width:0;height:0;border:none;",Me.id="privy-iframe",document.body.appendChild(Me),Me.onload=()=>{Ye.setMessagePoster&&Ye.setMessagePoster(Me.contentWindow),console.log("[PRIVY] Iframe loaded and message poster set")},window.addEventListener("message",r=>{var s;Me&&r.source===Me.contentWindow&&(s=Ye.embeddedWallet)!=null&&s.onMessage&&Ye.embeddedWallet.onMessage(r.data)})}else console.log("[PRIVY] Embedded wallet not available, using standard auth");console.log("[PRIVY] Initialized successfully")}catch(t){console.error("[PRIVY] Init error:",t.message,t)}}async function hg(t){yr=t;const e=document.getElementById("connectBtn");e.textContent=t.slice(0,4)+"..."+t.slice(-4),e.classList.add("wallet-connected"),await pg(t),localStorage.setItem("connectedWallet",t),yg(),document.getElementById("tokenSelector").style.display="flex",document.getElementById("myLaunchesCard").style.display="block",await gg()}async function pg(t){var e;try{const r=await(await fetch(dg,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:"getBalance",params:[t]})})).json();((e=r.result)==null?void 0:e.value)!==void 0&&(ua=r.result.value/1e9,document.getElementById("walletBalance").textContent=ua.toFixed(4))}catch(n){console.error("[BALANCE]",n)}}function yg(){const t=document.getElementById("launchTokenBtn");t.textContent=yr?"Deploy Token":"Connect Wallet to Launch"}function tr(t){return t?String(t).replace(/[&<>"'`]/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"})[e]||e):""}function mg(t){var w,P,x,E,S,N,T,B,O,D;const e={marketCap:125e3,liquidity:45e3,volume24h:89e3,holders:342,transactions:1247,score:78,priceChange1m:2.5,priceChange5m:8.3,priceChange1h:-3.2,priceChange24h:45.7,buys24h:856,sells24h:391,liqDepth:12.5,volMcapRatio:.71,flow5m:2340,momentum:82,top10Pct:28.5,noMint:!0,noFreeze:!0,organic:85,bundlerPct:2.3,insiderPct:5.1,devHoldPct:3.2,verified:!0},n=document.getElementById("analyticsMcap"),r=document.getElementById("analyticsLiq"),s=document.getElementById("analyticsVol"),i=document.getElementById("analyticsHolders"),o=document.getElementById("analyticsTxns"),a=document.getElementById("analyticsScore");n&&(n.textContent=ct(e.marketCap)),r&&(r.textContent=ct(e.liquidity)),s&&(s.textContent=ct(e.volume24h)),i&&(i.textContent=((w=e.holders)==null?void 0:w.toLocaleString())||"0"),o&&(o.textContent=((P=e.transactions)==null?void 0:P.toLocaleString())||"0"),a&&(a.textContent=e.score||"--"),[{id:"priceChange1m",value:e.priceChange1m},{id:"priceChange5m",value:e.priceChange5m},{id:"priceChange1h",value:e.priceChange1h},{id:"priceChange24h",value:e.priceChange24h}].forEach(({id:_,value:k})=>{const C=document.getElementById(_);C&&(C.textContent=og(k),C.className=`price-change-value ${ag(k)}`)});const u=document.getElementById("buys24h"),l=document.getElementById("sells24h"),d=document.getElementById("liqDepth"),f=document.getElementById("volMcap"),h=document.getElementById("flow5m"),p=document.getElementById("momentum");u&&(u.textContent=((x=e.buys24h)==null?void 0:x.toLocaleString())||"0"),l&&(l.textContent=((E=e.sells24h)==null?void 0:E.toLocaleString())||"0"),d&&(d.textContent=`${((S=e.liqDepth)==null?void 0:S.toFixed(1))||"0"}%`),f&&(f.textContent=`${((e.volMcapRatio||0)*100).toFixed(0)}%`),h&&(h.textContent=e.flow5m>0?`+${ct(e.flow5m)}`:ct(e.flow5m)),p&&(p.textContent=`${e.momentum||0}/100`);const y=document.getElementById("liqDepthBadge"),b=document.getElementById("volMcapBadge"),v=document.getElementById("flowBadge"),I=document.getElementById("momentumBadge");if(y&&(y.className=`trade-metric-badge ${ms(e.liqDepth||0,10,5)}`,y.textContent=e.liqDepth>=10?"Good":e.liqDepth>=5?"Fair":"Low"),b){const _=(e.volMcapRatio||0)*100;b.className=`trade-metric-badge ${ms(_,50,20)}`,b.textContent=_>=50?"Active":_>=20?"Normal":"Low"}v&&(v.className=`trade-metric-badge ${e.flow5m>0?"good":e.flow5m<0?"bad":"warn"}`,v.textContent=e.flow5m>0?"Bullish":e.flow5m<0?"Bearish":"Neutral"),I&&(I.className=`trade-metric-badge ${ms(e.momentum||0,70,40)}`,I.textContent=e.momentum>=70?"Strong":e.momentum>=40?"Normal":"Weak");const g=document.getElementById("safetyScore");if(g){const _=e.score||0;g.textContent=_,g.className=`safety-score-value ${_>=70?"safe":_>=40?"warn":"danger"}`}[{iconId:"top10Icon",valueId:"top10Value",pass:(e.top10Pct||0)<50,value:`${((N=e.top10Pct)==null?void 0:N.toFixed(1))||0}%`},{iconId:"holdersIcon",valueId:"holdersValue",pass:(e.holders||0)>=100,value:((T=e.holders)==null?void 0:T.toLocaleString())||"0"},{iconId:"noMintIcon",valueId:"noMintValue",pass:e.noMint!==!1,value:e.noMint?"Yes":"No"},{iconId:"noFreezeIcon",valueId:"noFreezeValue",pass:e.noFreeze!==!1,value:e.noFreeze?"Yes":"No"},{iconId:"organicIcon",valueId:"organicValue",pass:(e.organic||0)>=60,value:`${e.organic||0}%`},{iconId:"bundlerIcon",valueId:"bundlerValue",pass:(e.bundlerPct||0)<10,value:`${((B=e.bundlerPct)==null?void 0:B.toFixed(1))||0}%`},{iconId:"insiderIcon",valueId:"insiderValue",pass:(e.insiderPct||0)<15,value:`${((O=e.insiderPct)==null?void 0:O.toFixed(1))||0}%`},{iconId:"devHoldIcon",valueId:"devHoldValue",pass:(e.devHoldPct||0)<10,value:`${((D=e.devHoldPct)==null?void 0:D.toFixed(1))||0}%`},{iconId:"verifiedIcon",valueId:"verifiedValue",pass:e.verified,value:e.verified?"Yes":"No"}].forEach(({iconId:_,valueId:k,pass:C,value:$})=>{const R=document.getElementById(_),M=document.getElementById(k);R&&(R.className=`safety-indicator-icon ${cg(C)}`,R.innerHTML=C?"&#x2713;":"&#x2717;"),M&&(M.textContent=$)})}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{mg()},500)});let Nt=[],bg=null;async function gg(){if(yr)try{Nt=(await(await fetch(`/api/my-tokens?wallet=${yr}`)).json()).tokens||[],da()}catch(t){console.error("[MY-TOKENS] Failed to fetch:",t),Nt=[],da()}}function da(){const t=document.getElementById("myLaunchesContent"),e=document.getElementById("myLaunchesCount");if(e.textContent=`${Nt.length} token${Nt.length!==1?"s":""}`,Nt.length===0){t.innerHTML=`
            <div class="my-launches-empty">
                <p>No tokens launched yet.</p>
                <button class="btn btn-primary btn-sm" onclick="showLaunchModal()" style="margin-top:12px;">Launch Your First Token</button>
            </div>
        `;return}t.innerHTML=`
        <div class="my-launches-grid">
            ${Nt.map(n=>{var r;return`
                <div class="token-card ${bg===n.mint?"selected":""}" onclick="selectToken('${n.mint}')">
                    <div class="token-card-header">
                        <div class="token-card-img">
                            ${n.image?`<img src="${tr(n.image)}" alt="${tr(n.symbol)}">`:((r=n.symbol)==null?void 0:r.slice(0,2))||"??"}
                        </div>
                        <div>
                            <div class="token-card-name">${tr(n.name)}</div>
                            <div class="token-card-symbol">$${tr(n.symbol)}</div>
                        </div>
                    </div>
                    <div class="token-card-stats">
                        <div class="token-card-stat">
                            <span class="token-card-stat-label">MCap</span>
                            <span class="token-card-stat-value">${ct(n.mcap)}</span>
                        </div>
                        <div class="token-card-stat">
                            <span class="token-card-stat-label">Volume</span>
                            <span class="token-card-stat-value">${ct(n.volume)}</span>
                        </div>
                        <div class="token-card-stat">
                            <span class="token-card-stat-label">Holders</span>
                            <span class="token-card-stat-value">${n.holders||0}</span>
                        </div>
                        <div class="token-card-stat">
                            <span class="token-card-stat-label">Launched</span>
                            <span class="token-card-stat-value">${n.time||"Recently"}</span>
                        </div>
                    </div>
                    <div class="token-card-mint">${n.mint.slice(0,8)}...${n.mint.slice(-6)}</div>
                </div>
            `}).join("")}
        </div>
    `}export{A as B,sn as H,Qp as a,Be as b,$r as c,sh as d,wt as e,we as f,wi as g,Pr as i,Or as l,J as s};

import{fz as st,d5 as ct,d7 as dt,d6 as lt,dA as ut,eZ as pt,d9 as v,fA as mt,dX as ft,d4 as p,e_ as gt,fB as Q,fC as Z,fD as ht,fb as yt,f3 as wt,ds as tt,ew as bt,fE as kt,e$ as At,f6 as xt,f8 as St,fF as Ot}from"./index-Csq7o-74.js";import{t as vt}from"./useGetSolPrice-Cfm8o9C5-6pzqwhq4.js";import{ErrorScreenView as It}from"./ErrorScreen-Yi-Rhs0v-w6YXr7mY.js";import{F as $t}from"./CheckCircleIcon-CXwZ3ThF.js";import{n as jt}from"./Button-BCV6mjvS-C5r36cJa.js";import{l as Ct}from"./Layouts-Bmf8DxNP-2l3WeQBW.js";import{y as Tt,s as _t}from"./ModalHeader-BTru6YQw-Bu34QJWb.js";import{r as Et}from"./ScreenHeader-Biz1wq02-BNBlQUwr.js";import{e as Lt,o as B,r as D,i as R}from"./Value-B4M62ove-BGzUYsv-.js";import{f as G,k as Ft}from"./WalletLink-Cj92ni3W-C4XJI6pF.js";import{e as Pt}from"./StackedContainer-BrIQsdas-B9-oOBM4.js";import{r as Bt,Y as Dt}from"./TransactionErrorView-RLIeHdul-C69iJGUu.js";import{t as X}from"./transaction-CnfuREWo-nROljJQP.js";import{C as Rt,e as Mt,n as Ut,a as M,o as Jt,d as Nt,r as qt,t as zt}from"./getFormattedUsdFromLamports-B6EqSEho-C-HCdwKa.js";import{i as C}from"./formatters-BL7YfjZQ.js";import"./reservoir-kvLjIrEo-BnTmDW0E.js";import"./ScreenLayout-CNho46nP-BkLQB8bM.js";import"./Screen-_0H_rCdH-DJPJq8sC.js";import"./index-CJMgUOnw-CivuPpGJ.js";import"./createLucideIcon-ws5bktce.js";import"./lock-RYtg5SKj.js";import"./LoadingSkeleton-CHdaq3pb-CgwNX7qp.js";import"./ethers-Bl5aM5Gz-B0DnAPLn.js";import"./ErrorMessage-Cx8GKGhL-CwtVwQW7.js";import"./LabelXs-BOisBtqT-Bw5ea5mi.js";import"./Subtitle-DkvfP2Ev-CeVp4YkR.js";import"./Title-D0pfZff--BQnyGtiM.js";import"./Address-BUmpXgsy-Bl3noeFO.js";import"./check-CB620uuh.js";import"./copy-CZ8NKfTb.js";import"./WalletInfoCard-COAfUoX0-BGyoHyFG.js";import"./shared-CtYf3O54-Bc-WWCie.js";import"./Checkbox-NmGCZeKL-Cge2YhEX.js";import"./ErrorBanner-BdiArMwu-CB7glRpW.js";import"./ExclamationCircleIcon-8e7RBcyJ.js";import"./WarningBanner-BDp-QC9i-ZWBTQr-Y.js";import"./ExclamationTriangleIcon-Ctb6we1h.js";import"./ChevronDownIcon-DPCfXAdP.js";var Vt=32300001,Wt=3230004;function et(t){return Array.isArray(t)?"%5B"+t.map(et).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function Ht([t,n]){return`${t}=${et(n)}`}function Xt(t){const n=Object.entries(t).map(Ht).join("&");return btoa(n)}function Yt(t,n={}){{let e=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(n).length&&(e+=` '${Xt(n)}'`),`${e}\``}}var nt=class extends Error{cause=this.cause;context;constructor(...[t,n]){let e,a;n&&Object.entries(Object.getOwnPropertyDescriptors(n)).forEach(([o,u])=>{o==="cause"?a={cause:u.value}:(e===void 0&&(e={__code:t}),Object.defineProperty(e,o,u))});const r=Yt(t,e);super(r,a),this.context=Object.freeze(e===void 0?{__code:t}:e),this.name="SolanaError"}};function Kt(t){return!("exists"in t)||"exists"in t&&t.exists}function Gt(t){const n=t.filter(e=>Kt(e)&&e.data instanceof Uint8Array);if(n.length>0){const e=n.map(a=>a.address);throw new nt(Wt,{addresses:e})}}function Qt(t,n){if(!n)return Object.freeze({address:t,exists:!1});const e=st().encode(n.data[0]);return Object.freeze({...at(n),address:t,data:e,exists:!0})}function Zt(t,n){if(!n)return Object.freeze({address:t,exists:!1});const e=n.data.parsed.info;return Object.freeze({...at(n),address:t,data:e,exists:!0})}function at(t){return Object.freeze({executable:t.executable,lamports:t.lamports,programAddress:t.owner,space:t.space})}async function te(t,n,e={}){const{abortSignal:a,...r}=e;return(await t.getMultipleAccounts(n,{...r,encoding:"jsonParsed"}).send({abortSignal:a})).value.map((u,c)=>u&&typeof u=="object"&&"parsed"in u.data?Zt(n[c],u):Qt(n[c],u))}function ee(t){const n=t.filter(e=>!e.exists);if(n.length>0){const e=n.map(a=>a.address);throw new nt(Vt,{addresses:e})}}async function ne(t,n,e){if(t.length===0)return{};const a=await te(n,t,e);return Gt(a),ee(a),a.reduce((r,o)=>({...r,[o.address]:o.data.addresses}),{})}const ae=tt.span.withConfig({displayName:"CircleBackground",componentId:"sc-c9f33cd-0"})(["&&{width:82px;height:82px;border-width:4px;border-style:solid;border-color:",";background-color:",";border-radius:50%;display:inline-block;box-sizing:border-box;}"],(t=>t.color??"var(--privy-color-accent)"),(t=>t.color??"var(--privy-color-accent)")),re=({instruction:t,fees:n,transactionInfo:e,solPrice:a,chain:r})=>p.jsxs(Lt,{children:[e?.action&&p.jsxs(B,{children:[p.jsx(D,{children:"Action"}),p.jsx(R,{children:e.action})]}),t?.total!=null&&p.jsxs(B,{children:[p.jsx(D,{children:"Total"}),p.jsx(R,{children:t.total})]}),!t?.total&&t?.amount!=null&&p.jsxs(B,{children:[p.jsx(D,{children:"Total"}),p.jsx(R,{children:p.jsx(G,{quantities:[t.amount,n],tokenPrice:a})})]}),p.jsxs(B,{children:[p.jsx(D,{children:"Fees"}),p.jsx(R,{children:p.jsx(G,{quantities:[n],tokenPrice:a})})]}),t?.to&&p.jsxs(B,{children:[p.jsx(D,{children:"To"}),p.jsx(R,{children:p.jsx(Ft,{walletAddress:t.to,chainId:r,chainType:"solana"})})]})]}),ie=({fees:t,onClose:n,receiptHeader:e,receiptDescription:a,transactionInfo:r,solPrice:o,signOnly:u,instruction:c,chain:m})=>p.jsxs(p.Fragment,{children:[p.jsx(Tt,{onClose:n}),p.jsx(Pt,{style:{marginBottom:"16px"},children:p.jsxs("div",{children:[p.jsx(ae,{color:"var(--privy-color-success-light)"}),p.jsx($t,{height:38,width:38,strokeWidth:2,stroke:"var(--privy-color-success)"})]})}),p.jsx(Et,{title:e??`Transaction ${u?"signed":"complete"}!`,description:a??"You're all set."}),p.jsx(re,{solPrice:o,instruction:c,fees:t,transactionInfo:r,chain:m}),p.jsx(bt,{}),p.jsx(oe,{loading:!1,onClick:n,children:"Close"}),p.jsx(Ct,{}),p.jsx(_t,{})]});let oe=tt(jt).withConfig({displayName:"SubmitButton",componentId:"sc-3cb7ee42-0"})(["&&{margin-top:24px;}transition:color 350ms ease,background-color 350ms ease;"]);async function F(t,n){try{return await t}catch{return n}}function se(t){switch(t){case"solana:mainnet":return"mainnet-beta";case"solana:devnet":return"devnet";case"solana:testnet":return"testnet"}}async function I({privyClient:t,chain:n,mint:e}){let a=zt[n];if(!a[e]){let r=await t.getSplTokenMetadata({mintAddress:e,cluster:se(n)});r&&(a[e]={address:e,symbol:r.symbol,decimals:r.decimals})}return a[e]}async function ce({tx:t,solanaClient:n,privyClient:e,checkFunds:a}){let r=Q().decode(Z(t)),o=r.staticAccounts[0]??"",u=await yt({solanaClient:n,tx:t}),c=a?await F(wt({solanaClient:n,tx:t})):void 0,m=c?.hasFunds??!0,x={},f=[],b=await(async function({solanaClient:k,message:i}){if(!("addressTableLookups"in i)||!i.addressTableLookups)return[...i.staticAccounts];let d=i.addressTableLookups.map((g=>g.lookupTableAddress)),$=await ne(d,k.rpc),E=d.map(((g,A)=>[...i.addressTableLookups[A]?.writableIndexes.map((T=>{let j=$[g]?.[T];if(j)return{key:j,isWritable:!0,altIdx:A}}))??[],...i.addressTableLookups[A]?.readonlyIndexes.map((T=>{let j=$[g]?.[T];if(j)return{key:j,isWritable:!1,altIdx:A}}))??[]])).flat().filter((g=>!!g)).sort(((g,A)=>g.isWritable!==A.isWritable?g.isWritable?-1:1:g.altIdx-A.altIdx)).map((({key:g})=>g));return[...i.staticAccounts,...E]})({solanaClient:n,message:r});for(let k of r.instructions){let i=r.staticAccounts[k.programAddressIndex]||"";if(i!==Mt&&i!==Ut)if(i!==M){if(i===Jt){let d=await F((function($,E,g){let[A,T,j,_]=$.accountIndices?.map((U=>E[U]))??[];return{type:"ata-creation",program:g,payer:A,ata:T,owner:j,mint:_}})(k,b,i));if(!d){f.push({type:"unknown",program:i,discriminator:k.data?.[0]});continue}if(f.push(d),d.ata&&d.owner&&d.mint){x[d.ata]={owner:d.owner,mint:d.mint};continue}}if(Nt.includes(i)){let d=await F(ue(k,b,n,e,i));if(!d){f.push({type:"unknown",program:i,discriminator:k.data?.[0]});continue}f.push(d)}else if(qt.includes(i)){let d=await F(pe(k,b,n,e,i));if(!d){f.push({type:"unknown",program:i,discriminator:k.data?.[0]});continue}f.push(d)}else f.push({type:"unknown",program:i,discriminator:k.data?.[0]})}else{let d=await F(le(k,b));if(!d){f.push({type:"unknown",program:i,discriminator:k.data?.[0]});continue}f.push(d)}else{let d=await F(de(k,b,n,e,x,i));if(!d){f.push({type:"unknown",program:i,discriminator:k.data?.[0]});continue}f.push(d),d.type==="spl-transfer"&&(d.fromAta&&d.fromAccount&&d.token.address&&(x[d.fromAta]??={owner:d.fromAccount,mint:d.token.address}),d.toAta&&d.toAccount&&d.token.address&&(x[d.toAta]??={owner:d.toAccount,mint:d.token.address}))}}return{spender:o,fee:u,instructions:f,hasFunds:!!m}}function S(t,n=0){try{return(function(a,r=0){let o=0n;for(let u=0;u<8;u++)o|=BigInt(a[r+u])<<BigInt(8*u);return o})(t,n)}catch{}try{return t.readBigInt64LE(n)}catch{}let e=kt(t);try{return((a,r=0)=>{let o=a[r],u=a[r+7];if(!o||!u)throw Error(`Buffer offset out of range: first: ${o}, last: ${u}.`);return(BigInt(a[r+4]+256*a[r+5]+65536*a[r+6]+(u<<24))<<32n)+BigInt(o+256*a[++r]+65536*a[++r]+16777216*a[++r])})(e)}catch{}try{return e.subarray(n).readBigInt64LE()}catch{}try{return e.readBigInt64LE(n)}catch{}return 0n}async function de(t,n,e,a,r,o){let u=t.data?.[0],c=t.accountIndices?.map((m=>n[m]))??[];if(u===1){let[m,x,f]=c;return{type:"spl-init-account",program:o,account:m,mint:x,owner:f}}if(u===3){let m,x,[f,b,k]=c,i="",d=b?r[b]:void 0;if(d)m=d.owner,i=d.mint;else if(b){let g=await e.rpc.getAccountInfo(b,{commitment:"confirmed",encoding:"jsonParsed"}).send(),A=g.value?.data;m=A?.parsed?.info?.owner,i=A?.parsed?.info?.mint??"",x=A?.parsed?.info?.tokenAmount?.decimals}!i&&f&&(i=(await e.rpc.getAccountInfo(f,{commitment:"confirmed",encoding:"jsonParsed"}).send()).value?.data?.parsed?.info?.mint??"");let $=await I({privyClient:a,chain:e.chain,mint:i}),E=$?.symbol??"";return x??=$?.decimals??9,{type:"spl-transfer",program:o,fromAta:f,fromAccount:k,toAta:b,toAccount:m,value:S(t.data,1),token:{symbol:E,decimals:x,address:i}}}if(u===9){let[m,x,f]=c;return{type:"spl-close-account",program:o,source:m,destination:x,owner:f}}if(u===17)return{type:"spl-sync-native",program:o};throw Error(`Token program instruction type ${u} not supported`)}async function le(t,n){let e=t.data?.[0],a=t.accountIndices?.map((r=>n[r]))??[];if(e===0){let[,r]=a;return{type:"create-account",program:M,account:r?.toString(),value:S(t.data,4),withSeed:!1}}if(e===2){let[r,o]=a;return{type:"sol-transfer",program:M,fromAccount:r,toAccount:o,token:{symbol:"SOL",decimals:9},value:S(t.data,4),withSeed:!1}}if(e===3){let[,r]=a;return{type:"create-account",program:M,account:r,withSeed:!0,value:S(t.data.slice(t.data.length-32-8-8))}}if(e===11){let[r,o]=a;return{type:"sol-transfer",program:M,fromAccount:r,toAccount:o,value:S(t.data,4),token:{symbol:"SOL",decimals:9},withSeed:!0}}throw Error(`System program instruction type ${e} not supported`)}async function ue(t,n,e,a,r){let o=t.accountIndices?.map((c=>n[c]))??[],u=t.data?.[0];if(u===143){let c=o[10],m=o[11];return{type:"raydium-swap-base-input",program:r,mintIn:c,mintOut:m,tokenIn:c?await I({privyClient:a,chain:e.chain,mint:c}):void 0,tokenOut:m?await I({privyClient:a,chain:e.chain,mint:m}):void 0,amountIn:S(t.data,8),minimumAmountOut:S(t.data,16)}}if(u===55){let c=o[10],m=o[11];return{type:"raydium-swap-base-output",program:r,mintIn:c,mintOut:m,tokenIn:c?await I({privyClient:a,chain:e.chain,mint:c}):void 0,tokenOut:m?await I({privyClient:a,chain:e.chain,mint:m}):void 0,maxAmountIn:S(t.data,8),amountOut:S(t.data,16)}}throw Error(`Raydium swap program instruction type ${u} not supported`)}async function pe(t,n,e,a,r){let o=t.data?.[0],u=t.accountIndices?.map((c=>n[c]))??[];if([208,51,239,151,123,43,237,92].includes(o)){let c=u[5],m=u[6];return{type:"jupiter-swap-exact-out-route",program:r,mintIn:c,mintOut:m,tokenIn:c?await I({privyClient:a,chain:e.chain,mint:c}):void 0,tokenOut:m?await I({privyClient:a,chain:e.chain,mint:m}):void 0,outAmount:S(t.data,t.data.length-1-2-8-8),quotedInAmount:S(t.data,t.data.length-1-2-8)}}if([176,209,105,168,154,125,69,62].includes(o)){let c=u[7],m=u[8];return{type:"jupiter-swap-exact-out-route",program:r,mintIn:c,mintOut:m,tokenIn:c?await I({privyClient:a,chain:e.chain,mint:c}):void 0,tokenOut:m?await I({privyClient:a,chain:e.chain,mint:m}):void 0,outAmount:S(t.data,t.data.length-1-2-8-8),quotedInAmount:S(t.data,t.data.length-1-2-8)}}if([193,32,155,51,65,214,156,129].includes(o)){let c=u[7],m=u[8];return{type:"jupiter-swap-shared-accounts-route",program:r,mintIn:c,mintOut:m,tokenIn:c?await I({privyClient:a,chain:e.chain,mint:c}):void 0,tokenOut:m?await I({privyClient:a,chain:e.chain,mint:m}):void 0,inAmount:S(t.data,t.data.length-1-2-8-8),quotedOutAmount:S(t.data,t.data.length-1-2-8)}}throw[62,198,214,193,213,159,108,210].includes(o)&&console.warn("Jupiter swap program instruction 'claim' not implemented"),[116,206,27,191,166,19,0,73].includes(o)&&console.warn("Jupiter swap program instruction 'claim_token' not implemented"),[26,74,236,151,104,64,183,249].includes(o)&&console.warn("Jupiter swap program instruction 'close_token' not implemented"),[229,194,212,172,8,10,134,147].includes(o)&&console.warn("Jupiter swap program instruction 'create_open_orders' not implemented"),[28,226,32,148,188,136,113,171].includes(o)&&console.warn("Jupiter swap program instruction 'create_program_open_orders' not implemented"),[232,242,197,253,240,143,129,52].includes(o)&&console.warn("Jupiter swap program instruction 'create_token_ledger' not implemented"),[147,241,123,100,244,132,174,118].includes(o)&&console.warn("Jupiter swap program instruction 'create_token_account' not implemented"),[229,23,203,151,122,227,173,42].includes(o)&&console.warn("Jupiter swap program instruction 'route' not implemented"),[150,86,71,116,167,93,14,104].includes(o)&&console.warn("Jupiter swap program instruction 'route_with_token_ledger' not implemented"),[228,85,185,112,78,79,77,2].includes(o)&&console.warn("Jupiter swap program instruction 'set_token_ledger' not implemented"),[230,121,143,80,119,159,106,170].includes(o)&&console.warn("Jupiter swap program instruction 'shared_accounts_route_with_token_ledger' not implemented"),Error(`Jupiter swap program instruction type ${o} not supported`)}const Ge={component:()=>{let{data:t,onUserCloseViaDialogOrKeybindRef:n,setModalData:e,navigate:a}=ct(),{client:r,closePrivyModal:o,walletProxy:u,showFiatPrices:c}=dt(),m=lt(),{user:x}=ut(),f=pt()(t?.standardSignAndSendTransaction?.chain??"solana:mainnet"),[b,k]=v.useState(t?.standardSignAndSendTransaction?.transaction),[i,d]=v.useState(),[$,E]=v.useState(),[g,A]=v.useState({value:0n,isLoading:!1}),[T,j]=v.useState(!1),[_,U]=v.useState({}),[J,Y]=v.useState(),O=t?.standardSignAndSendTransaction?.account,z=!!t?.standardSignAndSendTransaction?.signOnly,rt=O?.imported?mt(x).find((l=>l.address===O.address)):ft(x),{solPrice:N,isSolPriceLoading:V}=vt({enabled:c}),P=v.useMemo((()=>{if(!i)return;let l=i.spender,h=X(i.fee),y=X(g.value,3,!0),w=i.instructions.filter((L=>["sol-transfer","spl-transfer","raydium-swap-base-input","raydium-swap-base-output","jupiter-swap-shared-accounts-route","jupiter-swap-exact-out-route"].includes(L.type))),s=w.at(0);return!s||w.length>1?{fee:h,spender:l,balance:y}:s.type==="sol-transfer"?{fee:h,spender:l,balance:y,total:X(s.value)}:s.type==="spl-transfer"?{fee:h,spender:l,balance:y,total:`${C({amount:s.value,decimals:s.token.decimals})} ${s.token.symbol}`}:s.type==="raydium-swap-base-input"&&s.tokenIn&&s.tokenOut?{fee:h,spender:l,balance:y,swap:`${`${C({amount:s.amountIn,decimals:s.tokenIn.decimals})} ${s.tokenIn.symbol}`} → ${`${C({amount:s.minimumAmountOut,decimals:s.tokenOut.decimals})} ${s.tokenOut.symbol}`}`}:s.type==="raydium-swap-base-output"&&s.tokenIn&&s.tokenOut?{fee:h,spender:l,balance:y,swap:`${`${C({amount:s.maxAmountIn,decimals:s.tokenIn.decimals})} ${s.tokenIn.symbol}`} → ${`${C({amount:s.amountOut,decimals:s.tokenOut.decimals})} ${s.tokenOut.symbol}`}`}:s.type==="jupiter-swap-shared-accounts-route"&&s.tokenIn&&s.tokenOut?{fee:h,spender:l,balance:y,swap:`${`${C({amount:s.inAmount,decimals:s.tokenIn.decimals})} ${s.tokenIn.symbol}`} → ${`${C({amount:s.quotedOutAmount,decimals:s.tokenOut.decimals})} ${s.tokenOut.symbol}`}`}:s.type==="jupiter-swap-exact-out-route"&&s.tokenIn&&s.tokenOut?{fee:h,spender:l,balance:y,swap:`${`${C({amount:s.quotedInAmount,decimals:s.tokenIn.decimals})} ${s.tokenIn.symbol}`} → ${`${C({amount:s.outAmount,decimals:s.tokenOut.decimals})} ${s.tokenOut.symbol}`}`}:{fee:h,spender:l,balance:y}}),[i,O?.address,g]),W=v.useMemo((()=>{let l;if(!i||!c||!N||V)return;function h(...s){return Rt(s.reduce(((L,ot)=>L+ot),0n),N??0)}O?.address===i.spender&&(l=h(i.fee));let y=h(g.value),w=i.instructions.filter((s=>s.type==="sol-transfer"||s.type==="spl-transfer")).at(0);return!w||i.instructions.length>1?{fee:l,balance:y}:w.type==="sol-transfer"?{fee:l,balance:y,total:h(w.value,O?.address===i.spender?i.fee:0n)}:w.type==="spl-transfer"?{fee:l,balance:y,total:`${C({amount:w.value,decimals:w.token.decimals})} ${w.token.symbol}`}:{fee:l,balance:y}}),[i,c,N,V,O?.address,g]);if(v.useEffect((()=>{(async function(){if(b&&r)try{E(void 0);let l=await ce({tx:b,solanaClient:f,privyClient:r,checkFunds:!z});d(l)}catch(l){console.error("Failed to prepare transaction",l),E(l)}})()}),[b,f,r,z]),v.useEffect((()=>{(async function(){if(!O)return;A({value:g.value,isLoading:!0});let{value:l}=await f.rpc.getBalance(O.address,{commitment:"confirmed"}).send();A({value:l??0n,isLoading:!1})})().catch(console.error)}),[i]),!b||!t?.standardSignAndSendTransaction||!O){let l=Error("Invalid transaction request");return p.jsx(It,{error:l,allowlistConfig:m.allowlistConfig,onRetry:()=>{t?.standardSignAndSendTransaction?.onFailure(l),o({shouldCallAuthOnSuccess:!1})}})}let q=()=>{if(!T)return _.signature||_.signedTransaction?t?.standardSignAndSendTransaction?.onSuccess({signature:_.signature,signedTransaction:_.signedTransaction}):t?.standardSignAndSendTransaction?.onFailure(J??$??Error("User exited the modal before submitting the transaction")),o({shouldCallAuthOnSuccess:!1})};n.current=q;let it=t.standardSignAndSendTransaction?.uiOptions?.transactionInfo?.contractInfo?.imgUrl?p.jsx("img",{src:t.standardSignAndSendTransaction.uiOptions.transactionInfo.contractInfo.imgUrl,alt:t.standardSignAndSendTransaction.uiOptions.transactionInfo.contractInfo.imgAltText}):null,H=!!(t.funding&&t.funding.supportedOptions.length>0),K=!i?.hasFunds&&H;if(_.signature||_.signedTransaction){let l=i?.instructions.filter((y=>y.type==="sol-transfer"||y.type==="spl-transfer")),h=l?.length===1?l?.at(0):void 0;return p.jsx(ie,{fees:_.fees??0n,onClose:q,transactionInfo:t.standardSignAndSendTransaction?.uiOptions.transactionInfo,solPrice:N,receiptHeader:t.standardSignAndSendTransaction?.uiOptions.successHeader,receiptDescription:t.standardSignAndSendTransaction?.uiOptions.successDescription,chain:f.chain,signOnly:z,instruction:h?.type==="sol-transfer"?{to:h.toAccount,amount:h.value}:{to:h?.toAccount||h?.toAta,total:P?.total}})}return J?p.jsx(Bt,{transactionError:J,chainId:f.chain,onClose:q,chainType:"solana",onRetry:async()=>{Y(void 0);let{value:l}=await f.rpc.getLatestBlockhash().send();var h,y;k((h=b,y=l,gt(Q().decode(Z(h)),(w=>Ot(w)),(w=>St(y,w)),(w=>xt(w)),(w=>new Uint8Array(At().encode(w))))))}}):p.jsx(Dt,{img:it,title:t.standardSignAndSendTransaction?.uiOptions?.transactionInfo?.title||"Confirm transaction",subtitle:t.standardSignAndSendTransaction?.uiOptions?.description||`${m.name} wants your permission to approve the following transaction.`,cta:K?"Add funds":t.standardSignAndSendTransaction?.uiOptions?.buttonText||"Approve",instructions:i?.instructions??[],network:f.chain=="solana:mainnet"?"Solana":f.chain.replace("solana:",""),blockExplorerUrl:f.blockExplorerUrl,total:c?W?.total:P?.total,fee:c?W?.fee:P?.fee,balance:c?W?.balance:P?.balance,swap:P?.swap,transactingWalletAddress:O.address,disabled:!i?.hasFunds&&!H,isSubmitting:T,isPreparing:!i||g.isLoading,isTokenPriceLoading:c&&V,isMissingFunds:!i?.hasFunds,submitError:J??void 0,isSponsored:!!t.standardSignAndSendTransaction?.isSponsored,parseError:$,onClick:K?async()=>{if(!O)return;if(!H)throw Error("Funding wallet is not enabled");let l="FundingMethodSelectionScreen";e({...t,funding:{...t.funding,methodScreen:l},solanaFundingData:t?.solanaFundingData}),a(l)}:async()=>{try{if(j(!0),T||!O||!u||!x||!rt)return;let l=await t.standardSignAndSendTransaction.onConfirm(b);if("signature"in l){let h=await(async function({solanaClient:y,signature:w}){let s=ht().decode(w),L=await y.rpc.getTransaction(s,{maxSupportedTransactionVersion:0,commitment:"confirmed",encoding:"base64"}).send().catch((()=>null));return L?{fee:L.meta?.fee??0n}:null})({solanaClient:f,signature:l.signature});return void U({...l,fees:h?.fee})}U(l)}catch(l){console.warn({transaction:b,error:l}),Y(l)}finally{j(!1)}},onClose:q})}};export{Ge as StandardSignAndSendTransactionScreen,Ge as default};

import{d9 as i,dA as M,d7 as P,d5 as L,dq as T,e4 as A,d6 as I,da as $,db as D,e5 as U,d4 as e,ds as N,e6 as R}from"./index-CFG-wFBU.js";import{g as F,n as W}from"./Button-BCV6mjvS-Diy1onH6.js";import{l as q}from"./Chip-Bsgj4Yc--BnKnlMn6.js";import{t as _,e as V}from"./EmailInputForm-B4hjCxRU-ENk5Mswa.js";import{e as z}from"./ErrorMessage-Cx8GKGhL-CTqv9rbm.js";import{M as B}from"./mail-CC0aCGON.js";const ee=i.forwardRef(((n,S)=>{let[a,x]=i.useState(n.defaultValue||""),[t,m]=i.useState(""),[l,p]=i.useState(!1),{authenticated:y}=M(),{initLoginWithEmail:g}=P(),{navigate:o,setModalData:d,currentScreen:b,data:s}=L(),{enabled:E,token:h}=T(),[j,v]=i.useState(!1),{accountType:k}=A(),w=I();i.useEffect((()=>{!a&&w.disablePlusEmails&&s?.inlineError?.error instanceof $&&s?.inlineError?.error.privyErrorCode===D.DISALLOWED_PLUS_EMAIL&&!t&&m("Please enter a valid email address without a '+'."),t&&m("")}),[a]);let C=U(a),f=l||!C,c=()=>{var r;d({login:s?.login,inlineError:void 0}),!E||h||y?(r=h,p(!0),g({email:a,captchaToken:r,disableSignup:s?.login?.disableSignup,withPrivyUi:!0}).then((()=>{o("AwaitingPasswordlessCodeScreen")})).catch((u=>{d({errorModalData:{error:u,previousScreen:b||"LandingScreen"}}),o("ErrorScreen")})).finally((()=>{p(!1)}))):(d({captchaModalData:{callback:u=>g({email:a,captchaToken:u,withPrivyUi:!0}),userIntentRequired:!1,onSuccessNavigateTo:"AwaitingPasswordlessCodeScreen",onErrorNavigateTo:"ErrorScreen"}}),o("CaptchaScreen"))};return e.jsxs(e.Fragment,{children:[e.jsxs(K,{children:[t&&e.jsx(z,{style:{display:"block",marginTop:"0.25rem",textAlign:"left"},children:t}),e.jsxs(O,{stacked:n.stacked,$error:!!t,children:[e.jsx(G,{children:e.jsx(B,{})}),e.jsx("input",{ref:S,id:"email-input",className:"login-method-button",type:"email",placeholder:"your@email.com",onFocus:()=>v(!0),onChange:r=>x(r.target.value),onKeyUp:r=>{r.key==="Enter"&&c()},value:a,autoComplete:"email"}),k!=="email"||j?n.stacked?e.jsx("span",{}):e.jsx(F,{isSubmitting:l,onClick:c,disabled:f,children:"Submit"}):e.jsx(q,{color:"gray",children:"Recent"})]})]}),n.stacked?e.jsx(W,{loadingText:null,loading:l,disabled:f,onClick:c,style:{width:"100%"},children:"Submit"}):null]})}));let K=_,O=V,G=N(R).withConfig({displayName:"StyledLoginMethodIconWrapper",componentId:"sc-30d3bab7-0"})(["display:inline-flex;"]);export{ee as j};

import{d4 as y,d5 as B,d7 as W,d9 as m,dd as j,dw as E,dx as U,dy as D,dz as L}from"./index-Cax8jish.js";import{n as $}from"./ScreenLayout-CNho46nP-B4LKwwT1.js";import{getErrorDetails as N}from"./ConnectionStatusScreen-CZNBQeOQ-_QGX4ht4.js";import"./Button-BCV6mjvS-Ds3dQ567.js";import"./Screen-_0H_rCdH-BcqDJQ68.js";import"./ModalHeader-BTru6YQw-VHe3yaAt.js";import"./index-CJMgUOnw-Caq7k6r0.js";import"./Link-DwjLfHwW-Bj-OPv03.js";import"./useI18n-99pFPsz3-DAqSuZM0.js";import"./shouldProceedtoEmbeddedWalletCreationFlow-BI33jNSF-CfYwSlzi.js";const O=({walletLogo:c,success:r,errorMessage:a,title:w,subtitle:p,onRetry:l,onUseDifferentWallet:d,onBack:e,numRetries:i,maxRetries:t})=>y.jsx($,{title:w,subtitle:p,icon:c,iconVariant:"loading",iconLoadingStatus:{success:r,fail:!!a},primaryCta:a===L.ERROR_USER_EXISTS?{label:"Use a different wallet",onClick:d}:!r&&a?.retryable&&i<t?{label:"Retry",onClick:l,disabled:!a?.retryable||i>=t}:!r&&a&&i>=t?{label:"Use a different wallet",onClick:d}:void 0,onBack:e,watermark:!0}),H={component:()=>{let c,{navigateBack:r,navigate:a,lastScreen:w,currentScreen:p,data:l,setModalData:d}=B(),{walletConnectionStatus:e,closePrivyModal:i}=W(),[t,C]=m.useState(void 0),[f,R]=m.useState(0),g=j(e?.connector?.walletClientType||"unknown"),s=e?.status==="connected",b=e?.status==="switching_to_supported_chain";m.useEffect((()=>{if(s){let o;if(l?.externalConnectWallet?.onCompleteNavigateTo){let v=l.externalConnectWallet.onCompleteNavigateTo,h=e.connectedWallet?.address;o=setTimeout((()=>{if(l.funding&&e.connector){let M=e.connector.wallets.find((_=>_.address===h));d({...l,funding:{...l.funding,connectedWallet:M}})}a(v({address:h,walletClientType:e.connector?.walletClientType,walletChainType:e.connector?.chainType}))}),E)}else o=setTimeout(i,E);return()=>clearTimeout(o)}}),[s]),m.useEffect((()=>{var o;e?.connectError&&(o=e?.connectError,C(N(o)))}),[e]);let k=e?.connector?.connectorType||"injected",x=e?.connector?.walletClientType||"unknown",u=g?.metadata?.shortName||g?.name||e?.connector?.walletBranding.name||"Browser Extension",T=g?.image_url?.md||e?.connector?.walletBranding.icon||(o=>y.jsx(U,{...o})),S=u==="Browser Extension"?u.toLowerCase():u;c=s?`Successfully connected with ${S}`:t?t.message:b?"Switching networks":`Waiting for ${S}`;let n="Don’t see your wallet? Check your other browser windows.";return s?n="You’re good to go!":f>=2&&t?n="Unable to connect wallet":t?n=t.detail:b?n="Switch your wallet to the requested network.":x==="metamask"&&D.isMobile?n="Click to continue to open and connect MetaMask.":x==="metamask"?n="For the best experience, connect only one wallet at a time.":k==="wallet_connect_v2"?n="Open your mobile wallet app to continue":k==="coinbase_wallet"&&(n="Confirm in the Coinbase app/popup to continue."),y.jsx(O,{walletName:u,walletLogo:T,success:s,errorMessage:t,title:c,subtitle:n,onRetry:()=>{R(f+1),C(void 0),e?.connectRetry()},onUseDifferentWallet:r,onBack:p===w?void 0:r,numRetries:f,maxRetries:2})}};export{H as ConnectOnlyStatusScreen,O as ConnectOnlyStatusScreenView,H as default};

import{d5 as p,dA as c,d7 as b,d9 as d,d4 as u}from"./index-C6aulGjq.js";import{F as h}from"./PhoneIcon-BE6iMhE1.js";import{w as S}from"./ConnectPhoneForm-OQSgPQxP-GZZab5m9.js";import{n as f}from"./ScreenLayout-CNho46nP-zIMefLr6.js";import"./Button-BCV6mjvS-QQOxW8LY.js";import"./Chip-Bsgj4Yc--BVjHiW3m.js";import"./LoadingSkeleton-CHdaq3pb-CPOXNrID.js";import"./Screen-_0H_rCdH-BPGpqP_O.js";import"./ModalHeader-BTru6YQw-DkYP7_q4.js";import"./index-CJMgUOnw-C7AHVm-K.js";const w=({title:o="Update your phone number",subtitle:a="Add the phone number you'd like to use going forward. We'll send you a confirmation code",onSubmit:t,isSubmitting:r=!1})=>{let[e,n]=d.useState(null);return u.jsx(f,{title:o,subtitle:a,icon:h,primaryCta:{label:r?"Submitting":"Update",onClick:async()=>{e?.qualifiedPhoneNumber&&await t(e)},disabled:!e?.isValid||r},watermark:!0,children:u.jsx(S,{onChange:i=>{n(i)},onSubmit:async()=>{},noIncludeSubmitButton:!0,hideRecent:!0})})},M={component:()=>{let{currentScreen:o,data:a,navigate:t,setModalData:r}=p(),{user:e}=c(),{initUpdatePhone:n}=b(),[i,s]=d.useState(!1);return u.jsx(w,{onSubmit:async m=>{s(!0);try{if(!e?.phone?.number)throw Error("User is required to have an phone number to update it.");await n(e?.phone?.number,m.qualifiedPhoneNumber),t("AwaitingPasswordlessCodeScreen")}catch(l){r({errorModalData:{error:l,previousScreen:a?.errorModalData?.previousScreen||o||"LinkPhoneScreen"}}),t("ErrorScreen")}finally{s(!1)}},isSubmitting:i})}};export{M as UpdatePhoneScreen,w as UpdatePhoneScreenView,M as default};

import{d5 as Xt,d7 as Y,dA as te,d6 as ee,d9 as a,d4 as s,dG as ht,m as ne,r as ae,er as se,es as ie,dg as re,d1 as oe,dw as le,et as gt,eu as It,ev as ue,ew as pe,ds as vt,bw as de,bt as ce,cl as me}from"./index-Cax8jish.js";import{d as yt}from"./Address-BUmpXgsy-C3dnFLAv.js";import{c as ye}from"./useGetTokenPrice-CDPxMEO--D9xt0_z6.js";import{s as fe}from"./useWalletBalance-CkNw6kj0-BMcMcrwl.js";import{n as be}from"./getErc20TokenInfo-BFoeg5F6-NUvF3a59.js";import{t as Te}from"./formatErc20TokenAmount-BuPk9xcy-CkAr4Oc0.js";import{c as ft,o as z,i as he}from"./ethers-Bl5aM5Gz-ChpXCOJr.js";import{ErrorScreenView as ge}from"./ErrorScreen-Yi-Rhs0v-1em1Pt3Z.js";import{y as kt,s as xt}from"./ModalHeader-BTru6YQw-VHe3yaAt.js";import{n as Ie}from"./JsonTree-Bvd2C29R-50jVNKIs.js";import{r as ve,Q as ke}from"./TransactionErrorView-RLIeHdul-3_--FYTs.js";import{n as xe}from"./Button-BCV6mjvS-Ds3dQ567.js";import{l as Ee}from"./Layouts-Bmf8DxNP-u0w-Y0s6.js";import{o as Me}from"./ScreenHeader-Biz1wq02-C3WSGbab.js";import{V as Se}from"./TransactionDetails-BdW2lq_B-OBOHl6sU.js";import{t as Fe}from"./transfer-CMPmjPsM-Cjofo3yZ.js";import{i as _e}from"./formatters-B5zHO9Bo.js";import"./check-wa4k6I-2.js";import"./createLucideIcon-DHaPZvrP.js";import"./copy-B9b3vyLt.js";import"./useGetSolPrice-Cfm8o9C5-DDR-Hj0i.js";import"./reservoir-kvLjIrEo-B6ffr3ps.js";import"./ScreenLayout-CNho46nP-B4LKwwT1.js";import"./Screen-_0H_rCdH-BcqDJQ68.js";import"./index-CJMgUOnw-Caq7k6r0.js";import"./lock-D7dCaFSp.js";import"./Value-B4M62ove-BgzEA0H6.js";import"./LoadingSkeleton-CHdaq3pb-fa6j6V42.js";import"./ErrorMessage-Cx8GKGhL-B_a68wd5.js";import"./LabelXs-BOisBtqT-DLnPQAeV.js";import"./Subtitle-DkvfP2Ev-BiW9eJSH.js";import"./Title-D0pfZff--Cl_QhNjE.js";import"./WalletInfoCard-COAfUoX0-Cz_56LNA.js";import"./shared-CtYf3O54-DNlg-LYi.js";import"./Checkbox-NmGCZeKL-s2WjpOuR.js";import"./ErrorBanner-BdiArMwu-DG-tlCCG.js";import"./ExclamationCircleIcon-CGOaeacX.js";import"./WarningBanner-BDp-QC9i-BkTN-aS9.js";import"./ExclamationTriangleIcon-D57cRKwY.js";import"./ChevronDownIcon-CHUfi2NN.js";import"./WalletLink-Cj92ni3W-Ey4XKi8F.js";import"./getFormattedUsdFromLamports-B6EqSEho-C-HCdwKa.js";import"./transaction-CnfuREWo-nROljJQP.js";let Ce=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],we=vt.div.withConfig({displayName:"Container",componentId:"sc-31acb2bc-0"})(["display:flex;flex-direction:column;min-height:72px;"]);var Ne=({onBack:t,details:r})=>s.jsxs(we,{children:[s.jsx(kt,{backFn:t}),s.jsx(Ie,{data:r}),s.jsx(xt,{})]});let $e=({gasUsed:t,effectiveGasPrice:r})=>{if(t&&r)try{return me(t*r)}catch{return}};const Ae=({txn:t,receipt:r,transactionInfo:p,onClose:d,tokenPrice:e,tokenSymbol:i,receiptHeader:c,receiptDescription:T})=>s.jsxs(s.Fragment,{children:[s.jsx(kt,{onClose:d}),s.jsx(Me,{title:c??"Transaction complete!",description:T??"You're all set."}),s.jsx(Se,{tokenPrice:e,from:r.from,to:r.to,gas:$e(r),txn:t,transactionInfo:p,tokenSymbol:i}),s.jsx(pe,{}),s.jsx(Oe,{loading:!1,onClick:d,children:"All Done"}),s.jsx(Ee,{}),s.jsx(xt,{})]});let Oe=vt(xe).withConfig({displayName:"SubmitButton",componentId:"sc-f70d0f7a-0"})(["&&{margin-top:24px;}transition:color 350ms ease,background-color 350ms ease;"]);const je=[{constant:!1,inputs:[{name:"_salt",type:"bytes32"},{name:"_initializer",type:"bytes"}],name:"deployAccount",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Re=[{name:"from",type:"address"},{name:"param2",type:"address"},{name:"param3",type:"bytes"},{name:"param4",type:"tuple",components:[]},{type:"tuple",components:[{name:"param5",type:"address"},{name:"param6",type:"uint256"},{name:"param7",type:"uint256"},{name:"encodedInitData",type:"bytes"}]}],De=[{constant:!1,inputs:[{name:"spender",type:"address"},{name:"value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Be=[{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"},{internalType:"uint256[]",name:"quantities",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mintBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"},{internalType:"uint256[]",name:"quantities",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mintBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"quantity",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"quantity",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"safeMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"safeMint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeMint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"batchMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"batchMint",outputs:[],stateMutability:"payable",type:"function"}],Pe=[{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],qe=[{constant:!1,inputs:[{name:"_operator",type:"address"},{name:"_approved",type:"bool"}],name:"setApprovalForAll",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Ue=[{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Ve=[{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenIds",type:"uint256[]"},{name:"_amounts",type:"uint256[]"},{name:"_data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Le=[{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"},{name:"_amount",type:"uint256"},{name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Et=(t,r)=>{let p=x(De,t);if(p)return{action:"approve",functionName:"approve",isErc20Ish:!0,isNFTIsh:!1,spender:p.args[0],amount:p.args[1]};let d=x(Fe,t);if(d)return{action:"transfer",functionName:"transfer",isErc20Ish:!0,isNFTIsh:!1,transferTo:d.args[0],amount:d.args[1]};if(!r)return{action:"transaction",functionName:"",isErc20Ish:!1,isNFTIsh:!1};let e=x(je,t);if(e&&typeof e.args[1]=="string"){let l=Ge(e.args[1]);if(l&&l[4].encodedInitData)return Et(l[4].encodedInitData,r)}let i=x(qe,t);if(i)return{action:"approve",functionName:"setApprovalForAll",isNFTIsh:!0,isErc20Ish:!1,operator:i.args[0],approved:i.args[1]};let c=x(Ue,t);if(c)return{action:"transfer",functionName:"transferFrom",isNFTIsh:!0,isErc20Ish:!1,transferFrom:c.args[0],transferTo:c.args[1],tokenId:c.args[2]};let T=x(Pe,t);if(T)return{action:"transfer",functionName:"safeTransferFrom",isNFTIsh:!0,isErc20Ish:!1,transferFrom:T.args[0],transferTo:T.args[1],tokenId:T.args[2]};let I=x(Le,t);if(I)return{action:"transfer",functionName:"safeTransferFrom",isNFTIsh:!0,isErc20Ish:!1,transferFrom:I.args[0],transferTo:I.args[1],tokenId:I.args[2],amount:I.args[3]};let h=x(Ve,t);if(h)return{action:"batch transfer",functionName:"safeBatchTransferFrom",isNFTIsh:!0,isErc20Ish:!1,transferFrom:h.args[0],transferTo:h.args[1],tokenIds:h.args[2],amounts:h.args[3]};let g=x(Be,t);return g?{action:"mint",functionName:g.functionName,isNFTIsh:!0,isErc20Ish:!1,args:g.args}:{action:"transaction",isErc20Ish:!1,isNFTIsh:!1}};let x=(t,r)=>{try{let p=de({abi:t,data:r});return{functionName:p.functionName,args:p.args||[]}}catch{return null}},Ge=t=>{try{if(typeof t=="string")return ce(Re,`0x${t.slice(10)}`)}catch{return null}},K=t=>`${parseFloat(t).toFixed(2)}`;function He(t,r){let p=[],d=new Map;if(t){for(let e of t)if(e.in[0]){let i;i=e.asset.type==="ERC721"||e.in[0].value==="approve_for_all"?{id:`nft:${e.asset.name}`,nftName:e.asset.name,nftCount:e.in.length}:{id:`token:${e.asset.type}:${e.asset.symbol}:${e.asset.name}`,iconUrl:e.asset.logo_url,value:e.in[0].value,symbol:e.asset.symbol,usdValue:e.in[0].usd_price?K(e.in[0].usd_price):void 0,decimals:e.asset.decimals},p.push(i)}else if(e.out[0]?.value){let i;i=e.asset.type==="ERC721"||e.out[0].value==="approve_for_all"?{id:`nft:${e.asset.name}`,nftName:e.asset.name}:{id:`token:${e.asset.type}:${e.asset.symbol}:${e.asset.name}`,iconUrl:e.asset.logo_url,value:e.out[0].value,symbol:e.asset.symbol,usdValue:e.out[0].usd_price?K(e.out[0].usd_price):void 0,decimals:e.asset.decimals},d.has(i.id)||d.set(i.id,i)}}for(let e of r)for(let i of Object.keys(e.spenders)){let c;c=e.asset.type==="ERC721"||e.spenders[i]?.value==="approve_for_all"?{id:`nft:${e.asset.name}`,nftName:e.asset.name}:{id:`token:${e.asset.type}:${e.asset.symbol}:${e.asset.name}`,iconUrl:e.asset.logo_url,value:e.spenders[i]?.value,symbol:e.asset.symbol,usdValue:e.spenders[i]?.usd_price?K(e.spenders[i]?.usd_price):void 0,decimals:e.asset.decimals},d.has(c.id)||d.set(c.id,c)}return{assetsIn:p,assetsOut:Array.from(d.values())}}const We=(t,r,p,d)=>{let[e,i]=a.useState(null),{walletProxy:c}=Y();return a.useEffect((()=>{e&&i(null),(async()=>{if(!c||!r)return null;let T=[],I=!0,h=await ue(t,p,r,d).catch((g=>(g.message&&g.message.includes("Insufficient balance for transaction")||g.message&&g.message.includes("Insufficient funds for gas * price + value")||g.details&&g.details.includes("insufficient funds")?I=!1:T.push(g),t)));return{tx:h,totalGasEstimate:h.gas,hasFunds:I,errors:T}})().then(i)}),[t]),e};let bt=new ht(new gt("There was an issue preparing your transaction",It.E32603_DEFAULT_INTERNAL_ERROR.eipCode)),Tt=(t,r)=>t?.sendTransaction?"transactionRequest"in t.sendTransaction?t.sendTransaction.transactionRequest:t.sendTransaction.transactionRequests[r]:void 0;const Dn={component:()=>{let{data:t,onUserCloseViaDialogOrKeybindRef:r,setModalData:p,navigate:d}=Xt(),{client:e,rpcConfig:i,chains:c,closePrivyModal:T,walletProxy:I,showFiatPrices:h}=Y(),{user:g}=te(),l=ee(),[v,J]=a.useState(0),[A,Mt]=a.useState(0),[o,Z]=a.useState(Tt(t,v)),[S,St]=a.useState(null),[X,tt]=a.useState(),[B,et]=a.useState(!1),[P,Ft]=a.useState(null),[nt,_t]=a.useState(null),[w,at]=a.useState(null),[q,Ct]=a.useState(void 0),[wt,U]=a.useState(void 0),[Nt,st]=a.useState(!1),[it,rt]=a.useState(!1),[$t,O]=a.useState([]),[At,Ot]=a.useState([]),[j,V]=a.useState("uninitiated"),[jt,Rt]=a.useState(void 0);if(!o||!t?.sendTransaction||!t?.sendTransaction)return s.jsx(ge,{error:Error("Invalid transaction request"),allowlistConfig:l.allowlistConfig,onRetry:()=>{t?.sendTransaction?.onFailure(bt),T({shouldCallAuthOnSuccess:!1})}});let{transactingWalletAddress:N}=t.sendTransaction,k=a.useMemo((()=>c.find((n=>Number(n.id)===Number(o.chainId)))),[o.chainId]),$=k?.nativeCurrency.symbol??"ETH",f=a.useMemo((()=>Et(o.data,!!l.embeddedWallets.extendedCalldataDecoding)),[o.data]),{action:E,isErc20Ish:C,isNFTIsh:Dt,functionName:R}=f,{toAddress:Bt,tokenAddress:ot}=a.useMemo((()=>({toAddress:f.isErc20Ish?f.transferTo:o.to??void 0,tokenAddress:f.isErc20Ish?o.to:void 0})),[f]);a.useEffect((()=>{o.to&&k&&C&&be({address:o.to,chain:k,rpcConfig:l.rpcConfig,privyAppId:l.id}).then(St).catch(console.error)}),[o.to,k]);let{tokenPrice:F,isTokenPriceLoading:Pt}=ye(o.chainId),{balance:lt}=fe({rpcConfig:l.rpcConfig,appId:l.id,address:N,chain:k}),ut=(function({rpcConfig:n,appId:m,address:b,chain:y,tokenInfo:M}){let{chains:Yt}=Y(),[W,Jt]=a.useState(null),[Zt,ct]=a.useState(!1),Q=a.useMemo((()=>{let _=y||Yt[0];if(_)return ne({chain:y,transport:ae(se(_,n,m))})}),[y,n,m]),mt=a.useCallback((async()=>{if(b&&Q&&M.address)try{return ct(!0),await Q.readContract({address:M.address,abi:Ce,functionName:"balanceOf",args:[b]})}catch(_){console.error(_)}finally{ct(!1)}}),[Q,b,M?.address,y]);return a.useEffect((()=>{mt().then((_=>_!=null&&Jt(_)))}),[mt]),{balance:W,isLoading:Zt&&W==null,formattedBalance:_e({amount:W??BigInt(0),decimals:M.decimals})}})({rpcConfig:l.rpcConfig,appId:l.id,address:N,tokenInfo:{address:ot||"",decimals:S?.decimals??18},chain:k}),pt=a.useMemo((()=>ie(Number(o.chainId),c,i,{appId:l.id})),[o.chainId,i]),u=We(o,N,pt,t?.sendTransaction?.prepareTransactionRequest);a.useEffect((()=>{Z(Tt(t,v))}),[v]),a.useEffect((()=>{t.sendTransaction?.getIsSponsored?t.sendTransaction.getIsSponsored().then(tt).catch(console.error):tt(!1)}),[t.sendTransaction.getIsSponsored]);let D=()=>{if(!B)return P?t?.sendTransaction?.onSuccess({hash:P}):w||u?.errors[0]?t?.sendTransaction?.onFailure(w??u?.errors[0]??bt):t?.sendTransaction?.onFailure(new ht(new gt("The user rejected the request",It.E4001_USER_REJECTED_REQUEST.eipCode))),T({shouldCallAuthOnSuccess:!1})};r.current=D;let L=!!(t.funding&&t.funding.supportedOptions.length>0),qt=ft(BigInt(u?.totalGasEstimate??0n),$),Ut=h&&F?z(BigInt(u?.totalGasEstimate??0n),F):void 0,Vt=ft(lt??0n,$,void 0,!0),Lt=h&&F?z(lt??0n,F):void 0,Gt=S&&!ut.isLoading&&C&&E!=="approve"?`${ut.formattedBalance} ${S.symbol}`:void 0,G=t.sendTransaction?.uiOptions?.transactionInfo?.title;G||(G=E==="approve"?C?"Confirm address":"Confirm action":`Approve ${E}`);let Ht=a.useMemo((()=>{if(t.sendTransaction?.uiOptions?.description)return t.sendTransaction?.uiOptions?.description;if(E==="approve"&&R==="setApprovalForAll"&&f.approved){let n=s.jsx(yt,{address:f.operator||"",url:k?.blockExplorers?.default?.url});return s.jsxs(s.Fragment,{children:[l.name," would like your permission for ",n," to transfer tokens on your behalf."]})}if(E==="approve"&&R==="setApprovalForAll"&&!f.approved){let n=s.jsx(yt,{address:f.operator||"",url:k?.blockExplorers?.default?.url});return s.jsxs(s.Fragment,{children:[l.name," would like your permission to revoke permissions of ",n," from transferring tokens on your behalf."]})}return C&&E==="approve"||C&&E==="approve"?`${l.name} would like your permission for ${re(f.spender)} to spend tokens on your behalf.`:`${l.name} wants your permission to approve the following transaction.`}),[l.name,C,f,t.sendTransaction?.uiOptions.description,R]),Wt=t.sendTransaction?.uiOptions?.transactionInfo?.contractInfo?.imgUrl?s.jsx("img",{src:t.sendTransaction.uiOptions.transactionInfo.contractInfo.imgUrl,alt:t.sendTransaction.uiOptions.transactionInfo.contractInfo.imgAltText}):null,H=!(!u||u.errors[0]||u.hasFunds||X!==!1),dt=H&&L,Qt=dt?"Add funds":t.sendTransaction?.uiOptions?.buttonText||(v<A?"Continue":"Approve"),zt=n=>{if(!n)throw Error("Transaction scan failed");if(n.validation.status==="Success"&&(n.validation.result_type==="Benign"?U("safe"):n.validation.result_type==="Warning"?U("warn"):n.validation.result_type==="Malicious"&&(U("error"),rt(!0))),n.simulation.status!=="Success")throw Error("Simulation failed");{Ct(n.simulation.params);let{assetsIn:m,assetsOut:b}=He(n.simulation.assets_diffs,n.simulation.exposures);if(b.length===0&&m.length===0)throw Error("No tokens found");O(b),Ot(m)}};if(a.useEffect((()=>{t.sendTransaction?.scanTransaction&&l.embeddedWallets.transactionScanning.enabled&&j==="uninitiated"&&(V("in progress"),t.sendTransaction.scanTransaction().then((n=>{zt(n),V("completed")})).catch((()=>V("failed"))))}),[!!t.sendTransaction?.scanTransaction]),a.useEffect((()=>{t.sendTransaction?.scanTransaction&&j!=="failed"||((n,m,b)=>{if(Mt((y=>y?.sendTransaction?"transactionRequest"in y.sendTransaction?0:y.sendTransaction.transactionRequests.length-1:0)(t)),m.isErc20Ish&&m.amount&&b){let y=Te({amount:m.amount,decimals:b.decimals});Rt(y),O([{value:y,symbol:b?.symbol,decimals:b?.decimals}])}else if(n.value){let y=BigInt(n.value),M=F?z(y,F):void 0;O(h&&M?[{value:M}]:[{value:he(y),symbol:$,decimals:18,usdValue:M}])}else O(h?[{value:"$0"}]:[{value:"0",symbol:$,decimals:18}])})(u?.tx??o,f,S)}),[o,u?.tx,f,S,j]),nt)return s.jsx(Ae,{txn:u?.tx??o,onClose:D,receipt:nt,transactionInfo:t.sendTransaction?.uiOptions.transactionInfo,tokenPrice:F,tokenSymbol:$,receiptHeader:t.sendTransaction?.uiOptions.successHeader,receiptDescription:t.sendTransaction?.uiOptions.successDescription});if(w)return s.jsx(ve,{transactionError:w,transactionHash:P??void 0,chainType:"ethereum",chainId:u?.tx.chainId??o.chainId,onClose:D,onRetry:({resetNonce:n})=>{at(null);let m={...u?.tx??o};n&&(m.nonce=void 0),Z(m)}});let Kt=A!==0&&typeof v=="number"&&v!==0?()=>{J(v-1)}:void 0;return Nt&&q?s.jsx(Ne,{details:q,onBack:()=>st(!1)}):s.jsx(ke,{transactionIndex:v,onBack:Kt,maxIndex:A,disabled:H&&!L||it,isSubmitting:B,submitError:w,isPreparing:!u,isTokenPriceLoading:Pt,isTokenContractInfoLoading:!Dt&&!S,prepareError:u?.errors[0],symbol:S?.symbol,chain:k,img:Wt,title:G,subtitle:Ht,txValue:o.value,fee:Ut??qt,isSponsored:X,from:N??"",to:Bt,tokenAddress:ot??void 0,network:l.chains.find((n=>n.id===o.chainId))?.name??"",transactionDetails:{...f,formattedAmount:jt},cta:Qt,missingFunds:H,action:E,balance:Gt??Lt??Vt,onClose:D,onClick:dt?async()=>{if(!N)return;if(!L)throw Error("Funding wallet is not enabled");let n="FundingMethodSelectionScreen";p({...t,funding:{...t.funding,methodScreen:n,chainType:"ethereum",amount:oe(BigInt(u?.tx.value??0)+BigInt(u?.totalGasEstimate?.toString()??0)),chain:k},solanaFundingData:t?.solanaFundingData}),d(n)}:async()=>{if(v<A)J(v+1);else{et(!0);try{let n=await e.getAccessToken();if(B||!n||!I||!g)return;let m=await t.sendTransaction.onConfirm({transactionRequest:u?.tx??o});if(Ft(m),t.sendTransaction?.signOnly)return await new Promise((y=>setTimeout(y,le))),t?.sendTransaction?.onSuccess({hash:m}),T({shouldCallAuthOnSuccess:!1});let b=await pt.waitForTransactionReceipt({hash:m});if(b.status==="reverted")throw Error("Transaction failed");_t(b)}catch(n){console.warn({transaction:u?.tx??o,error:n}),at(n)}finally{et(!1)}}},validation:wt,hasScanDetails:!!q,setIsScanDetailsOpen:st,preventMaliciousTransaction:it,setPreventMaliciousTransaction:rt,tokensSent:$t,tokensReceived:At,isScanning:j==="in progress",isCancellable:t.sendTransaction?.uiOptions?.isCancellable??!1,functionName:R})}};export{Dn as SendTransactionScreen,Dn as default};

import{d4 as t,d9 as l,dA as A,d7 as S,d6 as W,d5 as B,ds as c,dS as L}from"./index-Cax8jish.js";import{t as N}from"./WarningBanner-BDp-QC9i-BkTN-aS9.js";import{x as U}from"./WalletInfoCard-COAfUoX0-Cz_56LNA.js";import{n as $}from"./ScreenLayout-CNho46nP-B4LKwwT1.js";import"./ExclamationTriangleIcon-D57cRKwY.js";import"./Button-BCV6mjvS-Ds3dQ567.js";import"./ErrorMessage-Cx8GKGhL-B_a68wd5.js";import"./LabelXs-BOisBtqT-DLnPQAeV.js";import"./Address-BUmpXgsy-C3dnFLAv.js";import"./check-wa4k6I-2.js";import"./createLucideIcon-DHaPZvrP.js";import"./copy-B9b3vyLt.js";import"./shared-CtYf3O54-DNlg-LYi.js";import"./Screen-_0H_rCdH-BcqDJQ68.js";import"./ModalHeader-BTru6YQw-VHe3yaAt.js";import"./index-CJMgUOnw-Caq7k6r0.js";const R=({address:e,accessToken:o,appConfigTheme:n,onClose:a,isLoading:d=!1,exportButtonProps:i})=>t.jsx($,{title:"Export wallet",subtitle:t.jsxs(t.Fragment,{children:["Copy either your private key or seed phrase to export your wallet."," ",t.jsx("a",{href:"https://privy-io.notion.site/Transferring-your-account-9dab9e16c6034a7ab1ff7fa479b02828",target:"blank",rel:"noopener noreferrer",children:"Learn more"})]}),onClose:a,watermark:!0,children:t.jsxs(z,{children:[t.jsx(N,{theme:n,children:"Never share your private key or seed phrase with anyone."}),t.jsx(U,{title:"Your wallet",address:e,showCopyButton:!0}),t.jsx("div",{style:{width:"100%"},children:d?t.jsx(K,{}):o&&i&&t.jsx(F,{accessToken:o,dimensions:{height:"44px"},...i})})]})});let z=c.div.withConfig({displayName:"ContentContainer",componentId:"sc-b9fde557-0"})(["display:flex;flex-direction:column;gap:1.25rem;text-align:left;"]),K=()=>t.jsx(O,{children:t.jsx(D,{children:"Loading..."})}),O=c.div.withConfig({displayName:"PlaceholderContainer",componentId:"sc-b9fde557-1"})(["display:flex;gap:12px;height:44px;"]),D=c.div.withConfig({displayName:"PlaceholderButton",componentId:"sc-b9fde557-2"})(["display:flex;align-items:center;justify-content:center;width:100%;height:100%;font-size:16px;font-weight:500;border-radius:var(--privy-border-radius-md);background-color:var(--privy-color-background-2);color:var(--privy-color-foreground-3);"]);function F(e){let[o,n]=l.useState(e.dimensions.width),[a,d]=l.useState(void 0),i=l.useRef(null);l.useEffect((()=>{if(i.current&&o===void 0){let{width:p}=i.current.getBoundingClientRect();n(p)}let r=getComputedStyle(document.documentElement);d({background:r.getPropertyValue("--privy-color-background"),background2:r.getPropertyValue("--privy-color-background-2"),foreground3:r.getPropertyValue("--privy-color-foreground-3"),foregroundAccent:r.getPropertyValue("--privy-color-foreground-accent"),accent:r.getPropertyValue("--privy-color-accent"),accentDark:r.getPropertyValue("--privy-color-accent-dark"),success:r.getPropertyValue("--privy-color-success"),colorScheme:r.getPropertyValue("color-scheme")})}),[]);let s=e.chainType==="ethereum"&&!e.imported&&!e.isUnifiedWallet;return t.jsx("div",{ref:i,children:o&&t.jsxs(M,{children:[t.jsx("iframe",{style:{position:"absolute",zIndex:1},width:o,height:e.dimensions.height,allow:"clipboard-write self *",src:L({origin:e.origin,path:`/apps/${e.appId}/embedded-wallets/export`,query:e.isUnifiedWallet?{v:"1-unified",wallet_id:e.walletId,client_id:e.appClientId,width:`${o}px`,caid:e.clientAnalyticsId,phrase_export:s,...a}:{v:"1",entropy_id:e.entropyId,entropy_id_verifier:e.entropyIdVerifier,hd_wallet_index:e.hdWalletIndex,chain_type:e.chainType,client_id:e.appClientId,width:`${o}px`,caid:e.clientAnalyticsId,phrase_export:s,...a},hash:{token:e.accessToken}})}),t.jsx(m,{children:"Loading..."}),s&&t.jsx(m,{children:"Loading..."})]})})}const le={component:()=>{let[e,o]=l.useState(null),{authenticated:n,user:a}=A(),{closePrivyModal:d,createAnalyticsEvent:i,clientAnalyticsId:s,client:r}=S(),p=W(),{data:g,onUserCloseViaDialogOrKeybindRef:x}=B(),{onFailure:v,onSuccess:w,origin:b,appId:I,appClientId:C,entropyId:k,entropyIdVerifier:j,walletId:_,hdWalletIndex:P,chainType:V,address:h,isUnifiedWallet:E,imported:T}=g.keyExport,y=u=>{d({shouldCallAuthOnSuccess:!1}),v(typeof u=="string"?Error(u):u)},f=()=>{d({shouldCallAuthOnSuccess:!1}),w(),i({eventName:"embedded_wallet_key_export_completed",payload:{walletAddress:h}})};return l.useEffect((()=>{if(!n)return y("User must be authenticated before exporting their wallet");r.getAccessToken().then(o).catch(y)}),[n,a]),x.current=f,t.jsx(R,{address:h,accessToken:e,appConfigTheme:p.appearance.palette.colorScheme,onClose:f,isLoading:!e,exportButtonProps:e?{origin:b,appId:I,appClientId:C,clientAnalyticsId:s,entropyId:k,entropyIdVerifier:j,walletId:_,hdWalletIndex:P,isUnifiedWallet:E,imported:T,chainType:V}:void 0})}};let M=c.div.withConfig({displayName:"ButtonContainer",componentId:"sc-b9fde557-3"})(["overflow:visible;position:relative;overflow:none;height:44px;display:flex;gap:12px;"]),m=c.div.withConfig({displayName:"LoadingButton",componentId:"sc-b9fde557-4"})(["display:flex;align-items:center;justify-content:center;width:100%;height:100%;font-size:16px;font-weight:500;border-radius:var(--privy-border-radius-md);background-color:var(--privy-color-background-2);color:var(--privy-color-foreground-3);"]);export{le as EmbeddedWalletKeyExportScreen,R as EmbeddedWalletKeyExportView,le as default};

import{d7 as Q,d5 as V,d6 as Z,dc as ee,ed as ne,d9 as q,d4 as l,ey as le,ez as te,eA as P,eB as X,e4 as ae,dd as oe,eC as ie,dy as H,dF as ce,eD as se,ds as U}from"./index-CUKlbBka.js";import{y as re,s as G}from"./ModalHeader-BTru6YQw-BOw6POVk.js";import{r as pe}from"./ScreenHeader-Biz1wq02-ClDsXrYg.js";import{t as de}from"./FundWalletMethodHeader-CS84Ots9-Bt9uJ3RH.js";import{l as L}from"./Chip-Bsgj4Yc--L-xUNmdg.js";import{t as ye}from"./Subtitle-DkvfP2Ev-BZIrjZOa.js";import{l as ue}from"./WalletOverflowButton-BT_VMZP5-CuFVpOr1.js";import{i as he}from"./InjectedWalletIcon-DLcYOGDj-C3KRsnFy.js";import{o as we}from"./styles-DY17fuAX-CLn3gPcM.js";import"./LoadingSkeleton-CHdaq3pb-D31uJUbC.js";import"./createLucideIcon-BfcfeeeP.js";import"./WalletIcon-CWgftpNv.js";const y=({provider:u,displayName:v,logo:C,connectOnly:o,connector:c})=>{let S,{navigate:f,setModalData:$}=V(),{connectWallet:B}=Q(),F=ae(),b=oe(u),g=c.connectorType==="wallet_connect_v2"?u:c.walletClientType,W=window.matchMedia("(display-mode: standalone)").matches,x=ie({connectorType:c.connectorType,walletClientType:g});S=x&&x.chainTypes.includes(c.chainType)?()=>{x.isInstalled||c.chainType==="solana"&&"isInstalled"in c&&c.isInstalled?(B(c,g),f(o?"ConnectOnlyStatusScreen":"ConnectionStatusScreen")):H.isMobile?($({installWalletModalData:{walletConfig:x,chainType:c.chainType,connectOnly:o}}),f("WalletInterstitialScreen")):($({installWalletModalData:{walletConfig:x,chainType:c.chainType,connectOnly:o}}),f("InstallWalletScreen"))}:c.connectorType!=="coinbase_wallet"||c.coinbaseWalletConfig.preference?.options!=="eoaOnly"||!H.isMobile||W||ce()?()=>{(!se(window.navigator.userAgent)||event?.isTrusted)&&(B(c,g),o?c.connectorType==="wallet_connect_v2"?($((M=>({...M,externalConnectWallet:{...M?.externalConnectWallet,preSelectedWalletId:"wallet_connect_qr"}}))),f("ConnectOnlyLandingScreen")):f("ConnectOnlyStatusScreen"):f("ConnectionStatusScreen"))}:()=>{window.location.href=`https://go.cb-w.com/dapp?cb_url=${encodeURI(window.location.href)}`};let _=v||b?.metadata?.shortName||b?.name||c.walletClientType;return l.jsxs(me,{onClick:S,children:[l.jsx(he,{icon:C||b?.image_url?.md,name:_}),l.jsx("span",{children:_}),l.jsxs(fe,{id:"chip-container",children:[F?.walletClientType===g&&F?.chainType===c.chainType?l.jsx(J,{color:"gray",children:"Recent"}):l.jsx("span",{id:"connect-text",children:"Connect"}),c.chainType==="solana"&&l.jsx(J,{color:"gray",children:"Solana"})]})]})};let me=U(X).withConfig({displayName:"ConnectWalletButton",componentId:"sc-5fe2f19b-0"})(["> span{color:var(--privy-color-foreground);}> #chip-container > #connect-text{font-weight:500;color:var(--privy-color-accent);opacity:0;transition:opacity 0.1s ease-out;}:hover > #chip-container > #connect-text{opacity:1;}@media (max-width:440px){> #chip-container > #connect-text{display:none;}}"]),J=U(L).withConfig({displayName:"StyledChip",componentId:"sc-5fe2f19b-1"})(["margin-left:auto;"]),fe=U.div.withConfig({displayName:"ChipContainer",componentId:"sc-5fe2f19b-2"})(["display:flex;flex-wrap:wrap;gap:8px;margin-left:auto;"]);const Te=["coinbase_wallet","base_account"];let Ce=["metamask","okx_wallet","rainbow","uniswap","bybit_wallet","ronin_wallet","haha_wallet","uniswap_extension","zerion","rabby_wallet","cryptocom","binance","kraken_wallet"];const ge=["safe"],xe=["phantom","backpack","solflare","jupiter","universal_profile"],Be={component:()=>{let u,{connectors:v}=Q(),{setModalData:C,data:o,navigate:c}=V(),S=Z(),{wallets:f}=ee(),$=v.filter(ne).flatMap((e=>e.wallets)),[B,F]=q.useState("default"),b=o?.funding?.chainType==="solana",g=!!o?.funding?.crossChainBridgingEnabled;u=o?.funding?.chainType==="ethereum"?o.funding.erc20Address&&!o.funding.isUSDC?"ethereum-only":g&&!o.funding.chain.testnet?"ethereum-and-solana":"ethereum-only":g&&!o.funding?.isUSDC?"ethereum-and-solana":"solana-only";let W=f.filter((e=>e.walletClientType!=="privy")),x=W.map((e=>e.walletClientType)),_=$.filter((e=>e.walletClientType!=="privy")),M=_.map((e=>e.walletClientType)),T=[],E={...o.funding};E.usingDefaultFundingMethod&&(E.usingDefaultFundingMethod=!1);let R=({wallet:e,walletChainType:a})=>{C({...o,funding:{...E,connectedWallet:e,onContinueWithExternalWallet:()=>c(z({destChainType:b?"solana":"ethereum",sourceChainType:a}))},solanaFundingData:o?.solanaFundingData?{...o.solanaFundingData,sourceWalletData:{address:e.address,walletClientType:e.walletClientType}}:void 0}),c("FundingAmountEditScreen")};u!=="solana-only"&&T.push(...W.map(((e,a)=>l.jsx(K,{onClick:()=>R({wallet:e,walletChainType:"ethereum"}),icon:e.meta.icon,name:e.meta.name,chainType:e.type},a)))),u!=="ethereum-only"&&T.push(..._.map(((e,a)=>l.jsx(K,{onClick:()=>R({wallet:e,walletChainType:"solana"}),icon:e.meta.icon,name:e.meta.name,chainType:e.type},a)))),T.push(...(({walletList:e,walletChainType:a,connectors:N,connectOnly:p,ignore:O,walletConnectEnabled:j,forceWallet:k})=>{let h=[],I=[],A=[],w=N.filter((d=>a==="ethereum-only"?d.chainType==="ethereum":a!=="solana-only"||d.chainType==="solana")),D=w.find((d=>d.connectorType==="wallet_connect_v2"));for(let[d,n]of(k?[k.wallet]:e).entries()){if(n==="detected_ethereum_wallets")for(let[i,t]of w.filter((({chainType:s,connectorType:r,walletClientType:m})=>s!=="solana"&&(m==="uniswap_wallet_extension"||m==="uniswap_extension"?!O.includes("uniswap"):m==="crypto.com_wallet_extension"||m==="crypto.com_onchain"?!O.includes("cryptocom"):r==="injected"&&!O.includes(m)))).entries()){let{walletClientType:s,walletBranding:r,chainType:m}=t;(s==="unknown"?I:h).push(l.jsx(y,{connectOnly:p,provider:s,logo:r.icon,displayName:r.name,connector:t},`${d}-${n}-${s}-${m}-${i}`))}if(n==="detected_solana_wallets")for(let[i,t]of w.filter((({chainType:s,walletClientType:r})=>{if(s==="solana")return a!=="ethereum-only"&&!O.includes(r)})).entries()){let{walletClientType:s,walletBranding:r,chainType:m}=t;(s==="unknown"?I:h).push(l.jsx(y,{connectOnly:p,provider:s,logo:r.icon,displayName:r.name,connector:t},`${d}-${n}-${s}-${m}-${i}`))}if(xe.includes(n)){let i=w.find((t=>t.connectorType==="injected"&&t.walletClientType===n||t.connectorType===n));if(i&&h.push(l.jsx(y,{connectOnly:p,provider:n,connector:i},`${d}-${n}`)),a==="solana-only"||a==="ethereum-and-solana"){let t=w.find((({chainType:s,walletClientType:r})=>s==="solana"&&r===n));t&&h.push(l.jsx(y,{connectOnly:p,provider:n,connector:t},`${n}-solana`))}}else if(Ce.includes(n)){let i=w.find((t=>n==="uniswap"?t.walletClientType==="uniswap_wallet_extension"||t.walletClientType==="uniswap_extension":n==="cryptocom"?t.walletClientType==="crypto.com_wallet_extension"||t.walletClientType==="crypto.com_onchain":t.connectorType==="injected"&&t.walletClientType===n));if(j&&!i&&(i=D),i&&h.push(l.jsx(y,{connectOnly:p,provider:n,connector:i,logo:i.connectorType==="injected"?i.walletBranding.icon:void 0,displayName:i.connectorType==="injected"?i.walletBranding.name:void 0},`${d}-${n}`)),a==="solana-only"||a==="ethereum-and-solana"){let t=w.find((({chainType:s,walletClientType:r})=>s==="solana"&&r===n));t&&h.push(l.jsx(y,{connectOnly:p,provider:n,connector:t},`${n}-solana`))}}else if(Te.includes(n)){let i=w.find((({connectorType:t})=>t===n));i&&h.push(l.jsx(y,{connectOnly:p,provider:n,connector:i,displayName:i.walletClientType==="coinbase_wallet"?"Coinbase":"Base",logo:i.walletClientType==="coinbase_wallet"?le:te},`${d}-${n}`))}else if(ge.includes(n))D&&A.push(l.jsx(y,{connectOnly:p,provider:n,connector:D},`${d}-${n}`));else if(n==="wallet_connect")D&&A.push(l.jsx(y,{connectOnly:p,provider:n,connector:D,logo:D.walletBranding.icon,displayName:"WalletConnect"},`${d}-${n}`));else if(n===k?.wallet){let i=k.chainType==="ethereum"&&e.includes("detected_ethereum_wallets"),t=k.chainType==="solana"&&e.includes("detected_solana_wallets");if(i||t){let s=w.find((({walletClientType:r})=>r===n));s&&h.push(l.jsx(y,{connectOnly:p,provider:n,displayName:s.walletBranding?.name,logo:s.walletBranding?.icon,connector:s},`${d}-${n}`))}}}return[...I,...h,...A]})({walletList:S.appearance.walletList.filter((e=>!W.some((a=>a.walletClientType===e))&&!_.some((a=>a.walletClientType===e)))),walletChainType:u,connectors:v,connectOnly:!0,ignore:[...S.appearance.walletList,...x,...M],walletConnectEnabled:S.externalWallets.walletConnect.enabled}));let Y=l.jsx(ue,{text:"More wallets",onClick:()=>F("overflow")}),z=({sourceChainType:e,destChainType:a})=>e==="ethereum"&&a==="solana"?"AwaitingEvmToSolBridgingScreen":e==="ethereum"&&a==="ethereum"?"AwaitingExternalEthereumTransferScreen":e==="solana"&&a==="ethereum"?"AwaitingSolToEvmBridgingScreen":E.externalSolanaFundingScreen;return q.useEffect((()=>{C({...o,externalConnectWallet:{onCompleteNavigateTo:({address:e,walletClientType:a,walletChainType:N})=>{let p=N??"ethereum",O=p==="ethereum"?W.find((j=>j.address===e&&j.walletClientType===a)):_.find((j=>j.address===e&&j.walletClientType===a));return C({...o,funding:{...E,connectedWallet:O,onContinueWithExternalWallet:()=>{c(z({destChainType:b?"solana":"ethereum",sourceChainType:p}))}},solanaFundingData:o?.solanaFundingData?{...o.solanaFundingData,sourceWalletData:{address:e||"",walletClientType:a||""}}:void 0}),"FundingAmountEditScreen"}}})}),[]),l.jsxs(l.Fragment,B==="overflow"?{children:[l.jsx(re,{backFn:()=>F("default")},"header"),l.jsxs(P,{children:[l.jsx(ye,{style:{color:"var(--privy-color-foreground-3)",textAlign:"left"},children:"More wallets"}),T]}),l.jsx(G,{})]}:{children:[l.jsx(de,{}),l.jsx(pe,{title:"Transfer from wallet",description:"Connect a wallet to deposit funds or send funds manually to your wallet address."}),l.jsxs(P,{children:[T.length>4?T.slice(0,3):T,T.length>4&&Y]}),l.jsx(G,{})]})}};let K=({onClick:u,icon:v,name:C,chainType:o})=>l.jsxs(X,{onClick:u,children:[l.jsx(we,{style:{width:20},children:l.jsx("img",{src:v})}),C,l.jsx(L,{color:"gray",style:{marginLeft:"auto"},children:"Connected"}),o==="solana"&&l.jsx(L,{color:"gray",children:"Solana"})]});export{Be as TransferFromWalletScreen,Be as default};

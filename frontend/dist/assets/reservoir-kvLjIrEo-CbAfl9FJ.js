import{df as u,db as f,d9 as y}from"./index-CUKlbBka.js";const m=792703809,w="11111111111111111111111111111111",E="EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v";let n="0x0000000000000000000000000000000000000000";const T=({appId:r,originCurrency:t,destinationCurrency:e,...a})=>({tradeType:"EXPECTED_OUTPUT",originCurrency:t??n,destinationCurrency:e??n,referrer:`privy|${r}`,...a});let i="https://api.relay.link",o="https://api.testnets.relay.link";const b=async({input:r,isTestnet:t})=>{let e=await fetch((t?o:i)+"/quote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),a=await e.json();if(!(e.ok||typeof a.message=="string"&&a.message.startsWith("Invalid address")))throw console.error("Relay error:",a),Error(a.message??"Error fetching quote from relay");return a},v=r=>{let t=r.steps[0]?.items?.[0];if(t)return{from:t.data.from,to:t.data.to,value:Number(t.data.value),chainId:Number(t.data.chainId),data:t.data.data}};async function h({transactionHash:r,isTestnet:t}){let e=await fetch((t?o:i)+"/requests/v2?hash="+r),a=await e.json();if(!e.ok)throw"message"in a&&typeof a.message=="string"?Error(a.message):Error("Error fetching request from relay");return a.requests.at(0)?.status??"pending"}function k({transactionHash:r,isTestnet:t,bridgingStatus:e,setBridgingStatus:a,onSuccess:c,onFailure:l}){y.useEffect((()=>{if(r&&e){if(["delayed","waiting","pending"].includes(e)){let d=setInterval((async()=>{try{let s=await h({transactionHash:r,isTestnet:t});a(s)}catch(s){console.error(s)}}),1e3);return()=>clearInterval(d)}e==="success"?c({transactionHash:r}):["refund","failure"].includes(e)&&l({error:new p(r,t)})}}),[e,r,t])}class p extends u{constructor(t,e){super("We were unable to complete the bridging transaction. Funds will be refunded on your wallet.",void 0,f.TRANSACTION_FAILURE),this.relayLink=e?`https://testnets.relay.link/transaction/${t}`:`https://relay.link/transaction/${t}`}}export{v as d,k as f,p as h,E as n,T as o,m as r,w as s,b as u};

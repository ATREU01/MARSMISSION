import{d9 as l,d7 as A,d5 as I,d4 as e,ds as a,d6 as W}from"./index-CkUsQRUE.js";import{F as $}from"./ExclamationTriangleIcon-DA77hRwF.js";import{F as g}from"./WalletIcon-DE6nw6DC.js";import{n as y,b as E}from"./Button-BCV6mjvS-Bd2xhR6y.js";import{y as w,s as b}from"./ModalHeader-BTru6YQw-hOUjxTYb.js";import{e as N}from"./StackedContainer-BrIQsdas-Df2VbLDc.js";import{d as j}from"./Address-BUmpXgsy-C8JCcqRK.js";import{e as L}from"./capitalizeFirstLetter-DmLYqXsO-tV1Idewc.js";import{F}from"./ExclamationCircleIcon-_Jx8EwK6.js";import"./check-CxhqBI5X.js";import"./createLucideIcon-CfMu-kE1.js";import"./copy-Eq0BrXae.js";function M({title:r,titleId:o,...n},i){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":o},n),r?l.createElement("title",{id:o},r):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 8.25V6a2.25 2.25 0 0 0-2.25-2.25H6A2.25 2.25 0 0 0 3.75 6v8.25A2.25 2.25 0 0 0 6 16.5h2.25m8.25-8.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-7.5A2.25 2.25 0 0 1 8.25 18v-1.5m8.25-8.25h-6a2.25 2.25 0 0 0-2.25 2.25v6"}))}const R=l.forwardRef(M),z=a.span.withConfig({displayName:"CircleBorder",componentId:"sc-9056b8b8-0"})(["&&{width:82px;height:82px;border-width:4px;border-style:solid;border-color:",";border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1.2s linear infinite;transition:border-color 800ms;border-bottom-color:",";}"],(r=>r.color??"var(--privy-color-accent)"),(r=>r.color??"var(--privy-color-accent)"));function D(r){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...r,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),e.jsx("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})]})}const v=({onTransfer:r,isTransferring:o,transferSuccess:n})=>e.jsx(y,{...n?{success:!0,children:"Success!"}:{warn:!0,loading:o,onClick:r,children:"Transfer and delete account"}}),C=a.div.withConfig({displayName:"ConnectContainer",componentId:"sc-3505eb4c-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;width:100%;padding-bottom:16px;"]),f=a.div.withConfig({displayName:"GappedContainer",componentId:"sc-3505eb4c-1"})(["display:flex;flex-direction:column;&& p{font-size:14px;}width:100%;gap:16px;"]),T=a.div.withConfig({displayName:"DisclosedAccountContainer",componentId:"sc-3505eb4c-2"})(["display:flex;cursor:pointer;align-items:center;width:100%;border:1px solid var(--privy-color-foreground-4) !important;border-radius:var(--privy-border-radius-md);padding:8px 10px;font-size:14px;font-weight:500;gap:8px;"]),B=a(F).withConfig({displayName:"StyledExclamationCircleIcon",componentId:"sc-3505eb4c-3"})(["position:relative;width:",";height:",";color:var(--privy-color-foreground-3);margin-left:auto;"],(({$iconSize:r})=>`${r}px`),(({$iconSize:r})=>`${r}px`)),P=a(R).withConfig({displayName:"StyledCopyIcon",componentId:"sc-3505eb4c-4"})(["position:relative;width:15px;height:15px;color:var(--privy-color-foreground-3);margin-left:auto;"]),V=a.ol.withConfig({displayName:"ListContainer",componentId:"sc-3505eb4c-5"})(["display:flex;flex-direction:column;font-size:14px;width:100%;text-align:left;"]),m=a.li.withConfig({displayName:"ListItem",componentId:"sc-3505eb4c-6"})(["font-size:14px;list-style-type:auto;list-style-position:outside;margin-left:1rem;margin-bottom:0.5rem;&:last-child{margin-bottom:0;}"]),H=a.div.withConfig({displayName:"CircleContainer",componentId:"sc-3505eb4c-7"})(["position:relative;width:60px;height:60px;margin:10px;display:flex;justify-content:center;align-items:center;"]);let U=()=>e.jsx(H,{children:e.jsx(B,{$iconSize:60})});const _=({address:r,onClose:o,onRetry:n,onTransfer:i,isTransferring:d,transferSuccess:u})=>{let{defaultChain:t}=W(),s=t.blockExplorers?.default.url??"https://etherscan.io";return e.jsxs(e.Fragment,{children:[e.jsx(w,{onClose:o,backFn:n}),e.jsxs(C,{children:[e.jsx(U,{}),e.jsxs(f,{children:[e.jsx("h3",{children:"Check account assets before transferring"}),e.jsx("p",{children:"Before transferring, ensure there are no assets in the other account. Assets in that account will not transfer automatically and may be lost."}),e.jsxs(V,{children:[e.jsx("p",{children:" To check your balance, you can:"}),e.jsx(m,{children:"Log out and log back into the other account, or "}),e.jsxs(m,{children:["Copy your wallet address and use a"," ",e.jsx("u",{children:e.jsx("a",{target:"_blank",href:s,children:"block explorer"})})," ","to see if the account holds any assets."]})]}),e.jsxs(T,{onClick:()=>navigator.clipboard.writeText(r).catch(console.error),children:[e.jsx(g,{color:"var(--privy-color-foreground-1)",strokeWidth:2,height:"28px",width:"28px"}),e.jsx(j,{address:r,showCopyIcon:!1}),e.jsx(P,{})]}),e.jsx(v,{onTransfer:i,isTransferring:d,transferSuccess:u})]})]}),e.jsx(b,{})]})},se={component:()=>{let{initiateAccountTransfer:r,closePrivyModal:o}=A(),{data:n,navigate:i,lastScreen:d,setModalData:u}=I(),[t,s]=l.useState(void 0),[c,k]=l.useState(!1),[p,h]=l.useState(!1),x=async()=>{try{if(!n?.accountTransfer?.nonce||!n?.accountTransfer?.account)throw Error("missing account transfer inputs");h(!0),await r({nonce:n?.accountTransfer?.nonce,account:n?.accountTransfer?.account,accountType:n?.accountTransfer?.linkMethod,externalWalletMetadata:n?.accountTransfer?.externalWalletMetadata,telegramWebAppData:n?.accountTransfer?.telegramWebAppData,telegramAuthResult:n?.accountTransfer?.telegramAuthResult,farcasterEmbeddedAddress:n?.accountTransfer?.farcasterEmbeddedAddress,oAuthUserInfo:n?.accountTransfer?.oAuthUserInfo}),k(!0),h(!1),setTimeout(o,1e3)}catch(S){u({errorModalData:{error:S,previousScreen:d||"LinkConflictScreen"}}),i("ErrorScreen",!0)}};return t?e.jsx(_,{address:t,onClose:o,onRetry:()=>s(void 0),onTransfer:x,isTransferring:p,transferSuccess:c}):e.jsx(q,{onClose:o,onInfo:()=>s(n?.accountTransfer?.embeddedWalletAddress),onContinue:()=>s(n?.accountTransfer?.embeddedWalletAddress),onTransfer:x,isTransferring:p,transferSuccess:c,data:n})}},q=({onClose:r,onContinue:o,onInfo:n,onTransfer:i,transferSuccess:d,isTransferring:u,data:t})=>{if(!t?.accountTransfer?.linkMethod||!t?.accountTransfer?.displayName)return;let s={method:t?.accountTransfer?.linkMethod,handle:t?.accountTransfer?.displayName,disclosedAccount:t?.accountTransfer?.embeddedWalletAddress?{type:"wallet",handle:t?.accountTransfer?.embeddedWalletAddress}:void 0};return e.jsxs(e.Fragment,{children:[e.jsx(w,{closeable:!0}),e.jsxs(C,{children:[e.jsx(N,{children:e.jsxs("div",{children:[e.jsx(z,{color:"var(--privy-color-error)"}),e.jsx($,{height:38,width:38,stroke:"var(--privy-color-error)"})]})}),e.jsxs(f,{children:[e.jsxs("h3",{children:[(function(c){switch(c){case"sms":return"Phone number";case"email":return"Email address";case"siwe":return"Wallet address";case"siws":return"Solana wallet address";case"linkedin":return"LinkedIn profile";case"google":case"apple":case"discord":case"github":case"instagram":case"spotify":case"tiktok":case"line":case"twitch":case"twitter":case"telegram":case"farcaster":return`${L(c.replace("_oauth",""))} profile`;default:return c.startsWith("privy:")?"Cross-app account":c}})(s.method)," is associated with another account"]}),e.jsxs("p",{children:["Do you want to transfer",e.jsx("b",{children:s.handle?` ${s.handle}`:""})," to this account instead? This will delete your other account."]}),e.jsx(G,{onClick:n,disclosedAccount:s.disclosedAccount})]}),e.jsxs(f,{style:{gap:12,marginTop:12},children:[t?.accountTransfer?.embeddedWalletAddress?e.jsx(y,{onClick:o,children:"Continue"}):e.jsx(v,{onTransfer:i,transferSuccess:d,isTransferring:u}),e.jsx(E,{onClick:r,children:"No thanks"})]})]}),e.jsx(b,{})]})};function G({disclosedAccount:r,onClick:o}){return r?e.jsxs(T,{onClick:o,children:[e.jsx(g,{color:"var(--privy-color-foreground-1)",strokeWidth:2,height:"28px",width:"28px"}),e.jsx(j,{address:r.handle,showCopyIcon:!1}),e.jsx(D,{width:15,height:15,color:"var(--privy-color-foreground-3)",style:{marginLeft:"auto"}})]}):null}export{se as LinkConflictScreen,q as LinkConflictScreenView,se as default};

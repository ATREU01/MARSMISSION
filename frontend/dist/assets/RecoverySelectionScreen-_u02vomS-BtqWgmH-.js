import{d9 as n,d5 as R,dA as b,d6 as O,d7 as E,dX as I,d4 as e,eB as l,ds as M,ff as P}from"./index-Ctm9nHNV.js";import{F as $}from"./LockClosedIcon-8mtj5iyj.js";import{y as W,s as B,F as L}from"./ModalHeader-BTru6YQw-iyrvpJuy.js";import{n as D}from"./Button-BCV6mjvS-Dmkeowl_.js";import{r as v}from"./ScreenHeader-Biz1wq02-CAbLKHv7.js";import{d as G,e as U,o as H,n as Y}from"./styles-BxA7nKxI-C1Z8xQM6.js";function q({title:o,titleId:s,...c},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},c),o?n.createElement("title",{id:s},o):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const V=n.forwardRef(q);let d=M.div.withConfig({displayName:"IconContainer",componentId:"sc-1c4e63fb-0"})(["width:24px;height:24px;display:flex;justify-content:center;align-items:center;"]),K={"google-drive":"Google Drive",icloud:"iCloud","user-passcode":"password",privy:"Privy","privy-v2":"Privy"},N=({onClose:o})=>e.jsxs(Y,{children:[e.jsx(v,{title:"Why do I need to secure my account?",icon:e.jsx(L,{width:48}),description:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Your app uses cryptography to secure your account. App secrets are split and encrypted so only you can access them."}),e.jsx("p",{children:"To use this app on new devices, secure account secrets using a password, your Google or your Apple account. It’s important you don’t lose access to the method you choose."})]})}),e.jsx(D,{onClick:o,children:"Select backup method"})]});const _={component:()=>{let[o,s]=n.useState(!1),{navigate:c,lastScreen:a,navigateBack:x,setModalData:m,data:i,onUserCloseViaDialogOrKeybindRef:g}=R(),{user:f}=b(),{embeddedWallets:j}=O(),{closePrivyModal:w}=E(),t=I(f),u=t===null,{isInAccountCreateFlow:C,isResettingPassword:S,shouldCreateEth:k,shouldCreateSol:A}=i.recoverySelection,h=t&&t.recoveryMethod!=="privy",F=h?e.jsxs("span",{children:["Your account is currently secured using"," ",e.jsx("strong",{children:K[t?.recoveryMethod||"user-passcode"]}),"."]}):"Select a method for logging in on new devices and recovering your account.";function p(r){m({recoveryOAuthStatus:{provider:r,action:u?"create-wallet":"set-recovery",isInAccountCreateFlow:C,shouldCreateEth:k,shouldCreateSol:A}}),c("RecoveryOAuthScreen")}function y(){i?.setWalletPassword?.onFailure(Error("User exited set recovery flow")),w({shouldCallAuthOnSuccess:i?.setWalletPassword?.callAuthOnSuccessOnClose??!1})}return g.current=y,e.jsxs(e.Fragment,{children:[e.jsx(W,{onClose:y,backFn:o?()=>s(!1):a?x:void 0,infoFn:a||o?void 0:()=>s(!0)},"header"),o?e.jsx(N,{onClose:()=>s(!1)}):e.jsxs(e.Fragment,{children:[e.jsx(v,{title:h?"Update backup method":"Secure your account",icon:e.jsx($,{width:48}),description:F}),e.jsx(G,{children:j.userOwnedRecoveryOptions.filter((r=>!["icloud","google-drive"].includes(t?.recoveryMethod||"")||r!==t?.recoveryMethod)).sort().map((r=>{switch(r){case"google-drive":return e.jsxs(l,{onClick:()=>p("google-drive"),children:[e.jsx(d,{children:e.jsx(H,{style:{width:18}})}),"Back up to Google Drive"]},r);case"icloud":return e.jsxs(l,{onClick:()=>p("icloud"),children:[e.jsx(d,{children:e.jsx(U,{style:{width:24}})}),"Back up to Apple iCloud"]},r);case"user-passcode":return e.jsxs(l,{onClick:()=>{c(P({isCreatingWallet:u,skipSplashScreen:!0}))},children:[e.jsx(d,{children:e.jsx(V,{style:{width:18}})}),S?"Reset your":"Set a"," password"]},r);default:return null}}))})]}),e.jsx(B,{})]})}};export{_ as RecoverySelectionScreen,_ as default};

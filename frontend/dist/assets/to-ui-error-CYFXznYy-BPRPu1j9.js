import{d9 as a,d4 as e,d7 as C,e1 as V,d6 as L,eB as p,e6 as u,fc as N,fd as Y,fe as D,dc as H,es as O,ev as W,cl as z,ds as J}from"./index-Cpv0zDxI.js";import{N as Q,l as j,s as X,m as v,c as b,d as f,I as q,w as g,b as T,F as B,L as F,p as E,x as G}from"./PinInput-C3_MNxMt-Dfqbl5wP.js";import{F as K}from"./FingerPrintIcon-CtllU9JT.js";import{F as I}from"./PhoneIcon-CdbSo_yf.js";import{F as M}from"./ShieldCheckIcon-Dhm3Vd90.js";import{y,v as m}from"./ModalHeader-BTru6YQw-BHChfpN7.js";import{n as U}from"./ScreenLayout-CNho46nP-Dt3g6k8I.js";import{F as Z}from"./ExclamationTriangleIcon-BtuagLBw.js";import{n as _,b as S}from"./Button-BCV6mjvS-Dszq2MTY.js";import{e as ee}from"./StackedContainer-BrIQsdas-DxS4v3u3.js";import{c as re}from"./useGetTokenPrice-CDPxMEO--C0dOX7-5.js";import{V as se}from"./TransactionDetails-BdW2lq_B-Cp_8nohP.js";function ne({title:s,titleId:r,...n},o){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const oe=a.forwardRef(ne),ge=({handleClose:s,user:r,onSelect:n})=>e.jsxs(U,{title:"Verify your identity",subtitle:"Choose a verification method",icon:M,iconVariant:"subtle",onClose:s,showClose:!0,watermark:!0,children:[e.jsxs(G,{children:[r.mfaMethods.includes("totp")&&e.jsxs(p,{onClick:()=>n("totp"),children:[e.jsx(u,{children:e.jsx(B,{})}),"Authenticator app"]},"totp"),r.mfaMethods.includes("sms")&&e.jsxs(p,{onClick:()=>n("sms"),children:[e.jsx(u,{children:e.jsx(I,{})}),"SMS"]},"sms"),r.mfaMethods.includes("passkey")&&e.jsxs(p,{onClick:()=>n("passkey"),children:[e.jsx(u,{children:e.jsx(K,{})}),"Passkey"]},"passkey")]}),e.jsx(m,{})]}),k=({pendingTransaction:s})=>{let{wallets:r}=H(),{walletProxy:n,rpcConfig:o,chains:i,appId:c,nativeTokenSymbolForChainId:d}=C(),[t,R]=a.useState(null),[l,A]=a.useState(s),{tokenPrice:$}=re(l.chainId),P=d(s.chainId)||"ETH",h=a.useMemo((()=>r.find((x=>x.walletClientType==="privy"))),[r]);return a.useEffect((()=>{(async function(){if(!n||!h)return l;let x=O(l.chainId,i,o,{appId:c}),w=await W(l,x,h.address);return R(z(BigInt(w.gas??0))),w})().then(A).catch(console.error)}),[n]),h?e.jsx(te,{children:e.jsx(se,{from:h.address,to:l.to,txn:l,gas:t??void 0,tokenPrice:$,tokenSymbol:P})}):null};let te=J.div.withConfig({displayName:"TransactionInfoWrapper",componentId:"sc-8d9a2f57-0"})(["width:100%;padding:1rem 0;"]);const ye=({hasBlockingError:s,error:r,onClose:n,onBack:o,handleSubmit:i,account:c,submitSuccess:d})=>{let{pendingTransaction:t}=C();return e.jsxs(e.Fragment,{children:[e.jsx(y,{onClose:n},"header"),e.jsx(ee,{children:e.jsxs("div",{children:[e.jsx(V,{success:d,fail:!!r}),e.jsx(r?Z:Q,{style:{width:"38px",height:"38px"}})]})}),e.jsx(j,{style:{marginTop:"1rem"},children:"Verifying with passkey"}),e.jsxs(X,{children:[e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(M,{})}),"Approve this action using your touch, face, PIN, or hardware key."]}),e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(oe,{})}),"You last added a passkey on"," ",c?.firstVerifiedAt?.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}),"."]})]}),t&&e.jsx(f,{children:e.jsx(k,{pendingTransaction:t})}),r&&e.jsxs(e.Fragment,{children:[e.jsx(q,{style:{marginTop:"1.25rem"},children:r.message}),e.jsx(_,{disabled:s,onClick:i,style:{margin:"1.25rem auto 0"},children:"Try again"})]}),o&&e.jsx(g,{style:{marginTop:"1rem"},onClick:o,children:"Choose another method"}),e.jsx(m,{})]})},ke=({selectedMethod:s,submitSuccess:r,hasBlockingError:n,onClose:o,onBack:i,handleSubmitCode:c})=>{let d=L(),{pendingTransaction:t}=C();switch(s){case"sms":return e.jsxs(e.Fragment,{children:[e.jsx(y,{onClose:o},"header"),e.jsx(T,{style:{marginBottom:"1.5rem"},children:e.jsx(I,{})}),e.jsx(j,{children:"Enter verification code"}),e.jsxs(f,{children:[e.jsx(F,{success:r,disabled:n,onChange:c}),e.jsxs(E,{children:["To continue, please enter the 6-digit code sent to your ",e.jsx("strong",{children:"mobile device"})]}),t&&e.jsx(k,{pendingTransaction:t})]}),i&&e.jsx(g,{theme:d?.appearance.palette.colorScheme,onClick:i,children:"Choose another method"}),e.jsx(S,{onClick:o,children:"Cancel"}),e.jsx(m,{})]});case"totp":return e.jsxs(e.Fragment,{children:[e.jsx(y,{onClose:o},"header"),e.jsx(T,{style:{marginBottom:"1.5rem"},children:e.jsx(B,{})}),e.jsx(j,{children:"Enter verification code"}),e.jsxs(f,{children:[e.jsx(F,{success:r,disabled:n,onChange:c}),e.jsxs(E,{children:["To continue, please enter the 6-digit code generated from your"," ",e.jsx("strong",{children:"authenticator app"})]}),t&&e.jsx(k,{pendingTransaction:t})]}),i&&e.jsx(g,{theme:d?.appearance.palette.colorScheme,onClick:i,children:"Choose another method"}),e.jsx(S,{onClick:o,children:"Cancel"}),e.jsx(m,{})]});default:return null}},Ce=s=>N(s)?{isBlocking:!0,error:Error("You have exceeded the maximum number of attempts. Please close this window and try again in 10 seconds.")}:Y(s)?{isBlocking:!1,error:Error("The code you entered is not valid")}:D(s)?{isBlocking:!0,error:Error("You have exceeded the time limit for code entry. Please try again in 30 seconds.")}:(console.error(s),{isBlocking:!1,error:Error("Something went wrong.")});export{ye as Q,ke as R,Ce as X,ge as z};

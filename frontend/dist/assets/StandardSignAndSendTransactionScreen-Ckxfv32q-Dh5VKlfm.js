import{fJ as st,d5 as ct,d7 as dt,d6 as lt,dA as ut,d9 as v,fh as pt,dX as mt,d4 as p,fx as ft,fK as Q,fc as gt,ds as Z,ez as ht,fp as yt,fB as wt,fD as bt,fL as kt}from"./index-CmAhqgXz.js";import{t as At}from"./useGetSolPrice-Cfm8o9C5-DV3ZSLX1.js";import{ErrorScreenView as xt}from"./ErrorScreen-Yi-Rhs0v-CW0wvB06.js";import{F as St}from"./CheckCircleIcon--d3II9Sj.js";import{n as Ot}from"./Button-BCV6mjvS-C8I5Wwg0.js";import{l as vt}from"./Layouts-Bmf8DxNP-DlEYzfZu.js";import{y as It,s as jt}from"./ModalHeader-BTru6YQw-BpO7CAfA.js";import{r as $t}from"./ScreenHeader-Biz1wq02-BqcgIa1W.js";import{e as Ct,o as B,r as D,i as R}from"./Value-B4M62ove-hUYpwTMp.js";import{f as G,k as Tt}from"./WalletLink-Cj92ni3W-4u766T6r.js";import{e as _t}from"./StackedContainer-BrIQsdas-CCxwjm5h.js";import{r as Et,Y as Lt}from"./TransactionErrorView-RLIeHdul-DR9yvlCR.js";import{t as K}from"./transaction-CnfuREWo-nROljJQP.js";import{d as Pt,c as tt,l as Ft,u as Bt,f as Dt}from"./useSolanaRpcClient-Brcjny8C-BPzPHRsC.js";import{C as Rt,e as Mt,n as Ut,a as M,o as Jt,d as Nt,r as qt,t as zt}from"./getFormattedUsdFromLamports-B6EqSEho-C-HCdwKa.js";import{i as C}from"./formatters-BK1a-hMN.js";import"./reservoir-kvLjIrEo-Bdg9m_4-.js";import"./ScreenLayout-CNho46nP-_IbYTLdk.js";import"./Screen-_0H_rCdH-B1nWB8Tj.js";import"./index-CJMgUOnw-CZQTeXe-.js";import"./createLucideIcon-zHmFXpcR.js";import"./lock-Ca8Jo67Y.js";import"./LoadingSkeleton-CHdaq3pb-BMtLVe-8.js";import"./ethers-Bl5aM5Gz-W5DPhKKu.js";import"./ErrorMessage-Cx8GKGhL-BXrfqEXr.js";import"./LabelXs-BOisBtqT-D5ssQRrt.js";import"./Subtitle-DkvfP2Ev-CxuqpOcn.js";import"./Title-D0pfZff--DGCrwuNF.js";import"./Address-BUmpXgsy-DeoK_NWv.js";import"./check-ixOE9G87.js";import"./copy-B1dTrldY.js";import"./WalletInfoCard-COAfUoX0-ug0MTaWV.js";import"./shared-CtYf3O54-BHzhp0zC.js";import"./Checkbox-NmGCZeKL-BoKX_o6_.js";import"./ErrorBanner-BdiArMwu-ClwyT43Y.js";import"./ExclamationCircleIcon-BRGD5aUQ.js";import"./WarningBanner-BDp-QC9i-BdEO-gNE.js";import"./ExclamationTriangleIcon-Cq54eMkI.js";import"./ChevronDownIcon-DT4XnmLE.js";var Vt=32300001,Wt=3230004;function et(t){return Array.isArray(t)?"%5B"+t.map(et).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function Ht([t,n]){return`${t}=${et(n)}`}function Kt(t){const n=Object.entries(t).map(Ht).join("&");return btoa(n)}function Xt(t,n={}){{let e=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(n).length&&(e+=` '${Kt(n)}'`),`${e}\``}}var nt=class extends Error{cause=this.cause;context;constructor(...[t,n]){let e,a;n&&Object.entries(Object.getOwnPropertyDescriptors(n)).forEach(([i,u])=>{i==="cause"?a={cause:u.value}:(e===void 0&&(e={__code:t}),Object.defineProperty(e,i,u))});const r=Xt(t,e);super(r,a),this.context=Object.freeze(e===void 0?{__code:t}:e),this.name="SolanaError"}};function Yt(t){return!("exists"in t)||"exists"in t&&t.exists}function Gt(t){const n=t.filter(e=>Yt(e)&&e.data instanceof Uint8Array);if(n.length>0){const e=n.map(a=>a.address);throw new nt(Wt,{addresses:e})}}function Qt(t,n){if(!n)return Object.freeze({address:t,exists:!1});const e=st().encode(n.data[0]);return Object.freeze({...at(n),address:t,data:e,exists:!0})}function Zt(t,n){if(!n)return Object.freeze({address:t,exists:!1});const e=n.data.parsed.info;return Object.freeze({...at(n),address:t,data:e,exists:!0})}function at(t){return Object.freeze({executable:t.executable,lamports:t.lamports,programAddress:t.owner,space:t.space})}async function te(t,n,e={}){const{abortSignal:a,...r}=e;return(await t.getMultipleAccounts(n,{...r,encoding:"jsonParsed"}).send({abortSignal:a})).value.map((u,c)=>u&&typeof u=="object"&&"parsed"in u.data?Zt(n[c],u):Qt(n[c],u))}function ee(t){const n=t.filter(e=>!e.exists);if(n.length>0){const e=n.map(a=>a.address);throw new nt(Vt,{addresses:e})}}async function ne(t,n,e){if(t.length===0)return{};const a=await te(n,t,e);return Gt(a),ee(a),a.reduce((r,i)=>({...r,[i.address]:i.data.addresses}),{})}const ae=Z.span.withConfig({displayName:"CircleBackground",componentId:"sc-c9f33cd-0"})(["&&{width:82px;height:82px;border-width:4px;border-style:solid;border-color:",";background-color:",";border-radius:50%;display:inline-block;box-sizing:border-box;}"],(t=>t.color??"var(--privy-color-accent)"),(t=>t.color??"var(--privy-color-accent)")),re=({instruction:t,fees:n,transactionInfo:e,solPrice:a,chain:r})=>p.jsxs(Ct,{children:[e?.action&&p.jsxs(B,{children:[p.jsx(D,{children:"Action"}),p.jsx(R,{children:e.action})]}),t?.total!=null&&p.jsxs(B,{children:[p.jsx(D,{children:"Total"}),p.jsx(R,{children:t.total})]}),!t?.total&&t?.amount!=null&&p.jsxs(B,{children:[p.jsx(D,{children:"Total"}),p.jsx(R,{children:p.jsx(G,{quantities:[t.amount,n],tokenPrice:a})})]}),p.jsxs(B,{children:[p.jsx(D,{children:"Fees"}),p.jsx(R,{children:p.jsx(G,{quantities:[n],tokenPrice:a})})]}),t?.to&&p.jsxs(B,{children:[p.jsx(D,{children:"To"}),p.jsx(R,{children:p.jsx(Tt,{walletAddress:t.to,chainId:r,chainType:"solana"})})]})]}),oe=({fees:t,onClose:n,receiptHeader:e,receiptDescription:a,transactionInfo:r,solPrice:i,signOnly:u,instruction:c,chain:m})=>p.jsxs(p.Fragment,{children:[p.jsx(It,{onClose:n}),p.jsx(_t,{style:{marginBottom:"16px"},children:p.jsxs("div",{children:[p.jsx(ae,{color:"var(--privy-color-success-light)"}),p.jsx(St,{height:38,width:38,strokeWidth:2,stroke:"var(--privy-color-success)"})]})}),p.jsx($t,{title:e??`Transaction ${u?"signed":"complete"}!`,description:a??"You're all set."}),p.jsx(re,{solPrice:i,instruction:c,fees:t,transactionInfo:r,chain:m}),p.jsx(ht,{}),p.jsx(ie,{loading:!1,onClick:n,children:"Close"}),p.jsx(vt,{}),p.jsx(jt,{})]});let ie=Z(Ot).withConfig({displayName:"SubmitButton",componentId:"sc-3cb7ee42-0"})(["&&{margin-top:24px;}transition:color 350ms ease,background-color 350ms ease;"]);async function P(t,n){try{return await t}catch{return n}}function se(t){switch(t){case"solana:mainnet":return"mainnet-beta";case"solana:devnet":return"devnet";case"solana:testnet":return"testnet"}}async function I({privyClient:t,chain:n,mint:e}){let a=zt[n];if(!a[e]){let r=await t.getSplTokenMetadata({mintAddress:e,cluster:se(n)});r&&(a[e]={address:e,symbol:r.symbol,decimals:r.decimals})}return a[e]}async function ce({tx:t,solanaClient:n,privyClient:e,checkFunds:a}){let r=Q().decode(tt(t)),i=r.staticAccounts[0]??"",u=await Ft({solanaClient:n,tx:t}),c=a?await P(Bt({solanaClient:n,tx:t})):void 0,m=c?.hasFunds??!0,x={},f=[],b=await(async function({solanaClient:k,message:o}){if(!("addressTableLookups"in o)||!o.addressTableLookups)return[...o.staticAccounts];let d=o.addressTableLookups.map((g=>g.lookupTableAddress)),j=await ne(d,k.rpc),E=d.map(((g,A)=>[...o.addressTableLookups[A]?.writableIndexes.map((T=>{let $=j[g]?.[T];if($)return{key:$,isWritable:!0,altIdx:A}}))??[],...o.addressTableLookups[A]?.readonlyIndexes.map((T=>{let $=j[g]?.[T];if($)return{key:$,isWritable:!1,altIdx:A}}))??[]])).flat().filter((g=>!!g)).sort(((g,A)=>g.isWritable!==A.isWritable?g.isWritable?-1:1:g.altIdx-A.altIdx)).map((({key:g})=>g));return[...o.staticAccounts,...E]})({solanaClient:n,message:r});for(let k of r.instructions){let o=r.staticAccounts[k.programAddressIndex]||"";if(o!==Mt&&o!==Ut)if(o!==M){if(o===Jt){let d=await P((function(j,E,g){let[A,T,$,_]=j.accountIndices?.map((U=>E[U]))??[];return{type:"ata-creation",program:g,payer:A,ata:T,owner:$,mint:_}})(k,b,o));if(!d){f.push({type:"unknown",program:o,discriminator:k.data?.[0]});continue}if(f.push(d),d.ata&&d.owner&&d.mint){x[d.ata]={owner:d.owner,mint:d.mint};continue}}if(Nt.includes(o)){let d=await P(ue(k,b,n,e,o));if(!d){f.push({type:"unknown",program:o,discriminator:k.data?.[0]});continue}f.push(d)}else if(qt.includes(o)){let d=await P(pe(k,b,n,e,o));if(!d){f.push({type:"unknown",program:o,discriminator:k.data?.[0]});continue}f.push(d)}else f.push({type:"unknown",program:o,discriminator:k.data?.[0]})}else{let d=await P(le(k,b));if(!d){f.push({type:"unknown",program:o,discriminator:k.data?.[0]});continue}f.push(d)}else{let d=await P(de(k,b,n,e,x,o));if(!d){f.push({type:"unknown",program:o,discriminator:k.data?.[0]});continue}f.push(d),d.type==="spl-transfer"&&(d.fromAta&&d.fromAccount&&d.token.address&&(x[d.fromAta]??={owner:d.fromAccount,mint:d.token.address}),d.toAta&&d.toAccount&&d.token.address&&(x[d.toAta]??={owner:d.toAccount,mint:d.token.address}))}}return{spender:i,fee:u,instructions:f,hasFunds:!!m}}function S(t,n=0){try{return(function(a,r=0){let i=0n;for(let u=0;u<8;u++)i|=BigInt(a[r+u])<<BigInt(8*u);return i})(t,n)}catch{}try{return t.readBigInt64LE(n)}catch{}let e=Dt(t);try{return((a,r=0)=>{let i=a[r],u=a[r+7];if(!i||!u)throw Error(`Buffer offset out of range: first: ${i}, last: ${u}.`);return(BigInt(a[r+4]+256*a[r+5]+65536*a[r+6]+(u<<24))<<32n)+BigInt(i+256*a[++r]+65536*a[++r]+16777216*a[++r])})(e)}catch{}try{return e.subarray(n).readBigInt64LE()}catch{}try{return e.readBigInt64LE(n)}catch{}return 0n}async function de(t,n,e,a,r,i){let u=t.data?.[0],c=t.accountIndices?.map((m=>n[m]))??[];if(u===1){let[m,x,f]=c;return{type:"spl-init-account",program:i,account:m,mint:x,owner:f}}if(u===3){let m,x,[f,b,k]=c,o="",d=b?r[b]:void 0;if(d)m=d.owner,o=d.mint;else if(b){let g=await e.rpc.getAccountInfo(b,{commitment:"confirmed",encoding:"jsonParsed"}).send(),A=g.value?.data;m=A?.parsed?.info?.owner,o=A?.parsed?.info?.mint??"",x=A?.parsed?.info?.tokenAmount?.decimals}!o&&f&&(o=(await e.rpc.getAccountInfo(f,{commitment:"confirmed",encoding:"jsonParsed"}).send()).value?.data?.parsed?.info?.mint??"");let j=await I({privyClient:a,chain:e.chain,mint:o}),E=j?.symbol??"";return x??=j?.decimals??9,{type:"spl-transfer",program:i,fromAta:f,fromAccount:k,toAta:b,toAccount:m,value:S(t.data,1),token:{symbol:E,decimals:x,address:o}}}if(u===9){let[m,x,f]=c;return{type:"spl-close-account",program:i,source:m,destination:x,owner:f}}if(u===17)return{type:"spl-sync-native",program:i};throw Error(`Token program instruction type ${u} not supported`)}async function le(t,n){let e=t.data?.[0],a=t.accountIndices?.map((r=>n[r]))??[];if(e===0){let[,r]=a;return{type:"create-account",program:M,account:r?.toString(),value:S(t.data,4),withSeed:!1}}if(e===2){let[r,i]=a;return{type:"sol-transfer",program:M,fromAccount:r,toAccount:i,token:{symbol:"SOL",decimals:9},value:S(t.data,4),withSeed:!1}}if(e===3){let[,r]=a;return{type:"create-account",program:M,account:r,withSeed:!0,value:S(t.data.slice(t.data.length-32-8-8))}}if(e===11){let[r,i]=a;return{type:"sol-transfer",program:M,fromAccount:r,toAccount:i,value:S(t.data,4),token:{symbol:"SOL",decimals:9},withSeed:!0}}throw Error(`System program instruction type ${e} not supported`)}async function ue(t,n,e,a,r){let i=t.accountIndices?.map((c=>n[c]))??[],u=t.data?.[0];if(u===143){let c=i[10],m=i[11];return{type:"raydium-swap-base-input",program:r,mintIn:c,mintOut:m,tokenIn:c?await I({privyClient:a,chain:e.chain,mint:c}):void 0,tokenOut:m?await I({privyClient:a,chain:e.chain,mint:m}):void 0,amountIn:S(t.data,8),minimumAmountOut:S(t.data,16)}}if(u===55){let c=i[10],m=i[11];return{type:"raydium-swap-base-output",program:r,mintIn:c,mintOut:m,tokenIn:c?await I({privyClient:a,chain:e.chain,mint:c}):void 0,tokenOut:m?await I({privyClient:a,chain:e.chain,mint:m}):void 0,maxAmountIn:S(t.data,8),amountOut:S(t.data,16)}}throw Error(`Raydium swap program instruction type ${u} not supported`)}async function pe(t,n,e,a,r){let i=t.data?.[0],u=t.accountIndices?.map((c=>n[c]))??[];if([208,51,239,151,123,43,237,92].includes(i)){let c=u[5],m=u[6];return{type:"jupiter-swap-exact-out-route",program:r,mintIn:c,mintOut:m,tokenIn:c?await I({privyClient:a,chain:e.chain,mint:c}):void 0,tokenOut:m?await I({privyClient:a,chain:e.chain,mint:m}):void 0,outAmount:S(t.data,t.data.length-1-2-8-8),quotedInAmount:S(t.data,t.data.length-1-2-8)}}if([176,209,105,168,154,125,69,62].includes(i)){let c=u[7],m=u[8];return{type:"jupiter-swap-exact-out-route",program:r,mintIn:c,mintOut:m,tokenIn:c?await I({privyClient:a,chain:e.chain,mint:c}):void 0,tokenOut:m?await I({privyClient:a,chain:e.chain,mint:m}):void 0,outAmount:S(t.data,t.data.length-1-2-8-8),quotedInAmount:S(t.data,t.data.length-1-2-8)}}if([193,32,155,51,65,214,156,129].includes(i)){let c=u[7],m=u[8];return{type:"jupiter-swap-shared-accounts-route",program:r,mintIn:c,mintOut:m,tokenIn:c?await I({privyClient:a,chain:e.chain,mint:c}):void 0,tokenOut:m?await I({privyClient:a,chain:e.chain,mint:m}):void 0,inAmount:S(t.data,t.data.length-1-2-8-8),quotedOutAmount:S(t.data,t.data.length-1-2-8)}}throw[62,198,214,193,213,159,108,210].includes(i)&&console.warn("Jupiter swap program instruction 'claim' not implemented"),[116,206,27,191,166,19,0,73].includes(i)&&console.warn("Jupiter swap program instruction 'claim_token' not implemented"),[26,74,236,151,104,64,183,249].includes(i)&&console.warn("Jupiter swap program instruction 'close_token' not implemented"),[229,194,212,172,8,10,134,147].includes(i)&&console.warn("Jupiter swap program instruction 'create_open_orders' not implemented"),[28,226,32,148,188,136,113,171].includes(i)&&console.warn("Jupiter swap program instruction 'create_program_open_orders' not implemented"),[232,242,197,253,240,143,129,52].includes(i)&&console.warn("Jupiter swap program instruction 'create_token_ledger' not implemented"),[147,241,123,100,244,132,174,118].includes(i)&&console.warn("Jupiter swap program instruction 'create_token_account' not implemented"),[229,23,203,151,122,227,173,42].includes(i)&&console.warn("Jupiter swap program instruction 'route' not implemented"),[150,86,71,116,167,93,14,104].includes(i)&&console.warn("Jupiter swap program instruction 'route_with_token_ledger' not implemented"),[228,85,185,112,78,79,77,2].includes(i)&&console.warn("Jupiter swap program instruction 'set_token_ledger' not implemented"),[230,121,143,80,119,159,106,170].includes(i)&&console.warn("Jupiter swap program instruction 'shared_accounts_route_with_token_ledger' not implemented"),Error(`Jupiter swap program instruction type ${i} not supported`)}const Qe={component:()=>{let{data:t,onUserCloseViaDialogOrKeybindRef:n,setModalData:e,navigate:a}=ct(),{client:r,closePrivyModal:i,walletProxy:u,showFiatPrices:c}=dt(),m=lt(),{user:x}=ut(),f=Pt()(t?.standardSignAndSendTransaction?.chain??"solana:mainnet"),[b,k]=v.useState(t?.standardSignAndSendTransaction?.transaction),[o,d]=v.useState(),[j,E]=v.useState(),[g,A]=v.useState({value:0n,isLoading:!1}),[T,$]=v.useState(!1),[_,U]=v.useState({}),[J,X]=v.useState(),O=t?.standardSignAndSendTransaction?.account,z=!!t?.standardSignAndSendTransaction?.signOnly,rt=O?.imported?pt(x).find((l=>l.address===O.address)):mt(x),{solPrice:N,isSolPriceLoading:V}=At({enabled:c}),F=v.useMemo((()=>{if(!o)return;let l=o.spender,h=K(o.fee),y=K(g.value,3,!0),w=o.instructions.filter((L=>["sol-transfer","spl-transfer","raydium-swap-base-input","raydium-swap-base-output","jupiter-swap-shared-accounts-route","jupiter-swap-exact-out-route"].includes(L.type))),s=w.at(0);return!s||w.length>1?{fee:h,spender:l,balance:y}:s.type==="sol-transfer"?{fee:h,spender:l,balance:y,total:K(s.value)}:s.type==="spl-transfer"?{fee:h,spender:l,balance:y,total:`${C({amount:s.value,decimals:s.token.decimals})} ${s.token.symbol}`}:s.type==="raydium-swap-base-input"&&s.tokenIn&&s.tokenOut?{fee:h,spender:l,balance:y,swap:`${`${C({amount:s.amountIn,decimals:s.tokenIn.decimals})} ${s.tokenIn.symbol}`} → ${`${C({amount:s.minimumAmountOut,decimals:s.tokenOut.decimals})} ${s.tokenOut.symbol}`}`}:s.type==="raydium-swap-base-output"&&s.tokenIn&&s.tokenOut?{fee:h,spender:l,balance:y,swap:`${`${C({amount:s.maxAmountIn,decimals:s.tokenIn.decimals})} ${s.tokenIn.symbol}`} → ${`${C({amount:s.amountOut,decimals:s.tokenOut.decimals})} ${s.tokenOut.symbol}`}`}:s.type==="jupiter-swap-shared-accounts-route"&&s.tokenIn&&s.tokenOut?{fee:h,spender:l,balance:y,swap:`${`${C({amount:s.inAmount,decimals:s.tokenIn.decimals})} ${s.tokenIn.symbol}`} → ${`${C({amount:s.quotedOutAmount,decimals:s.tokenOut.decimals})} ${s.tokenOut.symbol}`}`}:s.type==="jupiter-swap-exact-out-route"&&s.tokenIn&&s.tokenOut?{fee:h,spender:l,balance:y,swap:`${`${C({amount:s.quotedInAmount,decimals:s.tokenIn.decimals})} ${s.tokenIn.symbol}`} → ${`${C({amount:s.outAmount,decimals:s.tokenOut.decimals})} ${s.tokenOut.symbol}`}`}:{fee:h,spender:l,balance:y}}),[o,O?.address,g]),W=v.useMemo((()=>{let l;if(!o||!c||!N||V)return;function h(...s){return Rt(s.reduce(((L,it)=>L+it),0n),N??0)}O?.address===o.spender&&(l=h(o.fee));let y=h(g.value),w=o.instructions.filter((s=>s.type==="sol-transfer"||s.type==="spl-transfer")).at(0);return!w||o.instructions.length>1?{fee:l,balance:y}:w.type==="sol-transfer"?{fee:l,balance:y,total:h(w.value,O?.address===o.spender?o.fee:0n)}:w.type==="spl-transfer"?{fee:l,balance:y,total:`${C({amount:w.value,decimals:w.token.decimals})} ${w.token.symbol}`}:{fee:l,balance:y}}),[o,c,N,V,O?.address,g]);if(v.useEffect((()=>{(async function(){if(b&&r)try{E(void 0);let l=await ce({tx:b,solanaClient:f,privyClient:r,checkFunds:!z});d(l)}catch(l){console.error("Failed to prepare transaction",l),E(l)}})()}),[b,f,r,z]),v.useEffect((()=>{(async function(){if(!O)return;A({value:g.value,isLoading:!0});let{value:l}=await f.rpc.getBalance(O.address,{commitment:"confirmed"}).send();A({value:l??0n,isLoading:!1})})().catch(console.error)}),[o]),!b||!t?.standardSignAndSendTransaction||!O){let l=Error("Invalid transaction request");return p.jsx(xt,{error:l,allowlistConfig:m.allowlistConfig,onRetry:()=>{t?.standardSignAndSendTransaction?.onFailure(l),i({shouldCallAuthOnSuccess:!1})}})}let q=()=>{if(!T)return _.signature||_.signedTransaction?t?.standardSignAndSendTransaction?.onSuccess({signature:_.signature,signedTransaction:_.signedTransaction}):t?.standardSignAndSendTransaction?.onFailure(J??j??Error("User exited the modal before submitting the transaction")),i({shouldCallAuthOnSuccess:!1})};n.current=q;let ot=t.standardSignAndSendTransaction?.uiOptions?.transactionInfo?.contractInfo?.imgUrl?p.jsx("img",{src:t.standardSignAndSendTransaction.uiOptions.transactionInfo.contractInfo.imgUrl,alt:t.standardSignAndSendTransaction.uiOptions.transactionInfo.contractInfo.imgAltText}):null,H=!!(t.funding&&t.funding.supportedOptions.length>0),Y=!o?.hasFunds&&H;if(_.signature||_.signedTransaction){let l=o?.instructions.filter((y=>y.type==="sol-transfer"||y.type==="spl-transfer")),h=l?.length===1?l?.at(0):void 0;return p.jsx(oe,{fees:_.fees??0n,onClose:q,transactionInfo:t.standardSignAndSendTransaction?.uiOptions.transactionInfo,solPrice:N,receiptHeader:t.standardSignAndSendTransaction?.uiOptions.successHeader,receiptDescription:t.standardSignAndSendTransaction?.uiOptions.successDescription,chain:f.chain,signOnly:z,instruction:h?.type==="sol-transfer"?{to:h.toAccount,amount:h.value}:{to:h?.toAccount||h?.toAta,total:F?.total}})}return J?p.jsx(Et,{transactionError:J,chainId:f.chain,onClose:q,chainType:"solana",onRetry:async()=>{X(void 0);let{value:l}=await f.rpc.getLatestBlockhash().send();var h,y;k((h=b,y=l,ft(Q().decode(tt(h)),(w=>kt(w)),(w=>bt(y,w)),(w=>wt(w)),(w=>new Uint8Array(yt().encode(w))))))}}):p.jsx(Lt,{img:ot,title:t.standardSignAndSendTransaction?.uiOptions?.transactionInfo?.title||"Confirm transaction",subtitle:t.standardSignAndSendTransaction?.uiOptions?.description||`${m.name} wants your permission to approve the following transaction.`,cta:Y?"Add funds":t.standardSignAndSendTransaction?.uiOptions?.buttonText||"Approve",instructions:o?.instructions??[],network:f.chain=="solana:mainnet"?"Solana":f.chain.replace("solana:",""),blockExplorerUrl:f.blockExplorerUrl,total:c?W?.total:F?.total,fee:c?W?.fee:F?.fee,balance:c?W?.balance:F?.balance,swap:F?.swap,transactingWalletAddress:O.address,disabled:!o?.hasFunds&&!H,isSubmitting:T,isPreparing:!o||g.isLoading,isTokenPriceLoading:c&&V,isMissingFunds:!o?.hasFunds,submitError:J??void 0,isSponsored:!!t.standardSignAndSendTransaction?.isSponsored,parseError:j,onClick:Y?async()=>{if(!O)return;if(!H)throw Error("Funding wallet is not enabled");let l="FundingMethodSelectionScreen";e({...t,funding:{...t.funding,methodScreen:l},solanaFundingData:t?.solanaFundingData}),a(l)}:async()=>{try{if($(!0),T||!O||!u||!x||!rt)return;let l=await t.standardSignAndSendTransaction.onConfirm(b);if("signature"in l){let h=await(async function({solanaClient:y,signature:w}){let s=gt().decode(w),L=await y.rpc.getTransaction(s,{maxSupportedTransactionVersion:0,commitment:"confirmed",encoding:"base64"}).send().catch((()=>null));return L?{fee:L.meta?.fee??0n}:null})({solanaClient:f,signature:l.signature});return void U({...l,fees:h?.fee})}U(l)}catch(l){console.warn({transaction:b,error:l}),X(l)}finally{$(!1)}},onClose:q})}};export{Qe as StandardSignAndSendTransactionScreen,Qe as default};
